import{createRequire as K5}from"node:module";var T5=Object.create;var{getPrototypeOf:j5,defineProperty:yq,getOwnPropertyNames:L5}=Object;var w5=Object.prototype.hasOwnProperty;var mq=($,J,q)=>{q=$!=null?T5(j5($)):{};let I=J||!$||!$.__esModule?yq(q,"default",{value:$,enumerable:!0}):q;for(let Q of L5($))if(!w5.call(I,Q))yq(I,Q,{get:()=>$[Q],enumerable:!0});return I};var A=($,J)=>()=>(J||$((J={exports:{}}).exports,J),J.exports);var o=K5(import.meta.url);var _q=A((JC,R5)=>{R5.exports={version:"1.39.1",name:"@dotenvx/dotenvx",description:"a better dotenvâ€“from the creator of `dotenv`",author:"@motdotla",keywords:["dotenv","env"],homepage:"https://github.com/dotenvx/dotenvx",repository:{type:"git",url:"git+https://github.com/dotenvx/dotenvx.git"},license:"BSD-3-Clause",files:["src/**/*","CHANGELOG.md"],main:"src/lib/main.js",types:"src/lib/main.d.ts",exports:{".":{types:"./src/lib/main.d.ts",require:"./src/lib/main.js",default:"./src/lib/main.js"},"./config":"./src/lib/config.js","./config.js":"./src/lib/config.js","./package.json":"./package.json"},bin:{dotenvx:"./src/cli/dotenvx.js","git-dotenvx":"./src/cli/dotenvx.js"},scripts:{standard:"standard","standard:fix":"standard --fix",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test-coverage":"tap run --show-full-coverage --timeout=60000",testshell:"bash shellspec",prerelease:"npm test && npm run testshell",release:"standard-version"},funding:"https://dotenvx.com",dependencies:{commander:"^11.1.0",dotenv:"^16.4.5",eciesjs:"^0.4.10",execa:"^5.1.1",fdir:"^6.2.0",ignore:"^5.3.0","object-treeify":"1.1.33",picomatch:"^4.0.2",which:"^4.0.0"},devDependencies:{"@yao-pkg/pkg":"^5.14.2","capture-console":"^1.0.2",esbuild:"^0.24.0",proxyquire:"^2.1.3",sinon:"^14.0.1",standard:"^17.1.0","standard-version":"^9.5.0",tap:"^21.0.1"},publishConfig:{access:"public",provenance:!0}}});var uq=A((qC,vq)=>{var{name:A5,version:f5,description:S5}=_q();vq.exports={name:A5,version:f5,description:S5}});var cq=A((IC,dq)=>{var{WriteStream:E5}=o("tty"),P5=()=>{try{return E5.prototype.getColorDepth()}catch($){let J=process.env.TERM;if(J&&(J.includes("256color")||J.includes("xterm")))return 8;return 4}};dq.exports={getColorDepth:P5}});var y8=A((QC,nq)=>{var lq=cq(),b5=new Map([["blue",34],["gray",37],["green",32],["olive",33],["orangered",31],["plum",35],["red",31],["electricblue",36],["dodgerblue",36]]),hq=new Map([["blue",21],["gray",244],["green",34],["olive",142],["orangered",202],["plum",182],["red",196],["electricblue",45],["dodgerblue",33]]);function F5($){let J=lq.getColorDepth();if(!hq.has($))throw Error(`Invalid color ${$}`);if(J>=8){let q=hq.get($);return(I)=>`\x1B[38;5;${q}m${I}\x1B[39m`}if(J>=4){let q=b5.get($);return(I)=>`\x1B[${q}m${I}\x1B[39m`}return(q)=>q}function k5($){if(lq.getColorDepth()>=4)return`\x1B[1m${$}\x1B[22m`;return $}nq.exports={getColor:F5,bold:k5}});var m8=A((YC,oq)=>{var iq=uq(),{getColor:r0,bold:g5}=y8(),N$={error:0,errorv:0,errornocolor:0,warn:1,success:2,successv:2,info:2,help:2,blank:2,verbose:4,debug:5,silly:6},rq=($)=>g5(r0("red")($)),x5=r0("orangered"),y5=r0("green"),m5=r0("olive"),_5=r0("dodgerblue"),v5=r0("plum"),u5=r0("plum"),pq=N$.info;function L0($,J){if(N$[$]===void 0)throw Error(`MISSING_LOG_LEVEL: '${$}'. implement in logger.`);if(N$[$]<=pq){let q=d5($,J);console.log(q)}}function d5($,J){let q=typeof J==="object"?JSON.stringify(J):J;switch($.toLowerCase()){case"error":return rq(q);case"errorv":return rq(`[dotenvx@${iq.version}] ${q}`);case"errornocolor":return q;case"warn":return x5(q);case"success":return y5(q);case"successv":return m5(`[dotenvx@${iq.version}] ${q}`);case"info":return q;case"help":return _5(q);case"verbose":return v5(q);case"debug":return u5(q);case"blank":return q}}var i$={level:"info",error:($)=>L0("error",$),errorv:($)=>L0("errorv",$),errornocolor:($)=>L0("errornocolor",$),warn:($)=>L0("warn",$),success:($)=>L0("success",$),successv:($)=>L0("successv",$),info:($)=>L0("info",$),help:($)=>L0("help",$),verbose:($)=>L0("verbose",$),debug:($)=>L0("debug",$),blank:($)=>L0("blank",$),setLevel:($)=>{if(N$[$]!==void 0)pq=N$[$],i$.level=$}};function c5($){let J=$.debug?"debug":$.verbose?"verbose":$.quiet?"error":$.logLevel;if(!J)return;if(i$.setLevel(J),!$.quiet||$.quiet&&J!=="error")i$.debug(`Setting log level to ${J}`)}oq.exports={logger:i$,getColor:r0,setLogLevel:c5,levels:N$}});var v8=A((tq)=>{Object.defineProperty(tq,"__esModule",{value:!0});tq.normalizePath=tq.convertSlashes=tq.cleanPath=void 0;var _8=o("path");function aq($){let J=(0,_8.normalize)($);if(J.length>1&&J[J.length-1]===_8.sep)J=J.substring(0,J.length-1);return J}tq.cleanPath=aq;var h5=/[\\/]/g;function sq($,J){return $.replace(h5,J)}tq.convertSlashes=sq;function l5($,J){let{resolvePaths:q,normalizePath:I,pathSeparator:Q}=J,Y=process.platform==="win32"&&$.includes("/")||$.startsWith(".");if(q)$=(0,_8.resolve)($);if(I||Y)$=aq($);if($===".")return"";let Z=$[$.length-1]!==Q;return sq(Z?$+Q:$,Q)}tq.normalizePath=l5});var I9=A((J9)=>{Object.defineProperty(J9,"__esModule",{value:!0});J9.build=J9.joinDirectoryPath=J9.joinPathWithBasePath=void 0;var r5=o("path"),p5=v8();function $9($,J){return J+$}J9.joinPathWithBasePath=$9;function o5($,J){return function(q,I){if(I.startsWith($))return I.replace($,"")+q;else return(0,p5.convertSlashes)((0,r5.relative)($,I),J.pathSeparator)+J.pathSeparator+q}}function a5($){return $}function s5($,J,q){return J+$+q}J9.joinDirectoryPath=s5;function t5($,J){let{relativePaths:q,includeBasePath:I}=J;return q&&$?o5($,J):I?$9:a5}J9.build=t5});var Z9=A((Q9)=>{Object.defineProperty(Q9,"__esModule",{value:!0});Q9.build=void 0;function J7($){return function(J,q){q.push(J.substring($.length)||".")}}function q7($){return function(J,q,I){let Q=J.substring($.length)||".";if(I.every((Y)=>Y(Q,!0)))q.push(Q)}}var I7=($,J)=>{J.push($||".")},Q7=($,J,q)=>{let I=$||".";if(q.every((Q)=>Q(I,!0)))J.push(I)},Y7=()=>{};function Z7($,J){let{includeDirs:q,filters:I,relativePaths:Q}=J;if(!q)return Y7;if(Q)return I&&I.length?q7($):J7($);return I&&I.length?Q7:I7}Q9.build=Z7});var z9=A((G9)=>{Object.defineProperty(G9,"__esModule",{value:!0});G9.build=void 0;var G7=($,J,q,I)=>{if(I.every((Q)=>Q($,!1)))q.files++},X7=($,J,q,I)=>{if(I.every((Q)=>Q($,!1)))J.push($)},z7=($,J,q,I)=>{q.files++},M7=($,J)=>{J.push($)},W7=()=>{};function U7($){let{excludeFiles:J,filters:q,onlyCounts:I}=$;if(J)return W7;if(q&&q.length)return I?G7:X7;else if(I)return z7;else return M7}G9.build=U7});var U9=A((M9)=>{Object.defineProperty(M9,"__esModule",{value:!0});M9.build=void 0;var V7=($)=>{return $},O7=()=>{return[""].slice(0,0)};function N7($){return $.group?O7:V7}M9.build=N7});var N9=A((V9)=>{Object.defineProperty(V9,"__esModule",{value:!0});V9.build=void 0;var B7=($,J,q)=>{$.push({directory:J,files:q,dir:J})},C7=()=>{};function D7($){return $.group?B7:C7}V9.build=D7});var D9=A((B$)=>{var H7=B$&&B$.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(B$,"__esModule",{value:!0});B$.build=void 0;var r$=H7(o("fs")),B9=o("path"),T7=function($,J,q){let{queue:I,options:{suppressErrors:Q}}=J;I.enqueue(),r$.default.realpath($,(Y,Z)=>{if(Y)return I.dequeue(Q?null:Y,J);r$.default.stat(Z,(G,z)=>{if(G)return I.dequeue(Q?null:G,J);if(z.isDirectory()&&C9($,Z,J))return I.dequeue(null,J);q(z,Z),I.dequeue(null,J)})})},j7=function($,J,q){let{queue:I,options:{suppressErrors:Q}}=J;I.enqueue();try{let Y=r$.default.realpathSync($),Z=r$.default.statSync(Y);if(Z.isDirectory()&&C9($,Y,J))return;q(Z,Y)}catch(Y){if(!Q)throw Y}};function L7($,J){if(!$.resolveSymlinks||$.excludeSymlinks)return null;return J?j7:T7}B$.build=L7;function C9($,J,q){if(q.options.useRealPaths)return w7(J,q);let I=(0,B9.dirname)($),Q=1;while(I!==q.root&&Q<2){let Y=q.symlinks.get(I);if(!!Y&&(Y===J||Y.startsWith(J)||J.startsWith(Y)))Q++;else I=(0,B9.dirname)(I)}return q.symlinks.set($,J),Q>1}function w7($,J){return J.visited.includes($+J.options.pathSeparator)}});var j9=A((H9)=>{Object.defineProperty(H9,"__esModule",{value:!0});H9.build=void 0;var K7=($)=>{return $.counts},R7=($)=>{return $.groups},A7=($)=>{return $.paths},f7=($)=>{return $.paths.slice(0,$.options.maxFiles)},S7=($,J,q)=>{return p$(J,q,$.counts,$.options.suppressErrors),null},E7=($,J,q)=>{return p$(J,q,$.paths,$.options.suppressErrors),null},P7=($,J,q)=>{return p$(J,q,$.paths.slice(0,$.options.maxFiles),$.options.suppressErrors),null},b7=($,J,q)=>{return p$(J,q,$.groups,$.options.suppressErrors),null};function p$($,J,q,I){if($&&!I)J($,q);else J(null,q)}function F7($,J){let{onlyCounts:q,group:I,maxFiles:Q}=$;if(q)return J?K7:S7;else if(I)return J?R7:b7;else if(Q)return J?f7:P7;else return J?A7:E7}H9.build=F7});var K9=A((C$)=>{var k7=C$&&C$.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(C$,"__esModule",{value:!0});C$.build=void 0;var L9=k7(o("fs")),w9={withFileTypes:!0},g7=($,J,q,I,Q)=>{if(I<0)return $.queue.dequeue(null,$);$.visited.push(J),$.counts.directories++,$.queue.enqueue(),L9.default.readdir(J||".",w9,(Y,Z=[])=>{Q(Z,q,I),$.queue.dequeue($.options.suppressErrors?null:Y,$)})},x7=($,J,q,I,Q)=>{if(I<0)return;$.visited.push(J),$.counts.directories++;let Y=[];try{Y=L9.default.readdirSync(J||".",w9)}catch(Z){if(!$.options.suppressErrors)throw Z}Q(Y,q,I)};function y7($){return $?x7:g7}C$.build=y7});var S9=A((A9)=>{Object.defineProperty(A9,"__esModule",{value:!0});A9.Queue=void 0;class R9{onQueueEmpty;count=0;constructor($){this.onQueueEmpty=$}enqueue(){this.count++}dequeue($,J){if(--this.count<=0||$)this.onQueueEmpty($,J)}}A9.Queue=R9});var F9=A((P9)=>{Object.defineProperty(P9,"__esModule",{value:!0});P9.Counter=void 0;class E9{_files=0;_directories=0;set files($){this._files=$}get files(){return this._files}set directories($){this._directories=$}get directories(){return this._directories}get dirs(){return this._directories}}P9.Counter=E9});var c8=A((f0)=>{var m7=f0&&f0.__createBinding||(Object.create?function($,J,q,I){if(I===void 0)I=q;var Q=Object.getOwnPropertyDescriptor(J,q);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[q]}};Object.defineProperty($,I,Q)}:function($,J,q,I){if(I===void 0)I=q;$[I]=J[q]}),_7=f0&&f0.__setModuleDefault||(Object.create?function($,J){Object.defineProperty($,"default",{enumerable:!0,value:J})}:function($,J){$.default=J}),p0=f0&&f0.__importStar||function($){if($&&$.__esModule)return $;var J={};if($!=null){for(var q in $)if(q!=="default"&&Object.prototype.hasOwnProperty.call($,q))m7(J,$,q)}return _7(J,$),J};Object.defineProperty(f0,"__esModule",{value:!0});f0.Walker=void 0;var k9=o("path"),u8=v8(),d8=p0(I9()),v7=p0(Z9()),u7=p0(z9()),d7=p0(U9()),c7=p0(N9()),h7=p0(D9()),l7=p0(j9()),n7=p0(K9()),i7=S9(),r7=F9();class g9{root;isSynchronous;state;joinPath;pushDirectory;pushFile;getArray;groupFiles;resolveSymlink;walkDirectory;callbackInvoker;constructor($,J,q){this.isSynchronous=!q,this.callbackInvoker=l7.build(J,this.isSynchronous),this.root=(0,u8.normalizePath)($,J),this.state={root:this.root.slice(0,-1),paths:[""].slice(0,0),groups:[],counts:new r7.Counter,options:J,queue:new i7.Queue((I,Q)=>this.callbackInvoker(Q,I,q)),symlinks:new Map,visited:[""].slice(0,0)},this.joinPath=d8.build(this.root,J),this.pushDirectory=v7.build(this.root,J),this.pushFile=u7.build(J),this.getArray=d7.build(J),this.groupFiles=c7.build(J),this.resolveSymlink=h7.build(J,this.isSynchronous),this.walkDirectory=n7.build(this.isSynchronous)}start(){return this.walkDirectory(this.state,this.root,this.root,this.state.options.maxDepth,this.walk),this.isSynchronous?this.callbackInvoker(this.state,null):null}walk=($,J,q)=>{let{paths:I,options:{filters:Q,resolveSymlinks:Y,excludeSymlinks:Z,exclude:G,maxFiles:z,signal:M,useRealPaths:X,pathSeparator:V}}=this.state;if(M&&M.aborted||z&&I.length>z)return;this.pushDirectory(J,I,Q);let N=this.getArray(this.state.paths);for(let H=0;H<$.length;++H){let D=$[H];if(D.isFile()||D.isSymbolicLink()&&!Y&&!Z){let W=this.joinPath(D.name,J);this.pushFile(W,N,this.state.counts,Q)}else if(D.isDirectory()){let W=d8.joinDirectoryPath(D.name,J,this.state.options.pathSeparator);if(G&&G(D.name,W))continue;this.walkDirectory(this.state,W,W,q-1,this.walk)}else if(D.isSymbolicLink()&&this.resolveSymlink){let W=d8.joinPathWithBasePath(D.name,J);this.resolveSymlink(W,this.state,(j,w)=>{if(j.isDirectory()){if(w=(0,u8.normalizePath)(w,this.state.options),G&&G(D.name,X?w:W+V))return;this.walkDirectory(this.state,w,X?w:W+V,q-1,this.walk)}else{w=X?w:W;let B=(0,k9.basename)(w),C=(0,u8.normalizePath)((0,k9.dirname)(w),this.state.options);w=this.joinPath(B,C),this.pushFile(w,N,this.state.counts,Q)}})}}this.groupFiles(this.state.groups,J,N)}}f0.Walker=g9});var _9=A((y9)=>{Object.defineProperty(y9,"__esModule",{value:!0});y9.callback=y9.promise=void 0;var p7=c8();function o7($,J){return new Promise((q,I)=>{x9($,J,(Q,Y)=>{if(Q)return I(Q);q(Y)})})}y9.promise=o7;function x9($,J,q){new p7.Walker($,J,q).start()}y9.callback=x9});var d9=A((v9)=>{Object.defineProperty(v9,"__esModule",{value:!0});v9.sync=void 0;var s7=c8();function t7($,J){return new s7.Walker($,J).start()}v9.sync=t7});var i9=A((l9)=>{Object.defineProperty(l9,"__esModule",{value:!0});l9.APIBuilder=void 0;var c9=_9(),e7=d9();class h9{root;options;constructor($,J){this.root=$,this.options=J}withPromise(){return(0,c9.promise)(this.root,this.options)}withCallback($){(0,c9.callback)(this.root,this.options,$)}sync(){return(0,e7.sync)(this.root,this.options)}}l9.APIBuilder=h9});var A$=A((jC,p9)=>{var r9={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)",SEP:"/"},$z={...r9,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)",SEP:"\\"},Jz={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};p9.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:Jz,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars($){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${$.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars($){return $===!0?$z:r9}}});var f$=A((Zz)=>{var{REGEX_BACKSLASH:qz,REGEX_REMOVE_BACKSLASH:Iz,REGEX_SPECIAL_CHARS:Qz,REGEX_SPECIAL_CHARS_GLOBAL:Yz}=A$();Zz.isObject=($)=>$!==null&&typeof $==="object"&&!Array.isArray($);Zz.hasRegexChars=($)=>Qz.test($);Zz.isRegexChar=($)=>$.length===1&&Zz.hasRegexChars($);Zz.escapeRegex=($)=>$.replace(Yz,"\\$1");Zz.toPosixSlashes=($)=>$.replace(qz,"/");Zz.isWindows=()=>{if(typeof navigator<"u"&&navigator.platform){let $=navigator.platform.toLowerCase();return $==="win32"||$==="windows"}if(typeof process<"u"&&process.platform)return process.platform==="win32";return!1};Zz.removeBackslashes=($)=>{return $.replace(Iz,(J)=>{return J==="\\"?"":J})};Zz.escapeLast=($,J,q)=>{let I=$.lastIndexOf(J,q);if(I===-1)return $;if($[I-1]==="\\")return Zz.escapeLast($,J,I-1);return`${$.slice(0,I)}\\${$.slice(I)}`};Zz.removePrefix=($,J={})=>{let q=$;if(q.startsWith("./"))q=q.slice(2),J.prefix="./";return q};Zz.wrapOutput=($,J={},q={})=>{let I=q.contains?"":"^",Q=q.contains?"":"$",Y=`${I}(?:${$})${Q}`;if(J.negated===!0)Y=`(?:^(?!${Y}).*$)`;return Y};Zz.basename=($,{windows:J}={})=>{let q=$.split(J?/[\\/]/:"/"),I=q[q.length-1];if(I==="")return q[q.length-2];return I}});var QI=A((wC,II)=>{var s9=f$(),{CHAR_ASTERISK:h8,CHAR_AT:Bz,CHAR_BACKWARD_SLASH:S$,CHAR_COMMA:Cz,CHAR_DOT:l8,CHAR_EXCLAMATION_MARK:n8,CHAR_FORWARD_SLASH:qI,CHAR_LEFT_CURLY_BRACE:i8,CHAR_LEFT_PARENTHESES:r8,CHAR_LEFT_SQUARE_BRACKET:Dz,CHAR_PLUS:Hz,CHAR_QUESTION_MARK:t9,CHAR_RIGHT_CURLY_BRACE:Tz,CHAR_RIGHT_PARENTHESES:e9,CHAR_RIGHT_SQUARE_BRACKET:jz}=A$(),$I=($)=>{return $===qI||$===S$},JI=($)=>{if($.isPrefix!==!0)$.depth=$.isGlobstar?1/0:1},Lz=($,J)=>{let q=J||{},I=$.length-1,Q=q.parts===!0||q.scanToEnd===!0,Y=[],Z=[],G=[],z=$,M=-1,X=0,V=0,N=!1,H=!1,D=!1,W=!1,j=!1,w=!1,B=!1,C=!1,R=!1,P=!1,E=0,k,f,g={value:"",depth:0,isGlob:!1},T=()=>M>=I,_=()=>z.charCodeAt(M+1),i=()=>{return k=f,z.charCodeAt(++M)};while(M<I){f=i();let K;if(f===S$){if(B=g.backslashes=!0,f=i(),f===i8)w=!0;continue}if(w===!0||f===i8){E++;while(T()!==!0&&(f=i())){if(f===S$){B=g.backslashes=!0,i();continue}if(f===i8){E++;continue}if(w!==!0&&f===l8&&(f=i())===l8){if(N=g.isBrace=!0,D=g.isGlob=!0,P=!0,Q===!0)continue;break}if(w!==!0&&f===Cz){if(N=g.isBrace=!0,D=g.isGlob=!0,P=!0,Q===!0)continue;break}if(f===Tz){if(E--,E===0){w=!1,N=g.isBrace=!0,P=!0;break}}}if(Q===!0)continue;break}if(f===qI){if(Y.push(M),Z.push(g),g={value:"",depth:0,isGlob:!1},P===!0)continue;if(k===l8&&M===X+1){X+=2;continue}V=M+1;continue}if(q.noext!==!0){if((f===Hz||f===Bz||f===h8||f===t9||f===n8)===!0&&_()===r8){if(D=g.isGlob=!0,W=g.isExtglob=!0,P=!0,f===n8&&M===X)R=!0;if(Q===!0){while(T()!==!0&&(f=i())){if(f===S$){B=g.backslashes=!0,f=i();continue}if(f===e9){D=g.isGlob=!0,P=!0;break}}continue}break}}if(f===h8){if(k===h8)j=g.isGlobstar=!0;if(D=g.isGlob=!0,P=!0,Q===!0)continue;break}if(f===t9){if(D=g.isGlob=!0,P=!0,Q===!0)continue;break}if(f===Dz){while(T()!==!0&&(K=i())){if(K===S$){B=g.backslashes=!0,i();continue}if(K===jz){H=g.isBracket=!0,D=g.isGlob=!0,P=!0;break}}if(Q===!0)continue;break}if(q.nonegate!==!0&&f===n8&&M===X){C=g.negated=!0,X++;continue}if(q.noparen!==!0&&f===r8){if(D=g.isGlob=!0,Q===!0){while(T()!==!0&&(f=i())){if(f===r8){B=g.backslashes=!0,f=i();continue}if(f===e9){P=!0;break}}continue}break}if(D===!0){if(P=!0,Q===!0)continue;break}}if(q.noext===!0)W=!1,D=!1;let n=z,U="",O="";if(X>0)U=z.slice(0,X),z=z.slice(X),V-=X;if(n&&D===!0&&V>0)n=z.slice(0,V),O=z.slice(V);else if(D===!0)n="",O=z;else n=z;if(n&&n!==""&&n!=="/"&&n!==z){if($I(n.charCodeAt(n.length-1)))n=n.slice(0,-1)}if(q.unescape===!0){if(O)O=s9.removeBackslashes(O);if(n&&B===!0)n=s9.removeBackslashes(n)}let L={prefix:U,input:$,start:X,base:n,glob:O,isBrace:N,isBracket:H,isGlob:D,isExtglob:W,isGlobstar:j,negated:C,negatedExtglob:R};if(q.tokens===!0){if(L.maxDepth=0,!$I(f))Z.push(g);L.tokens=Z}if(q.parts===!0||q.tokens===!0){let K;for(let S=0;S<Y.length;S++){let m=K?K+1:X,u=Y[S],v=$.slice(m,u);if(q.tokens){if(S===0&&X!==0)Z[S].isPrefix=!0,Z[S].value=U;else Z[S].value=v;JI(Z[S]),L.maxDepth+=Z[S].depth}if(S!==0||v!=="")G.push(v);K=u}if(K&&K+1<$.length){let S=$.slice(K+1);if(G.push(S),q.tokens)Z[Z.length-1].value=S,JI(Z[Z.length-1]),L.maxDepth+=Z[Z.length-1].depth}L.slashes=Y,L.parts=G}return L};II.exports=Lz});var GI=A((KC,ZI)=>{var o$=A$(),S0=f$(),{MAX_LENGTH:a$,POSIX_REGEX_SOURCE:wz,REGEX_NON_SPECIAL_CHARS:Kz,REGEX_SPECIAL_CHARS_BACKREF:Rz,REPLACEMENTS:YI}=o$,Az=($,J)=>{if(typeof J.expandRange==="function")return J.expandRange(...$,J);$.sort();let q=`[${$.join("-")}]`;try{new RegExp(q)}catch(I){return $.map((Q)=>S0.escapeRegex(Q)).join("..")}return q},D$=($,J)=>{return`Missing ${$}: "${J}" - use "\\\\${J}" to match literal characters`},p8=($,J)=>{if(typeof $!=="string")throw TypeError("Expected a string");$=YI[$]||$;let q={...J},I=typeof q.maxLength==="number"?Math.min(a$,q.maxLength):a$,Q=$.length;if(Q>I)throw SyntaxError(`Input length: ${Q}, exceeds maximum allowed length: ${I}`);let Y={type:"bos",value:"",output:q.prepend||""},Z=[Y],G=q.capture?"":"?:",z=o$.globChars(q.windows),M=o$.extglobChars(z),{DOT_LITERAL:X,PLUS_LITERAL:V,SLASH_LITERAL:N,ONE_CHAR:H,DOTS_SLASH:D,NO_DOT:W,NO_DOT_SLASH:j,NO_DOTS_SLASH:w,QMARK:B,QMARK_NO_DOT:C,STAR:R,START_ANCHOR:P}=z,E=(F)=>{return`(${G}(?:(?!${P}${F.dot?D:X}).)*?)`},k=q.dot?"":W,f=q.dot?B:C,g=q.bash===!0?E(q):R;if(q.capture)g=`(${g})`;if(typeof q.noext==="boolean")q.noextglob=q.noext;let T={input:$,index:-1,start:0,dot:q.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:Z};$=S0.removePrefix($,T),Q=$.length;let _=[],i=[],n=[],U=Y,O,L=()=>T.index===Q-1,K=T.peek=(F=1)=>$[T.index+F],S=T.advance=()=>$[++T.index]||"",m=()=>$.slice(T.index+1),u=(F="",h=0)=>{T.consumed+=F,T.index+=h},v=(F)=>{T.output+=F.output!=null?F.output:F.value,u(F.value)},r=()=>{let F=1;while(K()==="!"&&(K(2)!=="("||K(3)==="?"))S(),T.start++,F++;if(F%2===0)return!1;return T.negated=!0,T.start++,!0},l=(F)=>{T[F]++,n.push(F)},c=(F)=>{T[F]--,n.pop()},y=(F)=>{if(U.type==="globstar"){let h=T.braces>0&&(F.type==="comma"||F.type==="brace"),b=F.extglob===!0||_.length&&(F.type==="pipe"||F.type==="paren");if(F.type!=="slash"&&F.type!=="paren"&&!h&&!b)T.output=T.output.slice(0,-U.output.length),U.type="star",U.value="*",U.output=g,T.output+=U.output}if(_.length&&F.type!=="paren")_[_.length-1].inner+=F.value;if(F.value||F.output)v(F);if(U&&U.type==="text"&&F.type==="text"){U.output=(U.output||U.value)+F.value,U.value+=F.value;return}F.prev=U,Z.push(F),U=F},q0=(F,h)=>{let b={...M[h],conditions:1,inner:""};b.prev=U,b.parens=T.parens,b.output=T.output;let d=(q.capture?"(":"")+b.open;l("parens"),y({type:F,value:h,output:T.output?"":H}),y({type:"paren",extglob:!0,value:S(),output:d}),_.push(b)},U0=(F)=>{let h=F.close+(q.capture?")":""),b;if(F.type==="negate"){let d=g;if(F.inner&&F.inner.length>1&&F.inner.includes("/"))d=E(q);if(d!==g||L()||/^\)+$/.test(m()))h=F.close=`)$))${d}`;if(F.inner.includes("*")&&(b=m())&&/^\.[^\\/.]+$/.test(b)){let a=p8(b,{...J,fastpaths:!1}).output;h=F.close=`)${a})${d})`}if(F.prev.type==="bos")T.negatedExtglob=!0}y({type:"paren",extglob:!0,value:O,output:h}),c("parens")};if(q.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test($)){let F=!1,h=$.replace(Rz,(b,d,a,Y0,$0,i0)=>{if(Y0==="\\")return F=!0,b;if(Y0==="?"){if(d)return d+Y0+($0?B.repeat($0.length):"");if(i0===0)return f+($0?B.repeat($0.length):"");return B.repeat(a.length)}if(Y0===".")return X.repeat(a.length);if(Y0==="*"){if(d)return d+Y0+($0?g:"");return g}return d?b:`\\${b}`});if(F===!0)if(q.unescape===!0)h=h.replace(/\\/g,"");else h=h.replace(/\\+/g,(b)=>{return b.length%2===0?"\\\\":b?"\\":""});if(h===$&&q.contains===!0)return T.output=$,T;return T.output=S0.wrapOutput(h,T,J),T}while(!L()){if(O=S(),O==="\x00")continue;if(O==="\\"){let b=K();if(b==="/"&&q.bash!==!0)continue;if(b==="."||b===";")continue;if(!b){O+="\\",y({type:"text",value:O});continue}let d=/^\\+/.exec(m()),a=0;if(d&&d[0].length>2){if(a=d[0].length,T.index+=a,a%2!==0)O+="\\"}if(q.unescape===!0)O=S();else O+=S();if(T.brackets===0){y({type:"text",value:O});continue}}if(T.brackets>0&&(O!=="]"||U.value==="["||U.value==="[^")){if(q.posix!==!1&&O===":"){let b=U.value.slice(1);if(b.includes("[")){if(U.posix=!0,b.includes(":")){let d=U.value.lastIndexOf("["),a=U.value.slice(0,d),Y0=U.value.slice(d+2),$0=wz[Y0];if($0){if(U.value=a+$0,T.backtrack=!0,S(),!Y.output&&Z.indexOf(U)===1)Y.output=H;continue}}}}if(O==="["&&K()!==":"||O==="-"&&K()==="]")O=`\\${O}`;if(O==="]"&&(U.value==="["||U.value==="[^"))O=`\\${O}`;if(q.posix===!0&&O==="!"&&U.value==="[")O="^";U.value+=O,v({value:O});continue}if(T.quotes===1&&O!=='"'){O=S0.escapeRegex(O),U.value+=O,v({value:O});continue}if(O==='"'){if(T.quotes=T.quotes===1?0:1,q.keepQuotes===!0)y({type:"text",value:O});continue}if(O==="("){l("parens"),y({type:"paren",value:O});continue}if(O===")"){if(T.parens===0&&q.strictBrackets===!0)throw SyntaxError(D$("opening","("));let b=_[_.length-1];if(b&&T.parens===b.parens+1){U0(_.pop());continue}y({type:"paren",value:O,output:T.parens?")":"\\)"}),c("parens");continue}if(O==="["){if(q.nobracket===!0||!m().includes("]")){if(q.nobracket!==!0&&q.strictBrackets===!0)throw SyntaxError(D$("closing","]"));O=`\\${O}`}else l("brackets");y({type:"bracket",value:O});continue}if(O==="]"){if(q.nobracket===!0||U&&U.type==="bracket"&&U.value.length===1){y({type:"text",value:O,output:`\\${O}`});continue}if(T.brackets===0){if(q.strictBrackets===!0)throw SyntaxError(D$("opening","["));y({type:"text",value:O,output:`\\${O}`});continue}c("brackets");let b=U.value.slice(1);if(U.posix!==!0&&b[0]==="^"&&!b.includes("/"))O=`/${O}`;if(U.value+=O,v({value:O}),q.literalBrackets===!1||S0.hasRegexChars(b))continue;let d=S0.escapeRegex(U.value);if(T.output=T.output.slice(0,-U.value.length),q.literalBrackets===!0){T.output+=d,U.value=d;continue}U.value=`(${G}${d}|${U.value})`,T.output+=U.value;continue}if(O==="{"&&q.nobrace!==!0){l("braces");let b={type:"brace",value:O,output:"(",outputIndex:T.output.length,tokensIndex:T.tokens.length};i.push(b),y(b);continue}if(O==="}"){let b=i[i.length-1];if(q.nobrace===!0||!b){y({type:"text",value:O,output:O});continue}let d=")";if(b.dots===!0){let a=Z.slice(),Y0=[];for(let $0=a.length-1;$0>=0;$0--){if(Z.pop(),a[$0].type==="brace")break;if(a[$0].type!=="dots")Y0.unshift(a[$0].value)}d=Az(Y0,q),T.backtrack=!0}if(b.comma!==!0&&b.dots!==!0){let a=T.output.slice(0,b.outputIndex),Y0=T.tokens.slice(b.tokensIndex);b.value=b.output="\\{",O=d="\\}",T.output=a;for(let $0 of Y0)T.output+=$0.output||$0.value}y({type:"brace",value:O,output:d}),c("braces"),i.pop();continue}if(O==="|"){if(_.length>0)_[_.length-1].conditions++;y({type:"text",value:O});continue}if(O===","){let b=O,d=i[i.length-1];if(d&&n[n.length-1]==="braces")d.comma=!0,b="|";y({type:"comma",value:O,output:b});continue}if(O==="/"){if(U.type==="dot"&&T.index===T.start+1){T.start=T.index+1,T.consumed="",T.output="",Z.pop(),U=Y;continue}y({type:"slash",value:O,output:N});continue}if(O==="."){if(T.braces>0&&U.type==="dot"){if(U.value===".")U.output=X;let b=i[i.length-1];U.type="dots",U.output+=O,U.value+=O,b.dots=!0;continue}if(T.braces+T.parens===0&&U.type!=="bos"&&U.type!=="slash"){y({type:"text",value:O,output:X});continue}y({type:"dot",value:O,output:X});continue}if(O==="?"){if(!(U&&U.value==="(")&&q.noextglob!==!0&&K()==="("&&K(2)!=="?"){q0("qmark",O);continue}if(U&&U.type==="paren"){let d=K(),a=O;if(U.value==="("&&!/[!=<:]/.test(d)||d==="<"&&!/<([!=]|\w+>)/.test(m()))a=`\\${O}`;y({type:"text",value:O,output:a});continue}if(q.dot!==!0&&(U.type==="slash"||U.type==="bos")){y({type:"qmark",value:O,output:C});continue}y({type:"qmark",value:O,output:B});continue}if(O==="!"){if(q.noextglob!==!0&&K()==="("){if(K(2)!=="?"||!/[!=<:]/.test(K(3))){q0("negate",O);continue}}if(q.nonegate!==!0&&T.index===0){r();continue}}if(O==="+"){if(q.noextglob!==!0&&K()==="("&&K(2)!=="?"){q0("plus",O);continue}if(U&&U.value==="("||q.regex===!1){y({type:"plus",value:O,output:V});continue}if(U&&(U.type==="bracket"||U.type==="paren"||U.type==="brace")||T.parens>0){y({type:"plus",value:O});continue}y({type:"plus",value:V});continue}if(O==="@"){if(q.noextglob!==!0&&K()==="("&&K(2)!=="?"){y({type:"at",extglob:!0,value:O,output:""});continue}y({type:"text",value:O});continue}if(O!=="*"){if(O==="$"||O==="^")O=`\\${O}`;let b=Kz.exec(m());if(b)O+=b[0],T.index+=b[0].length;y({type:"text",value:O});continue}if(U&&(U.type==="globstar"||U.star===!0)){U.type="star",U.star=!0,U.value+=O,U.output=g,T.backtrack=!0,T.globstar=!0,u(O);continue}let F=m();if(q.noextglob!==!0&&/^\([^?]/.test(F)){q0("star",O);continue}if(U.type==="star"){if(q.noglobstar===!0){u(O);continue}let b=U.prev,d=b.prev,a=b.type==="slash"||b.type==="bos",Y0=d&&(d.type==="star"||d.type==="globstar");if(q.bash===!0&&(!a||F[0]&&F[0]!=="/")){y({type:"star",value:O,output:""});continue}let $0=T.braces>0&&(b.type==="comma"||b.type==="brace"),i0=_.length&&(b.type==="pipe"||b.type==="paren");if(!a&&b.type!=="paren"&&!$0&&!i0){y({type:"star",value:O,output:""});continue}while(F.slice(0,3)==="/**"){let O$=$[T.index+4];if(O$&&O$!=="/")break;F=F.slice(3),u("/**",3)}if(b.type==="bos"&&L()){U.type="globstar",U.value+=O,U.output=E(q),T.output=U.output,T.globstar=!0,u(O);continue}if(b.type==="slash"&&b.prev.type!=="bos"&&!Y0&&L()){T.output=T.output.slice(0,-(b.output+U.output).length),b.output=`(?:${b.output}`,U.type="globstar",U.output=E(q)+(q.strictSlashes?")":"|$)"),U.value+=O,T.globstar=!0,T.output+=b.output+U.output,u(O);continue}if(b.type==="slash"&&b.prev.type!=="bos"&&F[0]==="/"){let O$=F[1]!==void 0?"|$":"";T.output=T.output.slice(0,-(b.output+U.output).length),b.output=`(?:${b.output}`,U.type="globstar",U.output=`${E(q)}${N}|${N}${O$})`,U.value+=O,T.output+=b.output+U.output,T.globstar=!0,u(O+S()),y({type:"slash",value:"/",output:""});continue}if(b.type==="bos"&&F[0]==="/"){U.type="globstar",U.value+=O,U.output=`(?:^|${N}|${E(q)}${N})`,T.output=U.output,T.globstar=!0,u(O+S()),y({type:"slash",value:"/",output:""});continue}T.output=T.output.slice(0,-U.output.length),U.type="globstar",U.output=E(q),U.value+=O,T.output+=U.output,T.globstar=!0,u(O);continue}let h={type:"star",value:O,output:g};if(q.bash===!0){if(h.output=".*?",U.type==="bos"||U.type==="slash")h.output=k+h.output;y(h);continue}if(U&&(U.type==="bracket"||U.type==="paren")&&q.regex===!0){h.output=O,y(h);continue}if(T.index===T.start||U.type==="slash"||U.type==="dot"){if(U.type==="dot")T.output+=j,U.output+=j;else if(q.dot===!0)T.output+=w,U.output+=w;else T.output+=k,U.output+=k;if(K()!=="*")T.output+=H,U.output+=H}y(h)}while(T.brackets>0){if(q.strictBrackets===!0)throw SyntaxError(D$("closing","]"));T.output=S0.escapeLast(T.output,"["),c("brackets")}while(T.parens>0){if(q.strictBrackets===!0)throw SyntaxError(D$("closing",")"));T.output=S0.escapeLast(T.output,"("),c("parens")}while(T.braces>0){if(q.strictBrackets===!0)throw SyntaxError(D$("closing","}"));T.output=S0.escapeLast(T.output,"{"),c("braces")}if(q.strictSlashes!==!0&&(U.type==="star"||U.type==="bracket"))y({type:"maybe_slash",value:"",output:`${N}?`});if(T.backtrack===!0){T.output="";for(let F of T.tokens)if(T.output+=F.output!=null?F.output:F.value,F.suffix)T.output+=F.suffix}return T};p8.fastpaths=($,J)=>{let q={...J},I=typeof q.maxLength==="number"?Math.min(a$,q.maxLength):a$,Q=$.length;if(Q>I)throw SyntaxError(`Input length: ${Q}, exceeds maximum allowed length: ${I}`);$=YI[$]||$;let{DOT_LITERAL:Y,SLASH_LITERAL:Z,ONE_CHAR:G,DOTS_SLASH:z,NO_DOT:M,NO_DOTS:X,NO_DOTS_SLASH:V,STAR:N,START_ANCHOR:H}=o$.globChars(q.windows),D=q.dot?X:M,W=q.dot?V:M,j=q.capture?"":"?:",w={negated:!1,prefix:""},B=q.bash===!0?".*?":N;if(q.capture)B=`(${B})`;let C=(k)=>{if(k.noglobstar===!0)return B;return`(${j}(?:(?!${H}${k.dot?z:Y}).)*?)`},R=(k)=>{switch(k){case"*":return`${D}${G}${B}`;case".*":return`${Y}${G}${B}`;case"*.*":return`${D}${B}${Y}${G}${B}`;case"*/*":return`${D}${B}${Z}${G}${W}${B}`;case"**":return D+C(q);case"**/*":return`(?:${D}${C(q)}${Z})?${W}${G}${B}`;case"**/*.*":return`(?:${D}${C(q)}${Z})?${W}${B}${Y}${G}${B}`;case"**/.*":return`(?:${D}${C(q)}${Z})?${Y}${G}${B}`;default:{let f=/^(.*?)\.(\w+)$/.exec(k);if(!f)return;let g=R(f[1]);if(!g)return;return g+Y+f[2]}}},P=S0.removePrefix($,w),E=R(P);if(E&&q.strictSlashes!==!0)E+=`${Z}?`;return E};ZI.exports=p8});var MI=A((RC,zI)=>{var fz=QI(),o8=GI(),XI=f$(),Sz=A$(),Ez=($)=>$&&typeof $==="object"&&!Array.isArray($),Z0=($,J,q=!1)=>{if(Array.isArray($)){let X=$.map((N)=>Z0(N,J,q));return(N)=>{for(let H of X){let D=H(N);if(D)return D}return!1}}let I=Ez($)&&$.tokens&&$.input;if($===""||typeof $!=="string"&&!I)throw TypeError("Expected pattern to be a non-empty string");let Q=J||{},Y=Q.windows,Z=I?Z0.compileRe($,J):Z0.makeRe($,J,!1,!0),G=Z.state;delete Z.state;let z=()=>!1;if(Q.ignore){let X={...J,ignore:null,onMatch:null,onResult:null};z=Z0(Q.ignore,X,q)}let M=(X,V=!1)=>{let{isMatch:N,match:H,output:D}=Z0.test(X,Z,J,{glob:$,posix:Y}),W={glob:$,state:G,regex:Z,posix:Y,input:X,output:D,match:H,isMatch:N};if(typeof Q.onResult==="function")Q.onResult(W);if(N===!1)return W.isMatch=!1,V?W:!1;if(z(X)){if(typeof Q.onIgnore==="function")Q.onIgnore(W);return W.isMatch=!1,V?W:!1}if(typeof Q.onMatch==="function")Q.onMatch(W);return V?W:!0};if(q)M.state=G;return M};Z0.test=($,J,q,{glob:I,posix:Q}={})=>{if(typeof $!=="string")throw TypeError("Expected input to be a string");if($==="")return{isMatch:!1,output:""};let Y=q||{},Z=Y.format||(Q?XI.toPosixSlashes:null),G=$===I,z=G&&Z?Z($):$;if(G===!1)z=Z?Z($):$,G=z===I;if(G===!1||Y.capture===!0)if(Y.matchBase===!0||Y.basename===!0)G=Z0.matchBase($,J,q,Q);else G=J.exec(z);return{isMatch:Boolean(G),match:G,output:z}};Z0.matchBase=($,J,q)=>{return(J instanceof RegExp?J:Z0.makeRe(J,q)).test(XI.basename($))};Z0.isMatch=($,J,q)=>Z0(J,q)($);Z0.parse=($,J)=>{if(Array.isArray($))return $.map((q)=>Z0.parse(q,J));return o8($,{...J,fastpaths:!1})};Z0.scan=($,J)=>fz($,J);Z0.compileRe=($,J,q=!1,I=!1)=>{if(q===!0)return $.output;let Q=J||{},Y=Q.contains?"":"^",Z=Q.contains?"":"$",G=`${Y}(?:${$.output})${Z}`;if($&&$.negated===!0)G=`^(?!${G}).*$`;let z=Z0.toRegex(G,J);if(I===!0)z.state=$;return z};Z0.makeRe=($,J={},q=!1,I=!1)=>{if(!$||typeof $!=="string")throw TypeError("Expected a non-empty string");let Q={negated:!1,fastpaths:!0};if(J.fastpaths!==!1&&($[0]==="."||$[0]==="*"))Q.output=o8.fastpaths($,J);if(!Q.output)Q=o8($,J);return Z0.compileRe(Q,J,q,I)};Z0.toRegex=($,J)=>{try{let q=J||{};return new RegExp($,q.flags||(q.nocase?"i":""))}catch(q){if(J&&J.debug===!0)throw q;return/$^/}};Z0.constants=Sz;zI.exports=Z0});var s$=A((AC,VI)=>{var WI=MI(),Pz=f$();function UI($,J,q=!1){if(J&&(J.windows===null||J.windows===void 0))J={...J,windows:Pz.isWindows()};return WI($,J,q)}Object.assign(UI,WI);VI.exports=UI});var HI=A((CI)=>{Object.defineProperty(CI,"__esModule",{value:!0});CI.Builder=void 0;var bz=o("path"),OI=i9(),NI=null;try{o.resolve("picomatch"),NI=s$()}catch($){}class BI{globCache={};options={maxDepth:1/0,suppressErrors:!0,pathSeparator:bz.sep,filters:[]};globFunction;constructor($){this.options={...this.options,...$},this.globFunction=this.options.globFunction}group(){return this.options.group=!0,this}withPathSeparator($){return this.options.pathSeparator=$,this}withBasePath(){return this.options.includeBasePath=!0,this}withRelativePaths(){return this.options.relativePaths=!0,this}withDirs(){return this.options.includeDirs=!0,this}withMaxDepth($){return this.options.maxDepth=$,this}withMaxFiles($){return this.options.maxFiles=$,this}withFullPaths(){return this.options.resolvePaths=!0,this.options.includeBasePath=!0,this}withErrors(){return this.options.suppressErrors=!1,this}withSymlinks({resolvePaths:$=!0}={}){return this.options.resolveSymlinks=!0,this.options.useRealPaths=$,this.withFullPaths()}withAbortSignal($){return this.options.signal=$,this}normalize(){return this.options.normalizePath=!0,this}filter($){return this.options.filters.push($),this}onlyDirs(){return this.options.excludeFiles=!0,this.options.includeDirs=!0,this}exclude($){return this.options.exclude=$,this}onlyCounts(){return this.options.onlyCounts=!0,this}crawl($){return new OI.APIBuilder($||".",this.options)}withGlobFunction($){return this.globFunction=$,this}crawlWithOptions($,J){return this.options={...this.options,...J},new OI.APIBuilder($||".",this.options)}glob(...$){if(this.globFunction)return this.globWithOptions($);return this.globWithOptions($,...[{dot:!0}])}globWithOptions($,...J){let q=this.globFunction||NI;if(!q)throw Error("Please specify a glob function to use glob matching.");var I=this.globCache[$.join("\x00")];if(!I)I=q($,...J),this.globCache[$.join("\x00")]=I;return this.options.filters.push((Q)=>I(Q)),this}}CI.Builder=BI});var jI=A((TI)=>{Object.defineProperty(TI,"__esModule",{value:!0})});var LI=A((y0)=>{var Fz=y0&&y0.__createBinding||(Object.create?function($,J,q,I){if(I===void 0)I=q;var Q=Object.getOwnPropertyDescriptor(J,q);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[q]}};Object.defineProperty($,I,Q)}:function($,J,q,I){if(I===void 0)I=q;$[I]=J[q]}),kz=y0&&y0.__exportStar||function($,J){for(var q in $)if(q!=="default"&&!Object.prototype.hasOwnProperty.call(J,q))Fz(J,$,q)};Object.defineProperty(y0,"__esModule",{value:!0});y0.fdir=void 0;var gz=HI();Object.defineProperty(y0,"fdir",{enumerable:!0,get:function(){return gz.Builder}});kz(jI(),y0)});var AI=A((bC,RI)=>{var{fdir:xz}=LI(),yz=o("path"),wI=s$();class KI{constructor($="./",J=[".env*"],q=[]){this.ignore=["node_modules/**",".git/**"],this.cwd=yz.resolve($),this.envFile=J,this.excludeEnvFile=q}run(){return this._filepaths()}_filepaths(){let $=wI(this._exclude()),J=wI(this._patterns(),{ignore:this._exclude()});return new xz().withRelativePaths().exclude((q,I)=>$(I)).filter((q)=>J(q)).crawl(this.cwd).sync()}_patterns(){if(!Array.isArray(this.envFile))return[`**/${this.envFile}`];return this.envFile.map(($)=>`**/${$}`)}_excludePatterns(){if(!Array.isArray(this.excludeEnvFile))return[`**/${this.excludeEnvFile}`];return this.excludeEnvFile.map(($)=>`**/${$}`)}_exclude(){if(this._excludePatterns().length>0)return this.ignore.concat(this._excludePatterns());else return this.ignore}}RI.exports=KI});var m0=A((FC,fI)=>{var o0=o("fs");function mz($,J=null){if(!J)J="utf8";return o0.readFileSync($,J)}function _z($,J){return o0.writeFileSync($,J,"utf8")}var vz={chmodSync:o0.chmodSync,existsSync:o0.existsSync,readdirSync:o0.readdirSync,readFileSync:o0.readFileSync,writeFileSync:o0.writeFileSync,appendFileSync:o0.appendFileSync,readFileX:mz,writeFileX:_z};fI.exports=vz});var SI=A((kC,uz)=>{uz.exports={name:"dotenv",version:"16.4.7",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var FI=A((gC,_0)=>{var a8=o("fs"),s8=o("path"),dz=o("os"),cz=o("crypto"),hz=SI(),t8=hz.version,lz=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function nz($){let J={},q=$.toString();q=q.replace(/\r\n?/mg,`
`);let I;while((I=lz.exec(q))!=null){let Q=I[1],Y=I[2]||"";Y=Y.trim();let Z=Y[0];if(Y=Y.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),Z==='"')Y=Y.replace(/\\n/g,`
`),Y=Y.replace(/\\r/g,"\r");J[Q]=Y}return J}function iz($){let J=bI($),q=z0.configDotenv({path:J});if(!q.parsed){let Z=Error(`MISSING_DATA: Cannot parse ${J} for an unknown reason`);throw Z.code="MISSING_DATA",Z}let I=PI($).split(","),Q=I.length,Y;for(let Z=0;Z<Q;Z++)try{let G=I[Z].trim(),z=oz(q,G);Y=z0.decrypt(z.ciphertext,z.key);break}catch(G){if(Z+1>=Q)throw G}return z0.parse(Y)}function rz($){console.log(`[dotenv@${t8}][INFO] ${$}`)}function pz($){console.log(`[dotenv@${t8}][WARN] ${$}`)}function t$($){console.log(`[dotenv@${t8}][DEBUG] ${$}`)}function PI($){if($&&$.DOTENV_KEY&&$.DOTENV_KEY.length>0)return $.DOTENV_KEY;if(process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0)return process.env.DOTENV_KEY;return""}function oz($,J){let q;try{q=new URL(J)}catch(G){if(G.code==="ERR_INVALID_URL"){let z=Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw z.code="INVALID_DOTENV_KEY",z}throw G}let I=q.password;if(!I){let G=Error("INVALID_DOTENV_KEY: Missing key part");throw G.code="INVALID_DOTENV_KEY",G}let Q=q.searchParams.get("environment");if(!Q){let G=Error("INVALID_DOTENV_KEY: Missing environment part");throw G.code="INVALID_DOTENV_KEY",G}let Y=`DOTENV_VAULT_${Q.toUpperCase()}`,Z=$.parsed[Y];if(!Z){let G=Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${Y} in your .env.vault file.`);throw G.code="NOT_FOUND_DOTENV_ENVIRONMENT",G}return{ciphertext:Z,key:I}}function bI($){let J=null;if($&&$.path&&$.path.length>0)if(Array.isArray($.path)){for(let q of $.path)if(a8.existsSync(q))J=q.endsWith(".vault")?q:`${q}.vault`}else J=$.path.endsWith(".vault")?$.path:`${$.path}.vault`;else J=s8.resolve(process.cwd(),".env.vault");if(a8.existsSync(J))return J;return null}function EI($){return $[0]==="~"?s8.join(dz.homedir(),$.slice(1)):$}function az($){rz("Loading env from encrypted .env.vault");let J=z0._parseVault($),q=process.env;if($&&$.processEnv!=null)q=$.processEnv;return z0.populate(q,J,$),{parsed:J}}function sz($){let J=s8.resolve(process.cwd(),".env"),q="utf8",I=Boolean($&&$.debug);if($&&$.encoding)q=$.encoding;else if(I)t$("No encoding is specified. UTF-8 is used by default");let Q=[J];if($&&$.path)if(!Array.isArray($.path))Q=[EI($.path)];else{Q=[];for(let z of $.path)Q.push(EI(z))}let Y,Z={};for(let z of Q)try{let M=z0.parse(a8.readFileSync(z,{encoding:q}));z0.populate(Z,M,$)}catch(M){if(I)t$(`Failed to load ${z} ${M.message}`);Y=M}let G=process.env;if($&&$.processEnv!=null)G=$.processEnv;if(z0.populate(G,Z,$),Y)return{parsed:Z,error:Y};else return{parsed:Z}}function tz($){if(PI($).length===0)return z0.configDotenv($);let J=bI($);if(!J)return pz(`You set DOTENV_KEY but you are missing a .env.vault file at ${J}. Did you forget to build it?`),z0.configDotenv($);return z0._configVault($)}function ez($,J){let q=Buffer.from(J.slice(-64),"hex"),I=Buffer.from($,"base64"),Q=I.subarray(0,12),Y=I.subarray(-16);I=I.subarray(12,-16);try{let Z=cz.createDecipheriv("aes-256-gcm",q,Q);return Z.setAuthTag(Y),`${Z.update(I)}${Z.final()}`}catch(Z){let G=Z instanceof RangeError,z=Z.message==="Invalid key length",M=Z.message==="Unsupported state or unable to authenticate data";if(G||z){let X=Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw X.code="INVALID_DOTENV_KEY",X}else if(M){let X=Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw X.code="DECRYPTION_FAILED",X}else throw Z}}function $M($,J,q={}){let I=Boolean(q&&q.debug),Q=Boolean(q&&q.override);if(typeof J!=="object"){let Y=Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw Y.code="OBJECT_REQUIRED",Y}for(let Y of Object.keys(J))if(Object.prototype.hasOwnProperty.call($,Y)){if(Q===!0)$[Y]=J[Y];if(I)if(Q===!0)t$(`"${Y}" is already defined and WAS overwritten`);else t$(`"${Y}" is already defined and was NOT overwritten`)}else $[Y]=J[Y]}var z0={configDotenv:sz,_configVault:az,_parseVault:iz,config:tz,decrypt:ez,parse:nz,populate:$M};gC.configDotenv=z0.configDotenv;gC._configVault=z0._configVault;gC._parseVault=z0._parseVault;gC.config=z0.config;gC.decrypt=z0.decrypt;gC.parse=z0.parse;gC.populate=z0.populate;_0.exports=z0});var gI=A((xC,kI)=>{function XM($){let J;try{J=new URL($)}catch(I){throw Error("INVALID_DOTENV_KEY: Incomplete format. It should be a dotenv uri. (dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development)")}let q=J.password;if(!q)throw Error("INVALID_DOTENV_KEY: Missing key part");return Buffer.from(q.slice(-64),"hex")}kI.exports=XM});var yI=A((yC,xI)=>{var zM=FI(),MM=gI();function WM($,J){let q=MM(J);try{return zM.decrypt($,q)}catch(I){if(I.code==="DECRYPTION_FAILED"){let Q=Error("[DECRYPTION_FAILED] Unable to decrypt .env.vault with DOTENV_KEY.");throw Q.code="DECRYPTION_FAILED",Q.help="[DECRYPTION_FAILED] Run with debug flag [dotenvx run --debug -- yourcommand] or manually run [echo $DOTENV_KEY] to compare it to the one in .env.keys.",Q.debug=`[DECRYPTION_FAILED] DOTENV_KEY is ${J}`,Q}if(I.code==="ERR_CRYPTO_INVALID_AUTH_TAG"){let Q=Error("[INVALID_CIPHERTEXT] Unable to decrypt what appears to be invalid ciphertext.");throw Q.code="INVALID_CIPHERTEXT",Q.help="[INVALID_CIPHERTEXT] Run with debug flag [dotenvx run --debug -- yourcommand] or manually check .env.vault.",Q.debug=`[INVALID_CIPHERTEXT] ciphertext is '${$}'`,Q}throw I}}xI.exports=WM});var $J=A((vI)=>{Object.defineProperty(vI,"__esModule",{value:!0});vI.abool=NM;vI.abytes=_I;vI.aexists=VM;vI.ahash=UM;vI.anumber=e8;vI.aoutput=OM;vI.isBytes=mI;function e8($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function mI($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function _I($,...J){if(!mI($))throw Error("Uint8Array expected");if(J.length>0&&!J.includes($.length))throw Error("Uint8Array expected of length "+J+", got length="+$.length)}function UM($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash should be wrapped by utils.wrapConstructor");e8($.outputLen),e8($.blockLen)}function VM($,J=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(J&&$.finished)throw Error("Hash#digest() has already been called")}function OM($,J){_I($);let q=J.outputLen;if($.length<q)throw Error("digestInto() expects output buffer of length at least "+q)}function NM($){if(typeof $!=="boolean")throw Error(`boolean expected, not ${$}`)}});var P0=A((oI)=>{Object.defineProperty(oI,"__esModule",{value:!0});oI.wrapCipher=oI.Hash=oI.nextTick=oI.isLE=oI.createView=oI.u32=oI.u8=void 0;oI.bytesToHex=dI;oI.hexToBytes=cI;oI.hexToNumber=hI;oI.bytesToNumberBE=fM;oI.numberToBytesBE=SM;oI.utf8ToBytes=lI;oI.bytesToUtf8=PM;oI.toBytes=bM;oI.overlapBytes=nI;oI.complexOverlapBytes=FM;oI.concatBytes=kM;oI.checkOpts=gM;oI.equalBytes=xM;oI.getOutput=mM;oI.setBigUint64=JJ;oI.u64Lengths=_M;oI.isAligned32=rI;oI.copyBytes=pI;oI.clean=vM;/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */var E0=$J(),wM=($)=>new Uint8Array($.buffer,$.byteOffset,$.byteLength);oI.u8=wM;var KM=($)=>new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4));oI.u32=KM;var RM=($)=>new DataView($.buffer,$.byteOffset,$.byteLength);oI.createView=RM;oI.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!oI.isLE)throw Error("Non little-endian hardware is not supported");var AM=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"));function dI($){(0,E0.abytes)($);let J="";for(let q=0;q<$.length;q++)J+=AM[$[q]];return J}var v0={_0:48,_9:57,A:65,F:70,a:97,f:102};function uI($){if($>=v0._0&&$<=v0._9)return $-v0._0;if($>=v0.A&&$<=v0.F)return $-(v0.A-10);if($>=v0.a&&$<=v0.f)return $-(v0.a-10);return}function cI($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);let J=$.length,q=J/2;if(J%2)throw Error("hex string expected, got unpadded hex of length "+J);let I=new Uint8Array(q);for(let Q=0,Y=0;Q<q;Q++,Y+=2){let Z=uI($.charCodeAt(Y)),G=uI($.charCodeAt(Y+1));if(Z===void 0||G===void 0){let z=$[Y]+$[Y+1];throw Error('hex string expected, got non-hex character "'+z+'" at index '+Y)}I[Q]=Z*16+G}return I}function hI($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);return BigInt($===""?"0":"0x"+$)}function fM($){return hI(dI($))}function SM($,J){return cI($.toString(16).padStart(J*2,"0"))}var EM=async()=>{};oI.nextTick=EM;function lI($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function PM($){return new TextDecoder().decode($)}function bM($){if(typeof $==="string")$=lI($);else if((0,E0.isBytes)($))$=pI($);else throw Error("Uint8Array expected, got "+typeof $);return $}function nI($,J){return $.buffer===J.buffer&&$.byteOffset<J.byteOffset+J.byteLength&&J.byteOffset<$.byteOffset+$.byteLength}function FM($,J){if(nI($,J)&&$.byteOffset<J.byteOffset)throw Error("complex overlap of input and output is not supported")}function kM(...$){let J=0;for(let I=0;I<$.length;I++){let Q=$[I];(0,E0.abytes)(Q),J+=Q.length}let q=new Uint8Array(J);for(let I=0,Q=0;I<$.length;I++){let Y=$[I];q.set(Y,Q),Q+=Y.length}return q}function gM($,J){if(J==null||typeof J!=="object")throw Error("options must be defined");return Object.assign($,J)}function xM($,J){if($.length!==J.length)return!1;let q=0;for(let I=0;I<$.length;I++)q|=$[I]^J[I];return q===0}class iI{}oI.Hash=iI;var yM=($,J)=>{function q(I,...Q){if((0,E0.abytes)(I),$.nonceLength!==void 0){let X=Q[0];if(!X)throw Error("nonce / iv required");if($.varSizeNonce)(0,E0.abytes)(X);else(0,E0.abytes)(X,$.nonceLength)}let Y=$.tagLength;if(Y&&Q[1]!==void 0)(0,E0.abytes)(Q[1]);let Z=J(I,...Q),G=(X,V)=>{if(V!==void 0){if(X!==2)throw Error("cipher output not supported");(0,E0.abytes)(V)}},z=!1;return{encrypt(X,V){if(z)throw Error("cannot encrypt() twice with same key + nonce");return z=!0,(0,E0.abytes)(X),G(Z.encrypt.length,V),Z.encrypt(X,V)},decrypt(X,V){if((0,E0.abytes)(X),Y&&X.length<Y)throw Error("invalid ciphertext length: smaller than tagLength="+Y);return G(Z.decrypt.length,V),Z.decrypt(X,V)}}}return Object.assign(q,$),q};oI.wrapCipher=yM;function mM($,J,q=!0){if(J===void 0)return new Uint8Array($);if(J.length!==$)throw Error("invalid output length, expected "+$+", got: "+J.length);if(q&&!rI(J))throw Error("invalid output, must be aligned");return J}function JJ($,J,q,I){if(typeof $.setBigUint64==="function")return $.setBigUint64(J,q,I);let Q=BigInt(32),Y=BigInt(4294967295),Z=Number(q>>Q&Y),G=Number(q&Y),z=I?4:0,M=I?0:4;$.setUint32(J+z,Z,I),$.setUint32(J+M,G,I)}function _M($,J){let q=new Uint8Array(16),I=oI.createView(q);return JJ(I,0,BigInt(J?J.length:0),!0),JJ(I,8,BigInt($.length),!0),q}function rI($){return $.byteOffset%4===0}function pI($){return Uint8Array.from($)}function vM(...$){for(let J=0;J<$.length;J++)$[J].fill(0)}});var e$=A((eI)=>{Object.defineProperty(eI,"__esModule",{value:!0});eI.AEAD_TAG_LENGTH=eI.XCHACHA20_NONCE_LENGTH=eI.CURVE25519_PUBLIC_KEY_SIZE=eI.ETH_PUBLIC_KEY_SIZE=eI.UNCOMPRESSED_PUBLIC_KEY_SIZE=eI.COMPRESSED_PUBLIC_KEY_SIZE=eI.SECRET_KEY_LENGTH=void 0;eI.SECRET_KEY_LENGTH=32;eI.COMPRESSED_PUBLIC_KEY_SIZE=33;eI.UNCOMPRESSED_PUBLIC_KEY_SIZE=65;eI.ETH_PUBLIC_KEY_SIZE=64;eI.CURVE25519_PUBLIC_KEY_SIZE=32;eI.XCHACHA20_NONCE_LENGTH=24;eI.AEAD_TAG_LENGTH=16});var E$=A((JQ)=>{Object.defineProperty(JQ,"__esModule",{value:!0});JQ.ephemeralKeySize=JQ.symmetricNonceLength=JQ.symmetricAlgorithm=JQ.isHkdfKeyCompressed=JQ.isEphemeralKeyCompressed=JQ.ellipticCurve=JQ.ECIES_CONFIG=void 0;var $8=e$(),NW=function(){function $(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16}return $}();JQ.ECIES_CONFIG=new NW;var BW=function(){return JQ.ECIES_CONFIG.ellipticCurve};JQ.ellipticCurve=BW;var CW=function(){return JQ.ECIES_CONFIG.isEphemeralKeyCompressed};JQ.isEphemeralKeyCompressed=CW;var DW=function(){return JQ.ECIES_CONFIG.isHkdfKeyCompressed};JQ.isHkdfKeyCompressed=DW;var HW=function(){return JQ.ECIES_CONFIG.symmetricAlgorithm};JQ.symmetricAlgorithm=HW;var TW=function(){return JQ.ECIES_CONFIG.symmetricNonceLength};JQ.symmetricNonceLength=TW;var jW=function(){var $={secp256k1:JQ.ECIES_CONFIG.isEphemeralKeyCompressed?$8.COMPRESSED_PUBLIC_KEY_SIZE:$8.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:$8.CURVE25519_PUBLIC_KEY_SIZE,ed25519:$8.CURVE25519_PUBLIC_KEY_SIZE};if(JQ.ECIES_CONFIG.ellipticCurve in $)return $[JQ.ECIES_CONFIG.ellipticCurve];else throw Error("Not implemented")};JQ.ephemeralKeySize=jW});var YQ=A((IQ)=>{Object.defineProperty(IQ,"__esModule",{value:!0});IQ.crypto=void 0;var a0=o("node:crypto");IQ.crypto=a0&&typeof a0==="object"&&"webcrypto"in a0?a0.webcrypto:a0&&typeof a0==="object"&&("randomBytes"in a0)?a0:void 0});var YJ=A((GQ)=>{Object.defineProperty(GQ,"__esModule",{value:!0});GQ.gcm=GQ.ctr=GQ.cbc=GQ.utils=void 0;GQ.randomBytes=ZQ;GQ.getWebcryptoSubtle=qJ;GQ.managedNonce=SW;var F0=YQ(),P$=$J(),fW=P0();function ZQ($=32){if(F0.crypto&&typeof F0.crypto.getRandomValues==="function")return F0.crypto.getRandomValues(new Uint8Array($));if(F0.crypto&&typeof F0.crypto.randomBytes==="function")return F0.crypto.randomBytes($);throw Error("crypto.getRandomValues must be defined")}function qJ(){if(F0.crypto&&typeof F0.crypto.subtle==="object"&&F0.crypto.subtle!=null)return F0.crypto.subtle;throw Error("crypto.subtle must be defined")}function SW($){let{nonceLength:J}=$;return(0,P$.anumber)(J),(q,...I)=>({encrypt(Q,...Y){let Z=ZQ(J),G=$(q,Z,...I).encrypt(Q,...Y),z=(0,fW.concatBytes)(Z,G);return G.fill(0),z},decrypt(Q,...Y){let Z=Q.subarray(0,J),G=Q.subarray(J);return $(q,Z,...I).decrypt(G,...Y)}})}GQ.utils={async encrypt($,J,q,I){let Q=qJ(),Y=await Q.importKey("raw",$,J,!0,["encrypt"]),Z=await Q.encrypt(q,Y,I);return new Uint8Array(Z)},async decrypt($,J,q,I){let Q=qJ(),Y=await Q.importKey("raw",$,J,!0,["decrypt"]),Z=await Q.decrypt(q,Y,I);return new Uint8Array(Z)}};var b0={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function EW($,J,q){if($===b0.CBC)return{name:b0.CBC,iv:J};if($===b0.CTR)return{name:b0.CTR,counter:J,length:64};if($===b0.GCM)if(q)return{name:b0.GCM,iv:J,additionalData:q};else return{name:b0.GCM,iv:J};throw Error("unknown aes block mode")}function QJ($){return(J,q,I)=>{(0,P$.abytes)(J),(0,P$.abytes)(q);let Q={name:$,length:J.length*8},Y=EW($,q,I),Z=!1;return{encrypt(G){if((0,P$.abytes)(G),Z)throw Error("Cannot encrypt() twice with same key / nonce");return Z=!0,GQ.utils.encrypt(J,Q,Y,G)},decrypt(G){return(0,P$.abytes)(G),GQ.utils.decrypt(J,Q,Y,G)}}}}GQ.cbc=(()=>QJ(b0.CBC))();GQ.ctr=(()=>QJ(b0.CTR))();GQ.gcm=(()=>QJ(b0.GCM))()});var b$=A((MQ)=>{Object.defineProperty(MQ,"__esModule",{value:!0});MQ.anumber=ZJ;MQ.abytes=zQ;MQ.ahash=yW;MQ.aexists=mW;MQ.aoutput=_W;function ZJ($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function xW($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function zQ($,...J){if(!xW($))throw Error("Uint8Array expected");if(J.length>0&&!J.includes($.length))throw Error("Uint8Array expected of length "+J+", got length="+$.length)}function yW($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash should be wrapped by utils.wrapConstructor");ZJ($.outputLen),ZJ($.blockLen)}function mW($,J=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(J&&$.finished)throw Error("Hash#digest() has already been called")}function _W($,J){zQ($);let q=J.outputLen;if($.length<q)throw Error("digestInto() expects output buffer of length at least "+q)}});var VQ=A((WQ)=>{Object.defineProperty(WQ,"__esModule",{value:!0});WQ.crypto=void 0;var s0=o("node:crypto");WQ.crypto=s0&&typeof s0==="object"&&"webcrypto"in s0?s0.webcrypto:s0&&typeof s0==="object"&&("randomBytes"in s0)?s0:void 0});var c0=A((CQ)=>{/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(CQ,"__esModule",{value:!0});CQ.Hash=CQ.nextTick=CQ.byteSwapIfBE=CQ.isLE=void 0;CQ.isBytes=lW;CQ.u8=nW;CQ.u32=iW;CQ.createView=rW;CQ.rotr=pW;CQ.rotl=oW;CQ.byteSwap=XJ;CQ.byteSwap32=aW;CQ.bytesToHex=tW;CQ.hexToBytes=eW;CQ.asyncLoop=JU;CQ.utf8ToBytes=NQ;CQ.toBytes=J8;CQ.concatBytes=qU;CQ.checkOpts=IU;CQ.wrapConstructor=QU;CQ.wrapConstructorWithOpts=YU;CQ.wrapXOFConstructorWithOpts=ZU;CQ.randomBytes=GU;var H$=VQ(),GJ=b$();function lW($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function nW($){return new Uint8Array($.buffer,$.byteOffset,$.byteLength)}function iW($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function rW($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function pW($,J){return $<<32-J|$>>>J}function oW($,J){return $<<J|$>>>32-J>>>0}CQ.isLE=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function XJ($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}CQ.byteSwapIfBE=CQ.isLE?($)=>$:($)=>XJ($);function aW($){for(let J=0;J<$.length;J++)$[J]=XJ($[J])}var sW=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"));function tW($){(0,GJ.abytes)($);let J="";for(let q=0;q<$.length;q++)J+=sW[$[q]];return J}var d0={_0:48,_9:57,A:65,F:70,a:97,f:102};function OQ($){if($>=d0._0&&$<=d0._9)return $-d0._0;if($>=d0.A&&$<=d0.F)return $-(d0.A-10);if($>=d0.a&&$<=d0.f)return $-(d0.a-10);return}function eW($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);let J=$.length,q=J/2;if(J%2)throw Error("hex string expected, got unpadded hex of length "+J);let I=new Uint8Array(q);for(let Q=0,Y=0;Q<q;Q++,Y+=2){let Z=OQ($.charCodeAt(Y)),G=OQ($.charCodeAt(Y+1));if(Z===void 0||G===void 0){let z=$[Y]+$[Y+1];throw Error('hex string expected, got non-hex character "'+z+'" at index '+Y)}I[Q]=Z*16+G}return I}var $U=async()=>{};CQ.nextTick=$U;async function JU($,J,q){let I=Date.now();for(let Q=0;Q<$;Q++){q(Q);let Y=Date.now()-I;if(Y>=0&&Y<J)continue;await CQ.nextTick(),I+=Y}}function NQ($){if(typeof $!=="string")throw Error("utf8ToBytes expected string, got "+typeof $);return new Uint8Array(new TextEncoder().encode($))}function J8($){if(typeof $==="string")$=NQ($);return(0,GJ.abytes)($),$}function qU(...$){let J=0;for(let I=0;I<$.length;I++){let Q=$[I];(0,GJ.abytes)(Q),J+=Q.length}let q=new Uint8Array(J);for(let I=0,Q=0;I<$.length;I++){let Y=$[I];q.set(Y,Q),Q+=Y.length}return q}class BQ{clone(){return this._cloneInto()}}CQ.Hash=BQ;function IU($,J){if(J!==void 0&&{}.toString.call(J)!=="[object Object]")throw Error("Options should be object or undefined");return Object.assign($,J)}function QU($){let J=(I)=>$().update(J8(I)).digest(),q=$();return J.outputLen=q.outputLen,J.blockLen=q.blockLen,J.create=()=>$(),J}function YU($){let J=(I,Q)=>$(Q).update(J8(I)).digest(),q=$({});return J.outputLen=q.outputLen,J.blockLen=q.blockLen,J.create=(I)=>$(I),J}function ZU($){let J=(I,Q)=>$(Q).update(J8(I)).digest(),q=$({});return J.outputLen=q.outputLen,J.blockLen=q.blockLen,J.create=(I)=>$(I),J}function GU($=32){if(H$.crypto&&typeof H$.crypto.getRandomValues==="function")return H$.crypto.getRandomValues(new Uint8Array($));if(H$.crypto&&typeof H$.crypto.randomBytes==="function")return H$.crypto.randomBytes($);throw Error("crypto.getRandomValues must be defined")}});var MJ=A((wQ)=>{Object.defineProperty(wQ,"__esModule",{value:!0});wQ.HashMD=void 0;wQ.setBigUint64=jQ;wQ.Chi=SU;wQ.Maj=EU;var zJ=b$(),F$=c0();function jQ($,J,q,I){if(typeof $.setBigUint64==="function")return $.setBigUint64(J,q,I);let Q=BigInt(32),Y=BigInt(4294967295),Z=Number(q>>Q&Y),G=Number(q&Y),z=I?4:0,M=I?0:4;$.setUint32(J+z,Z,I),$.setUint32(J+M,G,I)}function SU($,J,q){return $&J^~$&q}function EU($,J,q){return $&J^$&q^J&q}class LQ extends F$.Hash{constructor($,J,q,I){super();this.blockLen=$,this.outputLen=J,this.padOffset=q,this.isLE=I,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array($),this.view=(0,F$.createView)(this.buffer)}update($){(0,zJ.aexists)(this);let{view:J,buffer:q,blockLen:I}=this;$=(0,F$.toBytes)($);let Q=$.length;for(let Y=0;Y<Q;){let Z=Math.min(I-this.pos,Q-Y);if(Z===I){let G=(0,F$.createView)($);for(;I<=Q-Y;Y+=I)this.process(G,Y);continue}if(q.set($.subarray(Y,Y+Z),this.pos),this.pos+=Z,Y+=Z,this.pos===I)this.process(J,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){(0,zJ.aexists)(this),(0,zJ.aoutput)($,this),this.finished=!0;let{buffer:J,view:q,blockLen:I,isLE:Q}=this,{pos:Y}=this;if(J[Y++]=128,this.buffer.subarray(Y).fill(0),this.padOffset>I-Y)this.process(q,0),Y=0;for(let X=Y;X<I;X++)J[X]=0;jQ(q,I-8,BigInt(this.length*8),Q),this.process(q,0);let Z=(0,F$.createView)($),G=this.outputLen;if(G%4)throw Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw Error("_sha2: outputLen bigger than state");for(let X=0;X<z;X++)Z.setUint32(4*X,M[X],Q)}digest(){let{buffer:$,outputLen:J}=this;this.digestInto($);let q=$.slice(0,J);return this.destroy(),q}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:J,buffer:q,length:I,finished:Q,destroyed:Y,pos:Z}=this;if($.length=I,$.pos=Z,$.finished=Q,$.destroyed=Y,I%J)$.buffer.set(q);return $}}wQ.HashMD=LQ});var pQ=A((iQ)=>{Object.defineProperty(iQ,"__esModule",{value:!0});iQ.add5L=iQ.add5H=iQ.add4H=iQ.add4L=iQ.add3H=iQ.add3L=iQ.rotlBL=iQ.rotlBH=iQ.rotlSL=iQ.rotlSH=iQ.rotr32L=iQ.rotr32H=iQ.rotrBL=iQ.rotrBH=iQ.rotrSL=iQ.rotrSH=iQ.shrSL=iQ.shrSH=iQ.toBig=void 0;iQ.fromBig=UJ;iQ.split=RQ;iQ.add=vQ;var q8=BigInt(4294967295),WJ=BigInt(32);function UJ($,J=!1){if(J)return{h:Number($&q8),l:Number($>>WJ&q8)};return{h:Number($>>WJ&q8)|0,l:Number($&q8)|0}}function RQ($,J=!1){let q=new Uint32Array($.length),I=new Uint32Array($.length);for(let Q=0;Q<$.length;Q++){let{h:Y,l:Z}=UJ($[Q],J);[q[Q],I[Q]]=[Y,Z]}return[q,I]}var AQ=($,J)=>BigInt($>>>0)<<WJ|BigInt(J>>>0);iQ.toBig=AQ;var fQ=($,J,q)=>$>>>q;iQ.shrSH=fQ;var SQ=($,J,q)=>$<<32-q|J>>>q;iQ.shrSL=SQ;var EQ=($,J,q)=>$>>>q|J<<32-q;iQ.rotrSH=EQ;var PQ=($,J,q)=>$<<32-q|J>>>q;iQ.rotrSL=PQ;var bQ=($,J,q)=>$<<64-q|J>>>q-32;iQ.rotrBH=bQ;var FQ=($,J,q)=>$>>>q-32|J<<64-q;iQ.rotrBL=FQ;var kQ=($,J)=>J;iQ.rotr32H=kQ;var gQ=($,J)=>$;iQ.rotr32L=gQ;var xQ=($,J,q)=>$<<q|J>>>32-q;iQ.rotlSH=xQ;var yQ=($,J,q)=>J<<q|$>>>32-q;iQ.rotlSL=yQ;var mQ=($,J,q)=>J<<q-32|$>>>64-q;iQ.rotlBH=mQ;var _Q=($,J,q)=>$<<q-32|J>>>64-q;iQ.rotlBL=_Q;function vQ($,J,q,I){let Q=(J>>>0)+(I>>>0);return{h:$+q+(Q/4294967296|0)|0,l:Q|0}}var uQ=($,J,q)=>($>>>0)+(J>>>0)+(q>>>0);iQ.add3L=uQ;var dQ=($,J,q,I)=>J+q+I+($/4294967296|0)|0;iQ.add3H=dQ;var cQ=($,J,q,I)=>($>>>0)+(J>>>0)+(q>>>0)+(I>>>0);iQ.add4L=cQ;var hQ=($,J,q,I,Q)=>J+q+I+Q+($/4294967296|0)|0;iQ.add4H=hQ;var lQ=($,J,q,I,Q)=>($>>>0)+(J>>>0)+(q>>>0)+(I>>>0)+(Q>>>0);iQ.add5L=lQ;var nQ=($,J,q,I,Q,Y)=>J+q+I+Q+Y+($/4294967296|0)|0;iQ.add5H=nQ;var kU={fromBig:UJ,split:RQ,toBig:AQ,shrSH:fQ,shrSL:SQ,rotrSH:EQ,rotrSL:PQ,rotrBH:bQ,rotrBL:FQ,rotr32H:kQ,rotr32L:gQ,rotlSH:xQ,rotlSL:yQ,rotlBH:mQ,rotlBL:_Q,add:vQ,add3L:uQ,add3H:dQ,add4L:cQ,add4H:hQ,add5H:nQ,add5L:lQ};iQ.default=kU});var sQ=A((oQ)=>{Object.defineProperty(oQ,"__esModule",{value:!0});oQ.sha384=oQ.sha512_256=oQ.sha512_224=oQ.sha512=oQ.SHA384=oQ.SHA512_256=oQ.SHA512_224=oQ.SHA512=void 0;var qV=MJ(),p=pQ(),I8=c0(),[IV,QV]=(()=>p.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),t0=new Uint32Array(80),e0=new Uint32Array(80);class T$ extends qV.HashMD{constructor(){super(128,64,16,!1);this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:$,Al:J,Bh:q,Bl:I,Ch:Q,Cl:Y,Dh:Z,Dl:G,Eh:z,El:M,Fh:X,Fl:V,Gh:N,Gl:H,Hh:D,Hl:W}=this;return[$,J,q,I,Q,Y,Z,G,z,M,X,V,N,H,D,W]}set($,J,q,I,Q,Y,Z,G,z,M,X,V,N,H,D,W){this.Ah=$|0,this.Al=J|0,this.Bh=q|0,this.Bl=I|0,this.Ch=Q|0,this.Cl=Y|0,this.Dh=Z|0,this.Dl=G|0,this.Eh=z|0,this.El=M|0,this.Fh=X|0,this.Fl=V|0,this.Gh=N|0,this.Gl=H|0,this.Hh=D|0,this.Hl=W|0}process($,J){for(let B=0;B<16;B++,J+=4)t0[B]=$.getUint32(J),e0[B]=$.getUint32(J+=4);for(let B=16;B<80;B++){let C=t0[B-15]|0,R=e0[B-15]|0,P=p.default.rotrSH(C,R,1)^p.default.rotrSH(C,R,8)^p.default.shrSH(C,R,7),E=p.default.rotrSL(C,R,1)^p.default.rotrSL(C,R,8)^p.default.shrSL(C,R,7),k=t0[B-2]|0,f=e0[B-2]|0,g=p.default.rotrSH(k,f,19)^p.default.rotrBH(k,f,61)^p.default.shrSH(k,f,6),T=p.default.rotrSL(k,f,19)^p.default.rotrBL(k,f,61)^p.default.shrSL(k,f,6),_=p.default.add4L(E,T,e0[B-7],e0[B-16]),i=p.default.add4H(_,P,g,t0[B-7],t0[B-16]);t0[B]=i|0,e0[B]=_|0}let{Ah:q,Al:I,Bh:Q,Bl:Y,Ch:Z,Cl:G,Dh:z,Dl:M,Eh:X,El:V,Fh:N,Fl:H,Gh:D,Gl:W,Hh:j,Hl:w}=this;for(let B=0;B<80;B++){let C=p.default.rotrSH(X,V,14)^p.default.rotrSH(X,V,18)^p.default.rotrBH(X,V,41),R=p.default.rotrSL(X,V,14)^p.default.rotrSL(X,V,18)^p.default.rotrBL(X,V,41),P=X&N^~X&D,E=V&H^~V&W,k=p.default.add5L(w,R,E,QV[B],e0[B]),f=p.default.add5H(k,j,C,P,IV[B],t0[B]),g=k|0,T=p.default.rotrSH(q,I,28)^p.default.rotrBH(q,I,34)^p.default.rotrBH(q,I,39),_=p.default.rotrSL(q,I,28)^p.default.rotrBL(q,I,34)^p.default.rotrBL(q,I,39),i=q&Q^q&Z^Q&Z,n=I&Y^I&G^Y&G;j=D|0,w=W|0,D=N|0,W=H|0,N=X|0,H=V|0,{h:X,l:V}=p.default.add(z|0,M|0,f|0,g|0),z=Z|0,M=G|0,Z=Q|0,G=Y|0,Q=q|0,Y=I|0;let U=p.default.add3L(g,_,n);q=p.default.add3H(U,f,T,i),I=U|0}({h:q,l:I}=p.default.add(this.Ah|0,this.Al|0,q|0,I|0)),{h:Q,l:Y}=p.default.add(this.Bh|0,this.Bl|0,Q|0,Y|0),{h:Z,l:G}=p.default.add(this.Ch|0,this.Cl|0,Z|0,G|0),{h:z,l:M}=p.default.add(this.Dh|0,this.Dl|0,z|0,M|0),{h:X,l:V}=p.default.add(this.Eh|0,this.El|0,X|0,V|0),{h:N,l:H}=p.default.add(this.Fh|0,this.Fl|0,N|0,H|0),{h:D,l:W}=p.default.add(this.Gh|0,this.Gl|0,D|0,W|0),{h:j,l:w}=p.default.add(this.Hh|0,this.Hl|0,j|0,w|0),this.set(q,I,Q,Y,Z,G,z,M,X,V,N,H,D,W,j,w)}roundClean(){t0.fill(0),e0.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}oQ.SHA512=T$;class VJ extends T${constructor(){super();this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}oQ.SHA512_224=VJ;class OJ extends T${constructor(){super();this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}oQ.SHA512_256=OJ;class NJ extends T${constructor(){super();this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}oQ.SHA384=NJ;oQ.sha512=(0,I8.wrapConstructor)(()=>new T$);oQ.sha512_224=(0,I8.wrapConstructor)(()=>new VJ);oQ.sha512_256=(0,I8.wrapConstructor)(()=>new OJ);oQ.sha384=(0,I8.wrapConstructor)(()=>new NJ)});var w0=A((QY)=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(QY,"__esModule",{value:!0});QY.notImplemented=QY.bitMask=void 0;QY.isBytes=Z8;QY.abytes=G8;QY.abool=VV;QY.bytesToHex=DJ;QY.numberToHexUnpadded=$Y;QY.hexToNumber=HJ;QY.hexToBytes=X8;QY.bytesToNumberBE=NV;QY.bytesToNumberLE=BV;QY.numberToBytesBE=JY;QY.numberToBytesLE=CV;QY.numberToVarBytesBE=DV;QY.ensureBytes=HV;QY.concatBytes=qY;QY.equalBytes=TV;QY.utf8ToBytes=jV;QY.inRange=IY;QY.aInRange=LV;QY.bitLen=wV;QY.bitGet=KV;QY.bitSet=RV;QY.createHmacDrbg=fV;QY.validateObject=EV;QY.memoized=bV;var Q8=BigInt(0),Y8=BigInt(1),UV=BigInt(2);function Z8($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function G8($){if(!Z8($))throw Error("Uint8Array expected")}function VV($,J){if(typeof J!=="boolean")throw Error($+" boolean expected, got "+J)}var OV=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"));function DJ($){G8($);let J="";for(let q=0;q<$.length;q++)J+=OV[$[q]];return J}function $Y($){let J=$.toString(16);return J.length&1?"0"+J:J}function HJ($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);return $===""?Q8:BigInt("0x"+$)}var h0={_0:48,_9:57,A:65,F:70,a:97,f:102};function tQ($){if($>=h0._0&&$<=h0._9)return $-h0._0;if($>=h0.A&&$<=h0.F)return $-(h0.A-10);if($>=h0.a&&$<=h0.f)return $-(h0.a-10);return}function X8($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);let J=$.length,q=J/2;if(J%2)throw Error("hex string expected, got unpadded hex of length "+J);let I=new Uint8Array(q);for(let Q=0,Y=0;Q<q;Q++,Y+=2){let Z=tQ($.charCodeAt(Y)),G=tQ($.charCodeAt(Y+1));if(Z===void 0||G===void 0){let z=$[Y]+$[Y+1];throw Error('hex string expected, got non-hex character "'+z+'" at index '+Y)}I[Q]=Z*16+G}return I}function NV($){return HJ(DJ($))}function BV($){return G8($),HJ(DJ(Uint8Array.from($).reverse()))}function JY($,J){return X8($.toString(16).padStart(J*2,"0"))}function CV($,J){return JY($,J).reverse()}function DV($){return X8($Y($))}function HV($,J,q){let I;if(typeof J==="string")try{I=X8(J)}catch(Y){throw Error($+" must be hex string or Uint8Array, cause: "+Y)}else if(Z8(J))I=Uint8Array.from(J);else throw Error($+" must be hex string or Uint8Array");let Q=I.length;if(typeof q==="number"&&Q!==q)throw Error($+" of length "+q+" expected, got "+Q);return I}function qY(...$){let J=0;for(let I=0;I<$.length;I++){let Q=$[I];G8(Q),J+=Q.length}let q=new Uint8Array(J);for(let I=0,Q=0;I<$.length;I++){let Y=$[I];q.set(Y,Q),Q+=Y.length}return q}function TV($,J){if($.length!==J.length)return!1;let q=0;for(let I=0;I<$.length;I++)q|=$[I]^J[I];return q===0}function jV($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}var BJ=($)=>typeof $==="bigint"&&Q8<=$;function IY($,J,q){return BJ($)&&BJ(J)&&BJ(q)&&J<=$&&$<q}function LV($,J,q,I){if(!IY(J,q,I))throw Error("expected valid "+$+": "+q+" <= n < "+I+", got "+J)}function wV($){let J;for(J=0;$>Q8;$>>=Y8,J+=1);return J}function KV($,J){return $>>BigInt(J)&Y8}function RV($,J,q){return $|(q?Y8:Q8)<<BigInt(J)}var AV=($)=>(UV<<BigInt($-1))-Y8;QY.bitMask=AV;var CJ=($)=>new Uint8Array($),eQ=($)=>Uint8Array.from($);function fV($,J,q){if(typeof $!=="number"||$<2)throw Error("hashLen must be a number");if(typeof J!=="number"||J<2)throw Error("qByteLen must be a number");if(typeof q!=="function")throw Error("hmacFn must be a function");let I=CJ($),Q=CJ($),Y=0,Z=()=>{I.fill(1),Q.fill(0),Y=0},G=(...V)=>q(Q,I,...V),z=(V=CJ())=>{if(Q=G(eQ([0]),V),I=G(),V.length===0)return;Q=G(eQ([1]),V),I=G()},M=()=>{if(Y++>=1000)throw Error("drbg: tried 1000 values");let V=0,N=[];while(V<J){I=G();let H=I.slice();N.push(H),V+=I.length}return qY(...N)};return(V,N)=>{Z(),z(V);let H=void 0;while(!(H=N(M())))z();return Z(),H}}var SV={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||Z8($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,J)=>J.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)};function EV($,J,q={}){let I=(Q,Y,Z)=>{let G=SV[Y];if(typeof G!=="function")throw Error("invalid validator function");let z=$[Q];if(Z&&z===void 0)return;if(!G(z,$))throw Error("param "+String(Q)+" is invalid. Expected "+Y+", got "+z)};for(let[Q,Y]of Object.entries(J))I(Q,Y,!1);for(let[Q,Y]of Object.entries(q))I(Q,Y,!0);return $}var PV=()=>{throw Error("not implemented")};QY.notImplemented=PV;function bV($){let J=new WeakMap;return(q,...I)=>{let Q=J.get(q);if(Q!==void 0)return Q;let Y=$(q,...I);return J.set(q,Y),Y}}});var J$=A((NY)=>{Object.defineProperty(NY,"__esModule",{value:!0});NY.isNegativeLE=void 0;NY.mod=H0;NY.pow=XY;NY.pow2=Z1;NY.invert=z8;NY.tonelliShanks=zY;NY.FpSqrt=MY;NY.validateField=z1;NY.FpPow=WY;NY.FpInvertBatch=UY;NY.FpDiv=M1;NY.FpLegendre=VY;NY.FpIsSquare=W1;NY.nLength=jJ;NY.Field=U1;NY.FpSqrtOdd=V1;NY.FpSqrtEven=O1;NY.hashToPrivateScalar=N1;NY.getFieldBytesLength=LJ;NY.getMinHashLength=OY;NY.mapHashToField=B1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var T0=w0(),M0=BigInt(0),I0=BigInt(1),$$=BigInt(2),I1=BigInt(3),TJ=BigInt(4),ZY=BigInt(5),GY=BigInt(8),Q1=BigInt(9),Y1=BigInt(16);function H0($,J){let q=$%J;return q>=M0?q:J+q}function XY($,J,q){if(J<M0)throw Error("invalid exponent, negatives unsupported");if(q<=M0)throw Error("invalid modulus");if(q===I0)return M0;let I=I0;while(J>M0){if(J&I0)I=I*$%q;$=$*$%q,J>>=I0}return I}function Z1($,J,q){let I=$;while(J-- >M0)I*=I,I%=q;return I}function z8($,J){if($===M0)throw Error("invert: expected non-zero number");if(J<=M0)throw Error("invert: expected positive modulus, got "+J);let q=H0($,J),I=J,Q=M0,Y=I0,Z=I0,G=M0;while(q!==M0){let M=I/q,X=I%q,V=Q-Z*M,N=Y-G*M;I=q,q=X,Q=Z,Y=G,Z=V,G=N}if(I!==I0)throw Error("invert: does not exist");return H0(Q,J)}function zY($){let J=($-I0)/$$,q,I,Q;for(q=$-I0,I=0;q%$$===M0;q/=$$,I++);for(Q=$$;Q<$&&XY(Q,J,$)!==$-I0;Q++)if(Q>1000)throw Error("Cannot find square root: likely non-prime P");if(I===1){let Z=($+I0)/TJ;return function(z,M){let X=z.pow(M,Z);if(!z.eql(z.sqr(X),M))throw Error("Cannot find square root");return X}}let Y=(q+I0)/$$;return function(G,z){if(G.pow(z,J)===G.neg(G.ONE))throw Error("Cannot find square root");let M=I,X=G.pow(G.mul(G.ONE,Q),q),V=G.pow(z,Y),N=G.pow(z,q);while(!G.eql(N,G.ONE)){if(G.eql(N,G.ZERO))return G.ZERO;let H=1;for(let W=G.sqr(N);H<M;H++){if(G.eql(W,G.ONE))break;W=G.sqr(W)}let D=G.pow(X,I0<<BigInt(M-H-1));X=G.sqr(D),V=G.mul(V,D),N=G.mul(N,X),M=H}return V}}function MY($){if($%TJ===I1){let J=($+I0)/TJ;return function(I,Q){let Y=I.pow(Q,J);if(!I.eql(I.sqr(Y),Q))throw Error("Cannot find square root");return Y}}if($%GY===ZY){let J=($-ZY)/GY;return function(I,Q){let Y=I.mul(Q,$$),Z=I.pow(Y,J),G=I.mul(Q,Z),z=I.mul(I.mul(G,$$),Z),M=I.mul(G,I.sub(z,I.ONE));if(!I.eql(I.sqr(M),Q))throw Error("Cannot find square root");return M}}if($%Y1===Q1);return zY($)}var G1=($,J)=>(H0($,J)&I0)===I0;NY.isNegativeLE=G1;var X1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function z1($){let J={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},q=X1.reduce((I,Q)=>{return I[Q]="function",I},J);return(0,T0.validateObject)($,q)}function WY($,J,q){if(q<M0)throw Error("invalid exponent, negatives unsupported");if(q===M0)return $.ONE;if(q===I0)return J;let I=$.ONE,Q=J;while(q>M0){if(q&I0)I=$.mul(I,Q);Q=$.sqr(Q),q>>=I0}return I}function UY($,J){let q=Array(J.length),I=J.reduce((Y,Z,G)=>{if($.is0(Z))return Y;return q[G]=Y,$.mul(Y,Z)},$.ONE),Q=$.inv(I);return J.reduceRight((Y,Z,G)=>{if($.is0(Z))return Y;return q[G]=$.mul(Y,q[G]),$.mul(Y,Z)},Q),q}function M1($,J,q){return $.mul(J,typeof q==="bigint"?z8(q,$.ORDER):$.inv(q))}function VY($){let J=($-I0)/$$;return(q,I)=>q.pow(I,J)}function W1($){let J=VY($.ORDER);return(q)=>{let I=J($,q);return $.eql(I,$.ZERO)||$.eql(I,$.ONE)}}function jJ($,J){let q=J!==void 0?J:$.toString(2).length,I=Math.ceil(q/8);return{nBitLength:q,nByteLength:I}}function U1($,J,q=!1,I={}){if($<=M0)throw Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Q,nByteLength:Y}=jJ($,J);if(Y>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let Z,G=Object.freeze({ORDER:$,isLE:q,BITS:Q,BYTES:Y,MASK:(0,T0.bitMask)(Q),ZERO:M0,ONE:I0,create:(z)=>H0(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw Error("invalid field element: expected bigint, got "+typeof z);return M0<=z&&z<$},is0:(z)=>z===M0,isOdd:(z)=>(z&I0)===I0,neg:(z)=>H0(-z,$),eql:(z,M)=>z===M,sqr:(z)=>H0(z*z,$),add:(z,M)=>H0(z+M,$),sub:(z,M)=>H0(z-M,$),mul:(z,M)=>H0(z*M,$),pow:(z,M)=>WY(G,z,M),div:(z,M)=>H0(z*z8(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>z8(z,$),sqrt:I.sqrt||((z)=>{if(!Z)Z=MY($);return Z(G,z)}),invertBatch:(z)=>UY(G,z),cmov:(z,M,X)=>X?M:z,toBytes:(z)=>q?(0,T0.numberToBytesLE)(z,Y):(0,T0.numberToBytesBE)(z,Y),fromBytes:(z)=>{if(z.length!==Y)throw Error("Field.fromBytes: expected "+Y+" bytes, got "+z.length);return q?(0,T0.bytesToNumberLE)(z):(0,T0.bytesToNumberBE)(z)}});return Object.freeze(G)}function V1($,J){if(!$.isOdd)throw Error("Field doesn't have isOdd");let q=$.sqrt(J);return $.isOdd(q)?q:$.neg(q)}function O1($,J){if(!$.isOdd)throw Error("Field doesn't have isOdd");let q=$.sqrt(J);return $.isOdd(q)?$.neg(q):q}function N1($,J,q=!1){$=(0,T0.ensureBytes)("privateHash",$);let I=$.length,Q=jJ(J).nByteLength+8;if(Q<24||I<Q||I>1024)throw Error("hashToPrivateScalar: expected "+Q+"-1024 bytes of input, got "+I);let Y=q?(0,T0.bytesToNumberLE)($):(0,T0.bytesToNumberBE)($);return H0(Y,J-I0)+I0}function LJ($){if(typeof $!=="bigint")throw Error("field order must be bigint");let J=$.toString(2).length;return Math.ceil(J/8)}function OY($){let J=LJ($);return J+Math.ceil(J/2)}function B1($,J,q=!1){let I=$.length,Q=LJ(J),Y=OY(J);if(I<16||I<Y||I>1024)throw Error("expected "+Y+"-1024 bytes of input, got "+I);let Z=q?(0,T0.bytesToNumberLE)($):(0,T0.bytesToNumberBE)($),G=H0(Z,J-I0)+I0;return q?(0,T0.numberToBytesLE)(G,Q):(0,T0.numberToBytesBE)(G,Q)}});var W8=A((wY)=>{Object.defineProperty(wY,"__esModule",{value:!0});wY.wNAF=m1;wY.pippenger=_1;wY.precomputeMSMUnsafe=v1;wY.validateBasic=u1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var CY=J$(),HY=w0(),DY=BigInt(0),M8=BigInt(1);function wJ($,J){let q=J.negate();return $?q:J}function fJ($,J){if(!Number.isSafeInteger($)||$<=0||$>J)throw Error("invalid window size, expected [1.."+J+"], got W="+$)}function KJ($,J){fJ($,J);let q=Math.ceil(J/$)+1,I=2**($-1);return{windows:q,windowSize:I}}function TY($,J){if(!Array.isArray($))throw Error("array expected");$.forEach((q,I)=>{if(!(q instanceof J))throw Error("invalid point at index "+I)})}function jY($,J){if(!Array.isArray($))throw Error("array of scalars expected");$.forEach((q,I)=>{if(!J.isValid(q))throw Error("invalid scalar at index "+I)})}var RJ=new WeakMap,LY=new WeakMap;function AJ($){return LY.get($)||1}function m1($,J){return{constTimeNegate:wJ,hasPrecomputes(q){return AJ(q)!==1},unsafeLadder(q,I,Q=$.ZERO){let Y=q;while(I>DY){if(I&M8)Q=Q.add(Y);Y=Y.double(),I>>=M8}return Q},precomputeWindow(q,I){let{windows:Q,windowSize:Y}=KJ(I,J),Z=[],G=q,z=G;for(let M=0;M<Q;M++){z=G,Z.push(z);for(let X=1;X<Y;X++)z=z.add(G),Z.push(z);G=z.double()}return Z},wNAF(q,I,Q){let{windows:Y,windowSize:Z}=KJ(q,J),G=$.ZERO,z=$.BASE,M=BigInt(2**q-1),X=2**q,V=BigInt(q);for(let N=0;N<Y;N++){let H=N*Z,D=Number(Q&M);if(Q>>=V,D>Z)D-=X,Q+=M8;let W=H,j=H+Math.abs(D)-1,w=N%2!==0,B=D<0;if(D===0)z=z.add(wJ(w,I[W]));else G=G.add(wJ(B,I[j]))}return{p:G,f:z}},wNAFUnsafe(q,I,Q,Y=$.ZERO){let{windows:Z,windowSize:G}=KJ(q,J),z=BigInt(2**q-1),M=2**q,X=BigInt(q);for(let V=0;V<Z;V++){let N=V*G;if(Q===DY)break;let H=Number(Q&z);if(Q>>=X,H>G)H-=M,Q+=M8;if(H===0)continue;let D=I[N+Math.abs(H)-1];if(H<0)D=D.negate();Y=Y.add(D)}return Y},getPrecomputes(q,I,Q){let Y=RJ.get(I);if(!Y){if(Y=this.precomputeWindow(I,q),q!==1)RJ.set(I,Q(Y))}return Y},wNAFCached(q,I,Q){let Y=AJ(q);return this.wNAF(Y,this.getPrecomputes(Y,q,Q),I)},wNAFCachedUnsafe(q,I,Q,Y){let Z=AJ(q);if(Z===1)return this.unsafeLadder(q,I,Y);return this.wNAFUnsafe(Z,this.getPrecomputes(Z,q,Q),I,Y)},setWindowSize(q,I){fJ(I,J),LY.set(q,I),RJ.delete(q)}}}function _1($,J,q,I){if(TY(q,$),jY(I,J),q.length!==I.length)throw Error("arrays of points and scalars must have equal length");let Q=$.ZERO,Y=(0,HY.bitLen)(BigInt(q.length)),Z=Y>12?Y-3:Y>4?Y-2:Y?2:1,G=(1<<Z)-1,z=Array(G+1).fill(Q),M=Math.floor((J.BITS-1)/Z)*Z,X=Q;for(let V=M;V>=0;V-=Z){z.fill(Q);for(let H=0;H<I.length;H++){let D=I[H],W=Number(D>>BigInt(V)&BigInt(G));z[W]=z[W].add(q[H])}let N=Q;for(let H=z.length-1,D=Q;H>0;H--)D=D.add(z[H]),N=N.add(D);if(X=X.add(N),V!==0)for(let H=0;H<Z;H++)X=X.double()}return X}function v1($,J,q,I){fJ(I,J.BITS),TY(q,$);let Q=$.ZERO,Y=2**I-1,Z=Math.ceil(J.BITS/I),G=BigInt((1<<I)-1),z=q.map((M)=>{let X=[];for(let V=0,N=M;V<Y;V++)X.push(N),N=N.add(M);return X});return(M)=>{if(jY(M,J),M.length>q.length)throw Error("array of scalars must be smaller than array of points");let X=Q;for(let V=0;V<Z;V++){if(X!==Q)for(let H=0;H<I;H++)X=X.double();let N=BigInt(Z*I-(V+1)*I);for(let H=0;H<M.length;H++){let D=M[H],W=Number(D>>N&G);if(!W)continue;X=X.add(z[H][W-1])}}return X}}function u1($){return(0,CY.validateField)($.Fp),(0,HY.validateObject)($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,CY.nLength)($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}});var AY=A((RY)=>{Object.defineProperty(RY,"__esModule",{value:!0});RY.twistedEdwards=p1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var SJ=W8(),KY=J$(),C0=w0(),N0=w0(),K0=BigInt(0),B0=BigInt(1),U8=BigInt(2),n1=BigInt(8),i1={zip215:!0};function r1($){let J=(0,SJ.validateBasic)($);return C0.validateObject($,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...J})}function p1($){let J=r1($),{Fp:q,n:I,prehash:Q,hash:Y,randomBytes:Z,nByteLength:G,h:z}=J,M=U8<<BigInt(G*8)-B0,X=q.create,V=(0,KY.Field)(J.n,J.nBitLength),N=J.uvRatio||((L,K)=>{try{return{isValid:!0,value:q.sqrt(L*q.inv(K))}}catch(S){return{isValid:!1,value:K0}}}),H=J.adjustScalarBytes||((L)=>L),D=J.domain||((L,K,S)=>{if((0,N0.abool)("phflag",S),K.length||S)throw Error("Contexts/pre-hash are not supported");return L});function W(L,K){C0.aInRange("coordinate "+L,K,K0,M)}function j(L){if(!(L instanceof C))throw Error("ExtendedPoint expected")}let w=(0,N0.memoized)((L,K)=>{let{ex:S,ey:m,ez:u}=L,v=L.is0();if(K==null)K=v?n1:q.inv(u);let r=X(S*K),l=X(m*K),c=X(u*K);if(v)return{x:K0,y:B0};if(c!==B0)throw Error("invZ was invalid");return{x:r,y:l}}),B=(0,N0.memoized)((L)=>{let{a:K,d:S}=J;if(L.is0())throw Error("bad point: ZERO");let{ex:m,ey:u,ez:v,et:r}=L,l=X(m*m),c=X(u*u),y=X(v*v),q0=X(y*y),U0=X(l*K),F=X(y*X(U0+c)),h=X(q0+X(S*X(l*c)));if(F!==h)throw Error("bad point: equation left != right (1)");let b=X(m*u),d=X(v*r);if(b!==d)throw Error("bad point: equation left != right (2)");return!0});class C{constructor(L,K,S,m){this.ex=L,this.ey=K,this.ez=S,this.et=m,W("x",L),W("y",K),W("z",S),W("t",m),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(L){if(L instanceof C)throw Error("extended point not allowed");let{x:K,y:S}=L||{};return W("x",K),W("y",S),new C(K,S,B0,X(K*S))}static normalizeZ(L){let K=q.invertBatch(L.map((S)=>S.ez));return L.map((S,m)=>S.toAffine(K[m])).map(C.fromAffine)}static msm(L,K){return(0,SJ.pippenger)(C,V,L,K)}_setWindowSize(L){E.setWindowSize(this,L)}assertValidity(){B(this)}equals(L){j(L);let{ex:K,ey:S,ez:m}=this,{ex:u,ey:v,ez:r}=L,l=X(K*r),c=X(u*m),y=X(S*r),q0=X(v*m);return l===c&&y===q0}is0(){return this.equals(C.ZERO)}negate(){return new C(X(-this.ex),this.ey,this.ez,X(-this.et))}double(){let{a:L}=J,{ex:K,ey:S,ez:m}=this,u=X(K*K),v=X(S*S),r=X(U8*X(m*m)),l=X(L*u),c=K+S,y=X(X(c*c)-u-v),q0=l+v,U0=q0-r,F=l-v,h=X(y*U0),b=X(q0*F),d=X(y*F),a=X(U0*q0);return new C(h,b,a,d)}add(L){j(L);let{a:K,d:S}=J,{ex:m,ey:u,ez:v,et:r}=this,{ex:l,ey:c,ez:y,et:q0}=L;if(K===BigInt(-1)){let Eq=X((u-m)*(c+l)),Pq=X((u+m)*(c-l)),x8=X(Pq-Eq);if(x8===K0)return this.double();let bq=X(v*U8*q0),Fq=X(r*U8*y),kq=Fq+bq,gq=Pq+Eq,xq=Fq-bq,B5=X(kq*x8),C5=X(gq*xq),D5=X(kq*xq),H5=X(x8*gq);return new C(B5,C5,H5,D5)}let U0=X(m*l),F=X(u*c),h=X(r*S*q0),b=X(v*y),d=X((m+u)*(l+c)-U0-F),a=b-h,Y0=b+h,$0=X(F-K*U0),i0=X(d*a),O$=X(Y0*$0),O5=X(d*$0),N5=X(a*Y0);return new C(i0,O$,N5,O5)}subtract(L){return this.add(L.negate())}wNAF(L){return E.wNAFCached(this,L,C.normalizeZ)}multiply(L){let K=L;C0.aInRange("scalar",K,B0,I);let{p:S,f:m}=this.wNAF(K);return C.normalizeZ([S,m])[0]}multiplyUnsafe(L,K=C.ZERO){let S=L;if(C0.aInRange("scalar",S,K0,I),S===K0)return P;if(this.is0()||S===B0)return this;return E.wNAFCachedUnsafe(this,S,C.normalizeZ,K)}isSmallOrder(){return this.multiplyUnsafe(z).is0()}isTorsionFree(){return E.unsafeLadder(this,I).is0()}toAffine(L){return w(this,L)}clearCofactor(){let{h:L}=J;if(L===B0)return this;return this.multiplyUnsafe(L)}static fromHex(L,K=!1){let{d:S,a:m}=J,u=q.BYTES;L=(0,N0.ensureBytes)("pointHex",L,u),(0,N0.abool)("zip215",K);let v=L.slice(),r=L[u-1];v[u-1]=r&-129;let l=C0.bytesToNumberLE(v),c=K?M:q.ORDER;C0.aInRange("pointHex.y",l,K0,c);let y=X(l*l),q0=X(y-B0),U0=X(S*y-m),{isValid:F,value:h}=N(q0,U0);if(!F)throw Error("Point.fromHex: invalid y coordinate");let b=(h&B0)===B0,d=(r&128)!==0;if(!K&&h===K0&&d)throw Error("Point.fromHex: x=0 and x_0=1");if(d!==b)h=X(-h);return C.fromAffine({x:h,y:l})}static fromPrivateKey(L){return g(L).point}toRawBytes(){let{x:L,y:K}=this.toAffine(),S=C0.numberToBytesLE(K,q.BYTES);return S[S.length-1]|=L&B0?128:0,S}toHex(){return C0.bytesToHex(this.toRawBytes())}}C.BASE=new C(J.Gx,J.Gy,B0,X(J.Gx*J.Gy)),C.ZERO=new C(K0,B0,B0,K0);let{BASE:R,ZERO:P}=C,E=(0,SJ.wNAF)(C,G*8);function k(L){return(0,KY.mod)(L,I)}function f(L){return k(C0.bytesToNumberLE(L))}function g(L){let K=q.BYTES;L=(0,N0.ensureBytes)("private key",L,K);let S=(0,N0.ensureBytes)("hashed private key",Y(L),2*K),m=H(S.slice(0,K)),u=S.slice(K,2*K),v=f(m),r=R.multiply(v),l=r.toRawBytes();return{head:m,prefix:u,scalar:v,point:r,pointBytes:l}}function T(L){return g(L).pointBytes}function _(L=new Uint8Array,...K){let S=C0.concatBytes(...K);return f(Y(D(S,(0,N0.ensureBytes)("context",L),!!Q)))}function i(L,K,S={}){if(L=(0,N0.ensureBytes)("message",L),Q)L=Q(L);let{prefix:m,scalar:u,pointBytes:v}=g(K),r=_(S.context,m,L),l=R.multiply(r).toRawBytes(),c=_(S.context,l,v,L),y=k(r+c*u);C0.aInRange("signature.s",y,K0,I);let q0=C0.concatBytes(l,C0.numberToBytesLE(y,q.BYTES));return(0,N0.ensureBytes)("result",q0,q.BYTES*2)}let n=i1;function U(L,K,S,m=n){let{context:u,zip215:v}=m,r=q.BYTES;if(L=(0,N0.ensureBytes)("signature",L,2*r),K=(0,N0.ensureBytes)("message",K),S=(0,N0.ensureBytes)("publicKey",S,r),v!==void 0)(0,N0.abool)("zip215",v);if(Q)K=Q(K);let l=C0.bytesToNumberLE(L.slice(r,2*r)),c,y,q0;try{c=C.fromHex(S,v),y=C.fromHex(L.slice(0,r),v),q0=R.multiplyUnsafe(l)}catch(h){return!1}if(!v&&c.isSmallOrder())return!1;let U0=_(u,y.toRawBytes(),c.toRawBytes(),K);return y.add(c.multiplyUnsafe(U0)).subtract(q0).clearCofactor().equals(C.ZERO)}return R._setWindowSize(8),{CURVE:J,getPublicKey:T,sign:i,verify:U,ExtendedPoint:C,utils:{getExtendedPublicKey:g,randomPrivateKey:()=>Z(q.BYTES),precompute(L=8,K=C.BASE){return K._setWindowSize(L),K.multiply(BigInt(3)),K}}}}});var PJ=A((EY)=>{Object.defineProperty(EY,"__esModule",{value:!0});EY.expand_message_xmd=fY;EY.expand_message_xof=SY;EY.hash_to_field=EJ;EY.isogenyMap=e1;EY.createHasher=$6;var a1=J$(),O0=w0(),s1=O0.bytesToNumberBE;function q$($,J){if(k$($),k$(J),$<0||$>=1<<8*J)throw Error("invalid I2OSP input: "+$);let q=Array.from({length:J}).fill(0);for(let I=J-1;I>=0;I--)q[I]=$&255,$>>>=8;return new Uint8Array(q)}function t1($,J){let q=new Uint8Array($.length);for(let I=0;I<$.length;I++)q[I]=$[I]^J[I];return q}function k$($){if(!Number.isSafeInteger($))throw Error("number expected")}function fY($,J,q,I){if((0,O0.abytes)($),(0,O0.abytes)(J),k$(q),J.length>255)J=I((0,O0.concatBytes)((0,O0.utf8ToBytes)("H2C-OVERSIZE-DST-"),J));let{outputLen:Q,blockLen:Y}=I,Z=Math.ceil(q/Q);if(q>65535||Z>255)throw Error("expand_message_xmd: invalid lenInBytes");let G=(0,O0.concatBytes)(J,q$(J.length,1)),z=q$(0,Y),M=q$(q,2),X=Array(Z),V=I((0,O0.concatBytes)(z,$,M,q$(0,1),G));X[0]=I((0,O0.concatBytes)(V,q$(1,1),G));for(let H=1;H<=Z;H++){let D=[t1(V,X[H-1]),q$(H+1,1),G];X[H]=I((0,O0.concatBytes)(...D))}return(0,O0.concatBytes)(...X).slice(0,q)}function SY($,J,q,I,Q){if((0,O0.abytes)($),(0,O0.abytes)(J),k$(q),J.length>255){let Y=Math.ceil(2*I/8);J=Q.create({dkLen:Y}).update((0,O0.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(J).digest()}if(q>65535||J.length>255)throw Error("expand_message_xof: invalid lenInBytes");return Q.create({dkLen:q}).update($).update(q$(q,2)).update(J).update(q$(J.length,1)).digest()}function EJ($,J,q){(0,O0.validateObject)(q,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:I,k:Q,m:Y,hash:Z,expand:G,DST:z}=q;(0,O0.abytes)($),k$(J);let M=typeof z==="string"?(0,O0.utf8ToBytes)(z):z,X=I.toString(2).length,V=Math.ceil((X+Q)/8),N=J*Y*V,H;if(G==="xmd")H=fY($,M,N,Z);else if(G==="xof")H=SY($,M,N,Q,Z);else if(G==="_internal_pass")H=$;else throw Error('expand must be "xmd" or "xof"');let D=Array(J);for(let W=0;W<J;W++){let j=Array(Y);for(let w=0;w<Y;w++){let B=V*(w+W*Y),C=H.subarray(B,B+V);j[w]=(0,a1.mod)(s1(C),I)}D[W]=j}return D}function e1($,J){let q=J.map((I)=>Array.from(I).reverse());return(I,Q)=>{let[Y,Z,G,z]=q.map((M)=>M.reduce((X,V)=>$.add($.mul(X,I),V)));return I=$.div(Y,Z),Q=$.mul(Q,$.div(G,z)),{x:I,y:Q}}}function $6($,J,q){if(typeof J!=="function")throw Error("mapToCurve() must be defined");return{hashToCurve(I,Q){let Y=EJ(I,2,{...q,DST:q.DST,...Q}),Z=$.fromAffine(J(Y[0])),G=$.fromAffine(J(Y[1])),z=Z.add(G).clearCofactor();return z.assertValidity(),z},encodeToCurve(I,Q){let Y=EJ(I,1,{...q,DST:q.encodeDST,...Q}),Z=$.fromAffine(J(Y[0])).clearCofactor();return Z.assertValidity(),Z},mapToCurve(I){if(!Array.isArray(I))throw Error("mapToCurve: expected array of bigints");for(let Y of I)if(typeof Y!=="bigint")throw Error("mapToCurve: expected array of bigints");let Q=$.fromAffine(J(I)).clearCofactor();return Q.assertValidity(),Q}}}});var FY=A((bY)=>{Object.defineProperty(bY,"__esModule",{value:!0});bY.montgomery=G6;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var PY=J$(),I$=w0(),j$=BigInt(0),bJ=BigInt(1);function Z6($){return(0,I$.validateObject)($,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...$})}function G6($){let J=Z6($),{P:q}=J,I=(B)=>(0,PY.mod)(B,q),Q=J.montgomeryBits,Y=Math.ceil(Q/8),Z=J.nByteLength,G=J.adjustScalarBytes||((B)=>B),z=J.powPminus2||((B)=>(0,PY.pow)(B,q-BigInt(2),q));function M(B,C,R){let P=I(B*(C-R));return C=I(C-P),R=I(R+P),[C,R]}let X=(J.a-BigInt(2))/BigInt(4);function V(B,C){(0,I$.aInRange)("u",B,j$,q),(0,I$.aInRange)("scalar",C,j$,q);let R=C,P=B,E=bJ,k=j$,f=B,g=bJ,T=j$,_;for(let n=BigInt(Q-1);n>=j$;n--){let U=R>>n&bJ;T^=U,_=M(T,E,f),E=_[0],f=_[1],_=M(T,k,g),k=_[0],g=_[1],T=U;let O=E+k,L=I(O*O),K=E-k,S=I(K*K),m=L-S,u=f+g,v=f-g,r=I(v*O),l=I(u*K),c=r+l,y=r-l;f=I(c*c),g=I(P*I(y*y)),E=I(L*S),k=I(m*(L+I(X*m)))}_=M(T,E,f),E=_[0],f=_[1],_=M(T,k,g),k=_[0],g=_[1];let i=z(k);return I(E*i)}function N(B){return(0,I$.numberToBytesLE)(I(B),Y)}function H(B){let C=(0,I$.ensureBytes)("u coordinate",B,Y);if(Z===32)C[31]&=127;return(0,I$.bytesToNumberLE)(C)}function D(B){let C=(0,I$.ensureBytes)("scalar",B),R=C.length;if(R!==Y&&R!==Z){let P=""+Y+" or "+Z;throw Error("invalid scalar, expected "+P+" bytes, got "+R)}return(0,I$.bytesToNumberLE)(G(C))}function W(B,C){let R=H(C),P=D(B),E=V(R,P);if(E===j$)throw Error("invalid private or public key received");return N(E)}let j=N(J.Gu);function w(B){return W(B,j)}return{scalarMult:W,scalarMultBase:w,getSharedSecret:(B,C)=>W(B,C),getPublicKey:(B)=>w(B),utils:{randomPrivateKey:()=>J.randomBytes(J.nByteLength)},GuBytes:j}}});var rY=A((lY)=>{Object.defineProperty(lY,"__esModule",{value:!0});lY.hash_to_ristretto255=lY.hashToRistretto255=lY.RistrettoPoint=lY.encodeToCurve=lY.hashToCurve=lY.edwardsToMontgomery=lY.x25519=lY.ed25519ph=lY.ed25519ctx=lY.ed25519=lY.ED25519_TORSION_SUBGROUP=void 0;lY.edwardsToMontgomeryPub=cY;lY.edwardsToMontgomeryPriv=U6;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var O8=sQ(),g$=c0(),z6=W8(),yJ=AY(),yY=PJ(),e=J$(),M6=FY(),X$=w0(),x$=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),gJ=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),W6=BigInt(0),k0=BigInt(1),V8=BigInt(2),mY=BigInt(3),_Y=BigInt(5),mJ=BigInt(8);function vY($){let J=BigInt(10),q=BigInt(20),I=BigInt(40),Q=BigInt(80),Y=x$,G=$*$%Y*$%Y,z=(0,e.pow2)(G,V8,Y)*G%Y,M=(0,e.pow2)(z,k0,Y)*$%Y,X=(0,e.pow2)(M,_Y,Y)*M%Y,V=(0,e.pow2)(X,J,Y)*X%Y,N=(0,e.pow2)(V,q,Y)*V%Y,H=(0,e.pow2)(N,I,Y)*N%Y,D=(0,e.pow2)(H,Q,Y)*H%Y,W=(0,e.pow2)(D,Q,Y)*H%Y,j=(0,e.pow2)(W,J,Y)*X%Y;return{pow_p_5_8:(0,e.pow2)(j,V8,Y)*$%Y,b2:G}}function uY($){return $[0]&=248,$[31]&=127,$[31]|=64,$}function _J($,J){let q=x$,I=(0,e.mod)(J*J*J,q),Q=(0,e.mod)(I*I*J,q),Y=vY($*Q).pow_p_5_8,Z=(0,e.mod)($*I*Y,q),G=(0,e.mod)(J*Z*Z,q),z=Z,M=(0,e.mod)(Z*gJ,q),X=G===$,V=G===(0,e.mod)(-$,q),N=G===(0,e.mod)(-$*gJ,q);if(X)Z=z;if(V||N)Z=M;if((0,e.isNegativeLE)(Z,q))Z=(0,e.mod)(-Z,q);return{isValid:X||V,value:Z}}lY.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];var x=(()=>(0,e.Field)(x$,void 0,!0))(),y$=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:x,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:mJ,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:O8.sha512,randomBytes:g$.randomBytes,adjustScalarBytes:uY,uvRatio:_J}))();lY.ed25519=(()=>(0,yJ.twistedEdwards)(y$))();function dY($,J,q){if(J.length>255)throw Error("Context is too big");return(0,g$.concatBytes)((0,g$.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([q?1:0,J.length]),J,$)}lY.ed25519ctx=(()=>(0,yJ.twistedEdwards)({...y$,domain:dY}))();lY.ed25519ph=(()=>(0,yJ.twistedEdwards)(Object.assign({},y$,{domain:dY,prehash:O8.sha512})))();lY.x25519=(()=>(0,M6.montgomery)({P:x$,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:($)=>{let J=x$,{pow_p_5_8:q,b2:I}=vY($);return(0,e.mod)((0,e.pow2)(q,mY,J)*I,J)},adjustScalarBytes:uY,randomBytes:g$.randomBytes}))();function cY($){let{y:J}=lY.ed25519.ExtendedPoint.fromHex($),q=BigInt(1);return x.toBytes(x.create((q+J)*x.inv(q-J)))}lY.edwardsToMontgomery=cY;function U6($){let J=y$.hash($.subarray(0,32));return y$.adjustScalarBytes(J).subarray(0,32)}var V6=(()=>(x.ORDER+mY)/mJ)(),O6=(()=>x.pow(V8,V6))(),kY=(()=>x.sqrt(x.neg(x.ONE)))();function N6($){let J=(x.ORDER-_Y)/mJ,q=BigInt(486662),I=x.sqr($);I=x.mul(I,V8);let Q=x.add(I,x.ONE),Y=x.neg(q),Z=x.sqr(Q),G=x.mul(Z,Q),z=x.mul(I,q);z=x.mul(z,Y),z=x.add(z,Z),z=x.mul(z,Y);let M=x.sqr(G);Z=x.sqr(M),M=x.mul(M,G),M=x.mul(M,z),Z=x.mul(Z,M);let X=x.pow(Z,J);X=x.mul(X,M);let V=x.mul(X,kY);Z=x.sqr(X),Z=x.mul(Z,G);let N=x.eql(Z,z),H=x.cmov(V,X,N),D=x.mul(Y,I),W=x.mul(X,$);W=x.mul(W,O6);let j=x.mul(W,kY),w=x.mul(z,I);Z=x.sqr(W),Z=x.mul(Z,G);let B=x.eql(Z,w),C=x.cmov(j,W,B);Z=x.sqr(H),Z=x.mul(Z,G);let R=x.eql(Z,z),P=x.cmov(D,Y,R),E=x.cmov(C,H,R),k=x.isOdd(E);return E=x.cmov(E,x.neg(E),R!==k),{xMn:P,xMd:Q,yMn:E,yMd:k0}}var B6=(()=>(0,e.FpSqrtEven)(x,x.neg(BigInt(486664))))();function C6($){let{xMn:J,xMd:q,yMn:I,yMd:Q}=N6($),Y=x.mul(J,Q);Y=x.mul(Y,B6);let Z=x.mul(q,I),G=x.sub(J,q),z=x.add(J,q),M=x.mul(Z,z),X=x.eql(M,x.ZERO);Y=x.cmov(Y,x.ZERO,X),Z=x.cmov(Z,x.ONE,X),G=x.cmov(G,x.ONE,X),z=x.cmov(z,x.ONE,X);let V=x.invertBatch([Z,z]);return{x:x.mul(Y,V[0]),y:x.mul(G,V[1])}}var hY=(()=>(0,yY.createHasher)(lY.ed25519.ExtendedPoint,($)=>C6($[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:x.ORDER,m:1,k:128,expand:"xmd",hash:O8.sha512}))();lY.hashToCurve=(()=>hY.hashToCurve)();lY.encodeToCurve=(()=>hY.encodeToCurve)();function FJ($){if(!($ instanceof G0))throw Error("RistrettoPoint expected")}var xJ=gJ,D6=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),H6=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),T6=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),j6=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),gY=($)=>_J(k0,$),L6=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),kJ=($)=>lY.ed25519.CURVE.Fp.create((0,X$.bytesToNumberLE)($)&L6);function xY($){let{d:J}=lY.ed25519.CURVE,q=lY.ed25519.CURVE.Fp.ORDER,I=lY.ed25519.CURVE.Fp.create,Q=I(xJ*$*$),Y=I((Q+k0)*T6),Z=BigInt(-1),G=I((Z-J*Q)*I(Q+J)),{isValid:z,value:M}=_J(Y,G),X=I(M*$);if(!(0,e.isNegativeLE)(X,q))X=I(-X);if(!z)M=X;if(!z)Z=Q;let V=I(Z*(Q-k0)*j6-G),N=M*M,H=I((M+M)*G),D=I(V*D6),W=I(k0-N),j=I(k0+N);return new lY.ed25519.ExtendedPoint(I(H*j),I(W*D),I(D*j),I(H*W))}class G0{constructor($){this.ep=$}static fromAffine($){return new G0(lY.ed25519.ExtendedPoint.fromAffine($))}static hashToCurve($){$=(0,X$.ensureBytes)("ristrettoHash",$,64);let J=kJ($.slice(0,32)),q=xY(J),I=kJ($.slice(32,64)),Q=xY(I);return new G0(q.add(Q))}static fromHex($){$=(0,X$.ensureBytes)("ristrettoHex",$,32);let{a:J,d:q}=lY.ed25519.CURVE,I=lY.ed25519.CURVE.Fp.ORDER,Q=lY.ed25519.CURVE.Fp.create,Y="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",Z=kJ($);if(!(0,X$.equalBytes)((0,X$.numberToBytesLE)(Z,32),$)||(0,e.isNegativeLE)(Z,I))throw Error(Y);let G=Q(Z*Z),z=Q(k0+J*G),M=Q(k0-J*G),X=Q(z*z),V=Q(M*M),N=Q(J*q*X-V),{isValid:H,value:D}=gY(Q(N*V)),W=Q(D*M),j=Q(D*W*N),w=Q((Z+Z)*W);if((0,e.isNegativeLE)(w,I))w=Q(-w);let B=Q(z*j),C=Q(w*B);if(!H||(0,e.isNegativeLE)(C,I)||B===W6)throw Error(Y);return new G0(new lY.ed25519.ExtendedPoint(w,B,k0,C))}static msm($,J){let q=(0,e.Field)(lY.ed25519.CURVE.n,lY.ed25519.CURVE.nBitLength);return(0,z6.pippenger)(G0,q,$,J)}toRawBytes(){let{ex:$,ey:J,ez:q,et:I}=this.ep,Q=lY.ed25519.CURVE.Fp.ORDER,Y=lY.ed25519.CURVE.Fp.create,Z=Y(Y(q+J)*Y(q-J)),G=Y($*J),z=Y(G*G),{value:M}=gY(Y(Z*z)),X=Y(M*Z),V=Y(M*G),N=Y(X*V*I),H;if((0,e.isNegativeLE)(I*N,Q)){let W=Y(J*xJ),j=Y($*xJ);$=W,J=j,H=Y(X*H6)}else H=V;if((0,e.isNegativeLE)($*N,Q))J=Y(-J);let D=Y((q-J)*H);if((0,e.isNegativeLE)(D,Q))D=Y(-D);return(0,X$.numberToBytesLE)(D,32)}toHex(){return(0,X$.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals($){FJ($);let{ex:J,ey:q}=this.ep,{ex:I,ey:Q}=$.ep,Y=lY.ed25519.CURVE.Fp.create,Z=Y(J*Q)===Y(q*I),G=Y(q*Q)===Y(J*I);return Z||G}add($){return FJ($),new G0(this.ep.add($.ep))}subtract($){return FJ($),new G0(this.ep.subtract($.ep))}multiply($){return new G0(this.ep.multiply($))}multiplyUnsafe($){return new G0(this.ep.multiplyUnsafe($))}double(){return new G0(this.ep.double())}negate(){return new G0(this.ep.negate())}}lY.RistrettoPoint=(()=>{if(!G0.BASE)G0.BASE=new G0(lY.ed25519.ExtendedPoint.BASE);if(!G0.ZERO)G0.ZERO=new G0(lY.ed25519.ExtendedPoint.ZERO);return G0})();var w6=($,J)=>{let q=J.DST,I=typeof q==="string"?(0,g$.utf8ToBytes)(q):q,Q=(0,yY.expand_message_xmd)($,I,64,O8.sha512);return G0.hashToCurve(Q)};lY.hashToRistretto255=w6;lY.hash_to_ristretto255=lY.hashToRistretto255});var uJ=A((oY)=>{Object.defineProperty(oY,"__esModule",{value:!0});oY.sha224=oY.sha256=oY.SHA256=void 0;var vJ=MJ(),j0=c0(),g6=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Q$=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Y$=new Uint32Array(64);class N8 extends vJ.HashMD{constructor(){super(64,32,8,!1);this.A=Q$[0]|0,this.B=Q$[1]|0,this.C=Q$[2]|0,this.D=Q$[3]|0,this.E=Q$[4]|0,this.F=Q$[5]|0,this.G=Q$[6]|0,this.H=Q$[7]|0}get(){let{A:$,B:J,C:q,D:I,E:Q,F:Y,G:Z,H:G}=this;return[$,J,q,I,Q,Y,Z,G]}set($,J,q,I,Q,Y,Z,G){this.A=$|0,this.B=J|0,this.C=q|0,this.D=I|0,this.E=Q|0,this.F=Y|0,this.G=Z|0,this.H=G|0}process($,J){for(let X=0;X<16;X++,J+=4)Y$[X]=$.getUint32(J,!1);for(let X=16;X<64;X++){let V=Y$[X-15],N=Y$[X-2],H=(0,j0.rotr)(V,7)^(0,j0.rotr)(V,18)^V>>>3,D=(0,j0.rotr)(N,17)^(0,j0.rotr)(N,19)^N>>>10;Y$[X]=D+Y$[X-7]+H+Y$[X-16]|0}let{A:q,B:I,C:Q,D:Y,E:Z,F:G,G:z,H:M}=this;for(let X=0;X<64;X++){let V=(0,j0.rotr)(Z,6)^(0,j0.rotr)(Z,11)^(0,j0.rotr)(Z,25),N=M+V+(0,vJ.Chi)(Z,G,z)+g6[X]+Y$[X]|0,D=((0,j0.rotr)(q,2)^(0,j0.rotr)(q,13)^(0,j0.rotr)(q,22))+(0,vJ.Maj)(q,I,Q)|0;M=z,z=G,G=Z,Z=Y+N|0,Y=Q,Q=I,I=q,q=N+D|0}q=q+this.A|0,I=I+this.B|0,Q=Q+this.C|0,Y=Y+this.D|0,Z=Z+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(q,I,Q,Y,Z,G,z,M)}roundClean(){Y$.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}oY.SHA256=N8;class pY extends N8{constructor(){super();this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}oY.sha256=(0,j0.wrapConstructor)(()=>new N8);oY.sha224=(0,j0.wrapConstructor)(()=>new pY)});var cJ=A((tY)=>{Object.defineProperty(tY,"__esModule",{value:!0});tY.hmac=tY.HMAC=void 0;var B8=b$(),sY=c0();class C8 extends sY.Hash{constructor($,J){super();this.finished=!1,this.destroyed=!1,(0,B8.ahash)($);let q=(0,sY.toBytes)(J);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let I=this.blockLen,Q=new Uint8Array(I);Q.set(q.length>I?$.create().update(q).digest():q);for(let Y=0;Y<Q.length;Y++)Q[Y]^=54;this.iHash.update(Q),this.oHash=$.create();for(let Y=0;Y<Q.length;Y++)Q[Y]^=106;this.oHash.update(Q),Q.fill(0)}update($){return(0,B8.aexists)(this),this.iHash.update($),this}digestInto($){(0,B8.aexists)(this),(0,B8.abytes)($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:J,iHash:q,finished:I,destroyed:Q,blockLen:Y,outputLen:Z}=this;return $=$,$.finished=I,$.destroyed=Q,$.blockLen=Y,$.outputLen=Z,$.oHash=J._cloneInto($.oHash),$.iHash=q._cloneInto($.iHash),$}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}tY.HMAC=C8;var m6=($,J,q)=>new C8($,J).update(q).digest();tY.hmac=m6;tY.hmac.create=($,J)=>new C8($,J)});var lJ=A((IZ)=>{Object.defineProperty(IZ,"__esModule",{value:!0});IZ.DER=IZ.DERErr=void 0;IZ.weierstrassPoints=JZ;IZ.weierstrass=h6;IZ.SWUFpSqrtRatio=qZ;IZ.mapToCurveSimpleSWU=l6;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var D8=W8(),z$=J$(),s=w0(),V0=w0();function eY($){if($.lowS!==void 0)(0,V0.abool)("lowS",$.lowS);if($.prehash!==void 0)(0,V0.abool)("prehash",$.prehash)}function v6($){let J=(0,D8.validateBasic)($);s.validateObject(J,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:q,Fp:I,a:Q}=J;if(q){if(!I.eql(Q,I.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof q!=="object"||typeof q.beta!=="bigint"||typeof q.splitScalar!=="function")throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...J})}var{bytesToNumberBE:u6,hexToBytes:d6}=s;class hJ extends Error{constructor($=""){super($)}}IZ.DERErr=hJ;IZ.DER={Err:hJ,_tlv:{encode:($,J)=>{let{Err:q}=IZ.DER;if($<0||$>256)throw new q("tlv.encode: wrong tag");if(J.length&1)throw new q("tlv.encode: unpadded data");let I=J.length/2,Q=s.numberToHexUnpadded(I);if(Q.length/2&128)throw new q("tlv.encode: long form length too big");let Y=I>127?s.numberToHexUnpadded(Q.length/2|128):"";return s.numberToHexUnpadded($)+Y+Q+J},decode($,J){let{Err:q}=IZ.DER,I=0;if($<0||$>256)throw new q("tlv.encode: wrong tag");if(J.length<2||J[I++]!==$)throw new q("tlv.decode: wrong tlv");let Q=J[I++],Y=!!(Q&128),Z=0;if(!Y)Z=Q;else{let z=Q&127;if(!z)throw new q("tlv.decode(long): indefinite length not supported");if(z>4)throw new q("tlv.decode(long): byte length is too big");let M=J.subarray(I,I+z);if(M.length!==z)throw new q("tlv.decode: length bytes not complete");if(M[0]===0)throw new q("tlv.decode(long): zero leftmost byte");for(let X of M)Z=Z<<8|X;if(I+=z,Z<128)throw new q("tlv.decode(long): not minimal encoding")}let G=J.subarray(I,I+Z);if(G.length!==Z)throw new q("tlv.decode: wrong value length");return{v:G,l:J.subarray(I+Z)}}},_int:{encode($){let{Err:J}=IZ.DER;if($<A0)throw new J("integer: negative integers are not allowed");let q=s.numberToHexUnpadded($);if(Number.parseInt(q[0],16)&8)q="00"+q;if(q.length&1)throw new J("unexpected DER parsing assertion: unpadded hex");return q},decode($){let{Err:J}=IZ.DER;if($[0]&128)throw new J("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new J("invalid signature integer: unnecessary leading zero");return u6($)}},toSig($){let{Err:J,_int:q,_tlv:I}=IZ.DER,Q=typeof $==="string"?d6($):$;s.abytes(Q);let{v:Y,l:Z}=I.decode(48,Q);if(Z.length)throw new J("invalid signature: left bytes after parsing");let{v:G,l:z}=I.decode(2,Y),{v:M,l:X}=I.decode(2,z);if(X.length)throw new J("invalid signature: left bytes after parsing");return{r:q.decode(G),s:q.decode(M)}},hexFromSig($){let{_tlv:J,_int:q}=IZ.DER,I=J.encode(2,q.encode($.r)),Q=J.encode(2,q.encode($.s)),Y=I+Q;return J.encode(48,Y)}};var A0=BigInt(0),J0=BigInt(1),Z$=BigInt(2),H8=BigInt(3),$Z=BigInt(4);function JZ($){let J=v6($),{Fp:q}=J,I=(0,z$.Field)(J.n,J.nBitLength),Q=J.toBytes||((W,j,w)=>{let B=j.toAffine();return s.concatBytes(Uint8Array.from([4]),q.toBytes(B.x),q.toBytes(B.y))}),Y=J.fromBytes||((W)=>{let j=W.subarray(1),w=q.fromBytes(j.subarray(0,q.BYTES)),B=q.fromBytes(j.subarray(q.BYTES,2*q.BYTES));return{x:w,y:B}});function Z(W){let{a:j,b:w}=J,B=q.sqr(W),C=q.mul(B,W);return q.add(q.add(C,q.mul(W,j)),w)}if(!q.eql(q.sqr(J.Gy),Z(J.Gx)))throw Error("bad generator point: equation left != right");function G(W){return s.inRange(W,J0,J.n)}function z(W){let{allowedPrivateKeyLengths:j,nByteLength:w,wrapPrivateKey:B,n:C}=J;if(j&&typeof W!=="bigint"){if(s.isBytes(W))W=s.bytesToHex(W);if(typeof W!=="string"||!j.includes(W.length))throw Error("invalid private key");W=W.padStart(w*2,"0")}let R;try{R=typeof W==="bigint"?W:s.bytesToNumberBE((0,V0.ensureBytes)("private key",W,w))}catch(P){throw Error("invalid private key, expected hex or "+w+" bytes, got "+typeof W)}if(B)R=(0,z$.mod)(R,C);return s.aInRange("private key",R,J0,C),R}function M(W){if(!(W instanceof N))throw Error("ProjectivePoint expected")}let X=(0,V0.memoized)((W,j)=>{let{px:w,py:B,pz:C}=W;if(q.eql(C,q.ONE))return{x:w,y:B};let R=W.is0();if(j==null)j=R?q.ONE:q.inv(C);let P=q.mul(w,j),E=q.mul(B,j),k=q.mul(C,j);if(R)return{x:q.ZERO,y:q.ZERO};if(!q.eql(k,q.ONE))throw Error("invZ was invalid");return{x:P,y:E}}),V=(0,V0.memoized)((W)=>{if(W.is0()){if(J.allowInfinityPoint&&!q.is0(W.py))return;throw Error("bad point: ZERO")}let{x:j,y:w}=W.toAffine();if(!q.isValid(j)||!q.isValid(w))throw Error("bad point: x or y not FE");let B=q.sqr(w),C=Z(j);if(!q.eql(B,C))throw Error("bad point: equation left != right");if(!W.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class N{constructor(W,j,w){if(this.px=W,this.py=j,this.pz=w,W==null||!q.isValid(W))throw Error("x required");if(j==null||!q.isValid(j))throw Error("y required");if(w==null||!q.isValid(w))throw Error("z required");Object.freeze(this)}static fromAffine(W){let{x:j,y:w}=W||{};if(!W||!q.isValid(j)||!q.isValid(w))throw Error("invalid affine point");if(W instanceof N)throw Error("projective point not allowed");let B=(C)=>q.eql(C,q.ZERO);if(B(j)&&B(w))return N.ZERO;return new N(j,w,q.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(W){let j=q.invertBatch(W.map((w)=>w.pz));return W.map((w,B)=>w.toAffine(j[B])).map(N.fromAffine)}static fromHex(W){let j=N.fromAffine(Y((0,V0.ensureBytes)("pointHex",W)));return j.assertValidity(),j}static fromPrivateKey(W){return N.BASE.multiply(z(W))}static msm(W,j){return(0,D8.pippenger)(N,I,W,j)}_setWindowSize(W){D.setWindowSize(this,W)}assertValidity(){V(this)}hasEvenY(){let{y:W}=this.toAffine();if(q.isOdd)return!q.isOdd(W);throw Error("Field doesn't support isOdd")}equals(W){M(W);let{px:j,py:w,pz:B}=this,{px:C,py:R,pz:P}=W,E=q.eql(q.mul(j,P),q.mul(C,B)),k=q.eql(q.mul(w,P),q.mul(R,B));return E&&k}negate(){return new N(this.px,q.neg(this.py),this.pz)}double(){let{a:W,b:j}=J,w=q.mul(j,H8),{px:B,py:C,pz:R}=this,P=q.ZERO,E=q.ZERO,k=q.ZERO,f=q.mul(B,B),g=q.mul(C,C),T=q.mul(R,R),_=q.mul(B,C);return _=q.add(_,_),k=q.mul(B,R),k=q.add(k,k),P=q.mul(W,k),E=q.mul(w,T),E=q.add(P,E),P=q.sub(g,E),E=q.add(g,E),E=q.mul(P,E),P=q.mul(_,P),k=q.mul(w,k),T=q.mul(W,T),_=q.sub(f,T),_=q.mul(W,_),_=q.add(_,k),k=q.add(f,f),f=q.add(k,f),f=q.add(f,T),f=q.mul(f,_),E=q.add(E,f),T=q.mul(C,R),T=q.add(T,T),f=q.mul(T,_),P=q.sub(P,f),k=q.mul(T,g),k=q.add(k,k),k=q.add(k,k),new N(P,E,k)}add(W){M(W);let{px:j,py:w,pz:B}=this,{px:C,py:R,pz:P}=W,E=q.ZERO,k=q.ZERO,f=q.ZERO,g=J.a,T=q.mul(J.b,H8),_=q.mul(j,C),i=q.mul(w,R),n=q.mul(B,P),U=q.add(j,w),O=q.add(C,R);U=q.mul(U,O),O=q.add(_,i),U=q.sub(U,O),O=q.add(j,B);let L=q.add(C,P);return O=q.mul(O,L),L=q.add(_,n),O=q.sub(O,L),L=q.add(w,B),E=q.add(R,P),L=q.mul(L,E),E=q.add(i,n),L=q.sub(L,E),f=q.mul(g,O),E=q.mul(T,n),f=q.add(E,f),E=q.sub(i,f),f=q.add(i,f),k=q.mul(E,f),i=q.add(_,_),i=q.add(i,_),n=q.mul(g,n),O=q.mul(T,O),i=q.add(i,n),n=q.sub(_,n),n=q.mul(g,n),O=q.add(O,n),_=q.mul(i,O),k=q.add(k,_),_=q.mul(L,O),E=q.mul(U,E),E=q.sub(E,_),_=q.mul(U,i),f=q.mul(L,f),f=q.add(f,_),new N(E,k,f)}subtract(W){return this.add(W.negate())}is0(){return this.equals(N.ZERO)}wNAF(W){return D.wNAFCached(this,W,N.normalizeZ)}multiplyUnsafe(W){let{endo:j,n:w}=J;s.aInRange("scalar",W,A0,w);let B=N.ZERO;if(W===A0)return B;if(this.is0()||W===J0)return this;if(!j||D.hasPrecomputes(this))return D.wNAFCachedUnsafe(this,W,N.normalizeZ);let{k1neg:C,k1:R,k2neg:P,k2:E}=j.splitScalar(W),k=B,f=B,g=this;while(R>A0||E>A0){if(R&J0)k=k.add(g);if(E&J0)f=f.add(g);g=g.double(),R>>=J0,E>>=J0}if(C)k=k.negate();if(P)f=f.negate();return f=new N(q.mul(f.px,j.beta),f.py,f.pz),k.add(f)}multiply(W){let{endo:j,n:w}=J;s.aInRange("scalar",W,J0,w);let B,C;if(j){let{k1neg:R,k1:P,k2neg:E,k2:k}=j.splitScalar(W),{p:f,f:g}=this.wNAF(P),{p:T,f:_}=this.wNAF(k);f=D.constTimeNegate(R,f),T=D.constTimeNegate(E,T),T=new N(q.mul(T.px,j.beta),T.py,T.pz),B=f.add(T),C=g.add(_)}else{let{p:R,f:P}=this.wNAF(W);B=R,C=P}return N.normalizeZ([B,C])[0]}multiplyAndAddUnsafe(W,j,w){let B=N.BASE,C=(P,E)=>E===A0||E===J0||!P.equals(B)?P.multiplyUnsafe(E):P.multiply(E),R=C(this,j).add(C(W,w));return R.is0()?void 0:R}toAffine(W){return X(this,W)}isTorsionFree(){let{h:W,isTorsionFree:j}=J;if(W===J0)return!0;if(j)return j(N,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:W,clearCofactor:j}=J;if(W===J0)return this;if(j)return j(N,this);return this.multiplyUnsafe(J.h)}toRawBytes(W=!0){return(0,V0.abool)("isCompressed",W),this.assertValidity(),Q(N,this,W)}toHex(W=!0){return(0,V0.abool)("isCompressed",W),s.bytesToHex(this.toRawBytes(W))}}N.BASE=new N(J.Gx,J.Gy,q.ONE),N.ZERO=new N(q.ZERO,q.ONE,q.ZERO);let H=J.nBitLength,D=(0,D8.wNAF)(N,J.endo?Math.ceil(H/2):H);return{CURVE:J,ProjectivePoint:N,normPrivateKeyToScalar:z,weierstrassEquation:Z,isWithinCurveOrder:G}}function c6($){let J=(0,D8.validateBasic)($);return s.validateObject(J,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...J})}function h6($){let J=c6($),{Fp:q,n:I}=J,Q=q.BYTES+1,Y=2*q.BYTES+1;function Z(U){return(0,z$.mod)(U,I)}function G(U){return(0,z$.invert)(U,I)}let{ProjectivePoint:z,normPrivateKeyToScalar:M,weierstrassEquation:X,isWithinCurveOrder:V}=JZ({...J,toBytes(U,O,L){let K=O.toAffine(),S=q.toBytes(K.x),m=s.concatBytes;if((0,V0.abool)("isCompressed",L),L)return m(Uint8Array.from([O.hasEvenY()?2:3]),S);else return m(Uint8Array.from([4]),S,q.toBytes(K.y))},fromBytes(U){let O=U.length,L=U[0],K=U.subarray(1);if(O===Q&&(L===2||L===3)){let S=s.bytesToNumberBE(K);if(!s.inRange(S,J0,q.ORDER))throw Error("Point is not on curve");let m=X(S),u;try{u=q.sqrt(m)}catch(l){let c=l instanceof Error?": "+l.message:"";throw Error("Point is not on curve"+c)}let v=(u&J0)===J0;if((L&1)===1!==v)u=q.neg(u);return{x:S,y:u}}else if(O===Y&&L===4){let S=q.fromBytes(K.subarray(0,q.BYTES)),m=q.fromBytes(K.subarray(q.BYTES,2*q.BYTES));return{x:S,y:m}}else{let S=Q,m=Y;throw Error("invalid Point, expected length of "+S+", or uncompressed "+m+", got "+O)}}}),N=(U)=>s.bytesToHex(s.numberToBytesBE(U,J.nByteLength));function H(U){let O=I>>J0;return U>O}function D(U){return H(U)?Z(-U):U}let W=(U,O,L)=>s.bytesToNumberBE(U.slice(O,L));class j{constructor(U,O,L){this.r=U,this.s=O,this.recovery=L,this.assertValidity()}static fromCompact(U){let O=J.nByteLength;return U=(0,V0.ensureBytes)("compactSignature",U,O*2),new j(W(U,0,O),W(U,O,2*O))}static fromDER(U){let{r:O,s:L}=IZ.DER.toSig((0,V0.ensureBytes)("DER",U));return new j(O,L)}assertValidity(){s.aInRange("r",this.r,J0,I),s.aInRange("s",this.s,J0,I)}addRecoveryBit(U){return new j(this.r,this.s,U)}recoverPublicKey(U){let{r:O,s:L,recovery:K}=this,S=E((0,V0.ensureBytes)("msgHash",U));if(K==null||![0,1,2,3].includes(K))throw Error("recovery id invalid");let m=K===2||K===3?O+J.n:O;if(m>=q.ORDER)throw Error("recovery id 2 or 3 invalid");let u=(K&1)===0?"02":"03",v=z.fromHex(u+N(m)),r=G(m),l=Z(-S*r),c=Z(L*r),y=z.BASE.multiplyAndAddUnsafe(v,l,c);if(!y)throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return H(this.s)}normalizeS(){return this.hasHighS()?new j(this.r,Z(-this.s),this.recovery):this}toDERRawBytes(){return s.hexToBytes(this.toDERHex())}toDERHex(){return IZ.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return s.hexToBytes(this.toCompactHex())}toCompactHex(){return N(this.r)+N(this.s)}}let w={isValidPrivateKey(U){try{return M(U),!0}catch(O){return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{let U=(0,z$.getMinHashLength)(J.n);return(0,z$.mapHashToField)(J.randomBytes(U),J.n)},precompute(U=8,O=z.BASE){return O._setWindowSize(U),O.multiply(BigInt(3)),O}};function B(U,O=!0){return z.fromPrivateKey(U).toRawBytes(O)}function C(U){let O=s.isBytes(U),L=typeof U==="string",K=(O||L)&&U.length;if(O)return K===Q||K===Y;if(L)return K===2*Q||K===2*Y;if(U instanceof z)return!0;return!1}function R(U,O,L=!0){if(C(U))throw Error("first arg must be private key");if(!C(O))throw Error("second arg must be public key");return z.fromHex(O).multiply(M(U)).toRawBytes(L)}let P=J.bits2int||function(U){if(U.length>8192)throw Error("input is too large");let O=s.bytesToNumberBE(U),L=U.length*8-J.nBitLength;return L>0?O>>BigInt(L):O},E=J.bits2int_modN||function(U){return Z(P(U))},k=s.bitMask(J.nBitLength);function f(U){return s.aInRange("num < 2^"+J.nBitLength,U,A0,k),s.numberToBytesBE(U,J.nByteLength)}function g(U,O,L=T){if(["recovered","canonical"].some((F)=>(F in L)))throw Error("sign() legacy options not supported");let{hash:K,randomBytes:S}=J,{lowS:m,prehash:u,extraEntropy:v}=L;if(m==null)m=!0;if(U=(0,V0.ensureBytes)("msgHash",U),eY(L),u)U=(0,V0.ensureBytes)("prehashed msgHash",K(U));let r=E(U),l=M(O),c=[f(l),f(r)];if(v!=null&&v!==!1){let F=v===!0?S(q.BYTES):v;c.push((0,V0.ensureBytes)("extraEntropy",F))}let y=s.concatBytes(...c),q0=r;function U0(F){let h=P(F);if(!V(h))return;let b=G(h),d=z.BASE.multiply(h).toAffine(),a=Z(d.x);if(a===A0)return;let Y0=Z(b*Z(q0+a*l));if(Y0===A0)return;let $0=(d.x===a?0:2)|Number(d.y&J0),i0=Y0;if(m&&H(Y0))i0=D(Y0),$0^=1;return new j(a,i0,$0)}return{seed:y,k2sig:U0}}let T={lowS:J.lowS,prehash:!1},_={lowS:J.lowS,prehash:!1};function i(U,O,L=T){let{seed:K,k2sig:S}=g(U,O,L),m=J;return s.createHmacDrbg(m.hash.outputLen,m.nByteLength,m.hmac)(K,S)}z.BASE._setWindowSize(8);function n(U,O,L,K=_){let S=U;O=(0,V0.ensureBytes)("msgHash",O),L=(0,V0.ensureBytes)("publicKey",L);let{lowS:m,prehash:u,format:v}=K;if(eY(K),"strict"in K)throw Error("options.strict was renamed to lowS");if(v!==void 0&&v!=="compact"&&v!=="der")throw Error("format must be compact or der");let r=typeof S==="string"||s.isBytes(S),l=!r&&!v&&typeof S==="object"&&S!==null&&typeof S.r==="bigint"&&typeof S.s==="bigint";if(!r&&!l)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");let c=void 0,y;try{if(l)c=new j(S.r,S.s);if(r){try{if(v!=="compact")c=j.fromDER(S)}catch($0){if(!($0 instanceof IZ.DER.Err))throw $0}if(!c&&v!=="der")c=j.fromCompact(S)}y=z.fromHex(L)}catch($0){return!1}if(!c)return!1;if(m&&c.hasHighS())return!1;if(u)O=J.hash(O);let{r:q0,s:U0}=c,F=E(O),h=G(U0),b=Z(F*h),d=Z(q0*h),a=z.BASE.multiplyAndAddUnsafe(y,b,d)?.toAffine();if(!a)return!1;return Z(a.x)===q0}return{CURVE:J,getPublicKey:B,getSharedSecret:R,sign:i,verify:n,ProjectivePoint:z,Signature:j,utils:w}}function qZ($,J){let q=$.ORDER,I=A0;for(let D=q-J0;D%Z$===A0;D/=Z$)I+=J0;let Q=I,Y=Z$<<Q-J0-J0,Z=Y*Z$,G=(q-J0)/Z,z=(G-J0)/Z$,M=Z-J0,X=Y,V=$.pow(J,G),N=$.pow(J,(G+J0)/Z$),H=(D,W)=>{let j=V,w=$.pow(W,M),B=$.sqr(w);B=$.mul(B,W);let C=$.mul(D,B);C=$.pow(C,z),C=$.mul(C,w),w=$.mul(C,W),B=$.mul(C,D);let R=$.mul(B,w);C=$.pow(R,X);let P=$.eql(C,$.ONE);w=$.mul(B,N),C=$.mul(R,j),B=$.cmov(w,B,P),R=$.cmov(C,R,P);for(let E=Q;E>J0;E--){let k=E-Z$;k=Z$<<k-J0;let f=$.pow(R,k),g=$.eql(f,$.ONE);w=$.mul(B,j),j=$.mul(j,j),f=$.mul(R,j),B=$.cmov(w,B,g),R=$.cmov(f,R,g)}return{isValid:P,value:B}};if($.ORDER%$Z===H8){let D=($.ORDER-H8)/$Z,W=$.sqrt($.neg(J));H=(j,w)=>{let B=$.sqr(w),C=$.mul(j,w);B=$.mul(B,C);let R=$.pow(B,D);R=$.mul(R,C);let P=$.mul(R,W),E=$.mul($.sqr(R),w),k=$.eql(E,j),f=$.cmov(P,R,k);return{isValid:k,value:f}}}return H}function l6($,J){if((0,z$.validateField)($),!$.isValid(J.A)||!$.isValid(J.B)||!$.isValid(J.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let q=qZ($,J.Z);if(!$.isOdd)throw Error("Fp.isOdd is not implemented!");return(I)=>{let Q,Y,Z,G,z,M,X,V;Q=$.sqr(I),Q=$.mul(Q,J.Z),Y=$.sqr(Q),Y=$.add(Y,Q),Z=$.add(Y,$.ONE),Z=$.mul(Z,J.B),G=$.cmov(J.Z,$.neg(Y),!$.eql(Y,$.ZERO)),G=$.mul(G,J.A),Y=$.sqr(Z),M=$.sqr(G),z=$.mul(M,J.A),Y=$.add(Y,z),Y=$.mul(Y,Z),M=$.mul(M,G),z=$.mul(M,J.B),Y=$.add(Y,z),X=$.mul(Q,Z);let{isValid:N,value:H}=q(Y,M);V=$.mul(Q,I),V=$.mul(V,H),X=$.cmov(X,Z,N),V=$.cmov(V,H,N);let D=$.isOdd(I)===$.isOdd(V);return V=$.cmov($.neg(V),V,D),X=$.div(X,G),{x:X,y:V}}}});var GZ=A((ZZ)=>{Object.defineProperty(ZZ,"__esModule",{value:!0});ZZ.getHash=YZ;ZZ.createCurve=t6;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var a6=cJ(),QZ=c0(),s6=lJ();function YZ($){return{hash:$,hmac:(J,...q)=>(0,a6.hmac)($,J,(0,QZ.concatBytes)(...q)),randomBytes:QZ.randomBytes}}function t6($,J){let q=(I)=>(0,s6.weierstrass)({...$,...YZ(I)});return{...q(J),create:q}}});var HZ=A((CZ)=>{Object.defineProperty(CZ,"__esModule",{value:!0});CZ.encodeToCurve=CZ.hashToCurve=CZ.schnorr=CZ.secp256k1=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var T8=uJ(),JO=c0(),qO=GZ(),MZ=PJ(),W0=J$(),D0=w0(),IO=lJ(),v$=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),j8=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),m$=BigInt(1),L8=BigInt(2),XZ=($,J)=>($+J/L8)/J;function WZ($){let J=v$,q=BigInt(3),I=BigInt(6),Q=BigInt(11),Y=BigInt(22),Z=BigInt(23),G=BigInt(44),z=BigInt(88),M=$*$*$%J,X=M*M*$%J,V=(0,W0.pow2)(X,q,J)*X%J,N=(0,W0.pow2)(V,q,J)*X%J,H=(0,W0.pow2)(N,L8,J)*M%J,D=(0,W0.pow2)(H,Q,J)*H%J,W=(0,W0.pow2)(D,Y,J)*D%J,j=(0,W0.pow2)(W,G,J)*W%J,w=(0,W0.pow2)(j,z,J)*j%J,B=(0,W0.pow2)(w,G,J)*W%J,C=(0,W0.pow2)(B,q,J)*X%J,R=(0,W0.pow2)(C,Z,J)*D%J,P=(0,W0.pow2)(R,I,J)*M%J,E=(0,W0.pow2)(P,L8,J);if(!G$.eql(G$.sqr(E),$))throw Error("Cannot find square root");return E}var G$=(0,W0.Field)(v$,void 0,void 0,{sqrt:WZ});CZ.secp256k1=(0,qO.createCurve)({a:BigInt(0),b:BigInt(7),Fp:G$,n:j8,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let J=j8,q=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),I=-m$*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Q=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Y=q,Z=BigInt("0x100000000000000000000000000000000"),G=XZ(Y*$,J),z=XZ(-I*$,J),M=(0,W0.mod)($-G*q-z*Q,J),X=(0,W0.mod)(-G*I-z*Y,J),V=M>Z,N=X>Z;if(V)M=J-M;if(N)X=J-X;if(M>Z||X>Z)throw Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:V,k1:M,k2neg:N,k2:X}}}},T8.sha256);var UZ=BigInt(0),zZ={};function w8($,...J){let q=zZ[$];if(q===void 0){let I=(0,T8.sha256)(Uint8Array.from($,(Q)=>Q.charCodeAt(0)));q=(0,D0.concatBytes)(I,I),zZ[$]=q}return(0,T8.sha256)((0,D0.concatBytes)(q,...J))}var pJ=($)=>$.toRawBytes(!0).slice(1),iJ=($)=>(0,D0.numberToBytesBE)($,32),nJ=($)=>(0,W0.mod)($,v$),_$=($)=>(0,W0.mod)($,j8),oJ=CZ.secp256k1.ProjectivePoint,QO=($,J,q)=>oJ.BASE.multiplyAndAddUnsafe($,J,q);function rJ($){let J=CZ.secp256k1.utils.normPrivateKeyToScalar($),q=oJ.fromPrivateKey(J);return{scalar:q.hasEvenY()?J:_$(-J),bytes:pJ(q)}}function VZ($){(0,D0.aInRange)("x",$,m$,v$);let J=nJ($*$),q=nJ(J*$+BigInt(7)),I=WZ(q);if(I%L8!==UZ)I=nJ(-I);let Q=new oJ($,I,m$);return Q.assertValidity(),Q}var L$=D0.bytesToNumberBE;function OZ(...$){return _$(L$(w8("BIP0340/challenge",...$)))}function YO($){return rJ($).bytes}function ZO($,J,q=(0,JO.randomBytes)(32)){let I=(0,D0.ensureBytes)("message",$),{bytes:Q,scalar:Y}=rJ(J),Z=(0,D0.ensureBytes)("auxRand",q,32),G=iJ(Y^L$(w8("BIP0340/aux",Z))),z=w8("BIP0340/nonce",G,Q,I),M=_$(L$(z));if(M===UZ)throw Error("sign failed: k is zero");let{bytes:X,scalar:V}=rJ(M),N=OZ(X,Q,I),H=new Uint8Array(64);if(H.set(X,0),H.set(iJ(_$(V+N*Y)),32),!NZ(H,I,Q))throw Error("sign: Invalid signature produced");return H}function NZ($,J,q){let I=(0,D0.ensureBytes)("signature",$,64),Q=(0,D0.ensureBytes)("message",J),Y=(0,D0.ensureBytes)("publicKey",q,32);try{let Z=VZ(L$(Y)),G=L$(I.subarray(0,32));if(!(0,D0.inRange)(G,m$,v$))return!1;let z=L$(I.subarray(32,64));if(!(0,D0.inRange)(z,m$,j8))return!1;let M=OZ(iJ(G),pJ(Z),Q),X=QO(Z,z,_$(-M));if(!X||!X.hasEvenY()||X.toAffine().x!==G)return!1;return!0}catch(Z){return!1}}CZ.schnorr=(()=>({getPublicKey:YO,sign:ZO,verify:NZ,utils:{randomPrivateKey:CZ.secp256k1.utils.randomPrivateKey,lift_x:VZ,pointToBytes:pJ,numberToBytesBE:D0.numberToBytesBE,bytesToNumberBE:D0.bytesToNumberBE,taggedHash:w8,mod:W0.mod}}))();var GO=(()=>(0,MZ.isogenyMap)(G$,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(($)=>$.map((J)=>BigInt(J)))))(),XO=(()=>(0,IO.mapToCurveSimpleSWU)(G$,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:G$.create(BigInt("-11"))}))(),BZ=(()=>(0,MZ.createHasher)(CZ.secp256k1.ProjectivePoint,($)=>{let{x:J,y:q}=XO(G$.create($[0]));return GO(J,q)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:G$.ORDER,m:1,k:128,expand:"xmd",hash:T8.sha256}))();CZ.hashToCurve=(()=>BZ.hashToCurve)();CZ.encodeToCurve=(()=>BZ.encodeToCurve)()});var aJ=A((TZ)=>{Object.defineProperty(TZ,"__esModule",{value:!0});TZ.decodeHex=TZ.remove0x=void 0;var WO=P0(),UO=function($){return $.startsWith("0x")||$.startsWith("0X")?$.slice(2):$};TZ.remove0x=UO;var VO=function($){return(0,WO.hexToBytes)(TZ.remove0x($))};TZ.decodeHex=VO});var SZ=A((RZ)=>{Object.defineProperty(RZ,"__esModule",{value:!0});RZ.hexToPublicKey=RZ.convertPublicKeyFormat=RZ.getSharedPoint=RZ.getPublicKey=RZ.isValidPrivateKey=RZ.getValidSecret=void 0;var OO=YJ(),wZ=rY(),NO=HZ(),d$=E$(),KZ=e$(),BO=aJ(),CO=function(){var $;do $=(0,OO.randomBytes)(KZ.SECRET_KEY_LENGTH);while(!RZ.isValidPrivateKey($));return $};RZ.getValidSecret=CO;var DO=function($){return c$((0,d$.ellipticCurve)(),function(J){return J.utils.isValidPrivateKey($)},function(){return!0},function(){return!0})};RZ.isValidPrivateKey=DO;var HO=function($){return c$((0,d$.ellipticCurve)(),function(J){return J.getPublicKey($)},function(J){return J.getPublicKey($)},function(J){return J.getPublicKey($)})};RZ.getPublicKey=HO;var TO=function($,J,q){return c$((0,d$.ellipticCurve)(),function(I){return I.getSharedSecret($,J,q)},function(I){return I.getSharedSecret($,J)},function(I){return KO(I,$,J)})};RZ.getSharedPoint=TO;var jO=function($,J){return c$((0,d$.ellipticCurve)(),function(q){return q.getSharedSecret(BigInt(1),$,J)},function(){return $},function(){return $})};RZ.convertPublicKeyFormat=jO;var LO=function($){var J=(0,BO.decodeHex)($);return c$((0,d$.ellipticCurve)(),function(){return wO(J)},function(){return J},function(){return J})};RZ.hexToPublicKey=LO;function c$($,J,q,I){if($==="secp256k1")return J(NO.secp256k1);else if($==="x25519")return q(wZ.x25519);else if($==="ed25519")return I(wZ.ed25519);else throw Error("Not implemented")}var wO=function($){if($.length===KZ.ETH_PUBLIC_KEY_SIZE){var J=new Uint8Array(1+$.length);return J.set([4]),J.set($,1),J}return $},KO=function($,J,q){var I=$.utils.getExtendedPublicKey(J).scalar,Q=$.ExtendedPoint.fromHex(q).multiply(I);return Q.toRawBytes()}});var yZ=A((gZ)=>{Object.defineProperty(gZ,"__esModule",{value:!0});gZ.hkdf=void 0;gZ.extract=FZ;gZ.expand=kZ;var tJ=b$(),bZ=cJ(),EZ=c0();function FZ($,J,q){if((0,tJ.ahash)($),q===void 0)q=new Uint8Array($.outputLen);return(0,bZ.hmac)($,(0,EZ.toBytes)(q),(0,EZ.toBytes)(J))}var sJ=new Uint8Array([0]),PZ=new Uint8Array;function kZ($,J,q,I=32){if((0,tJ.ahash)($),(0,tJ.anumber)(I),I>255*$.outputLen)throw Error("Length should be <= 255*HashLen");let Q=Math.ceil(I/$.outputLen);if(q===void 0)q=PZ;let Y=new Uint8Array(Q*$.outputLen),Z=bZ.hmac.create($,J),G=Z._cloneInto(),z=new Uint8Array(Z.outputLen);for(let M=0;M<Q;M++)sJ[0]=M+1,G.update(M===0?PZ:z).update(q).update(sJ).digestInto(z),Y.set(z,$.outputLen*M),Z._cloneInto(G);return Z.destroy(),G.destroy(),z.fill(0),sJ.fill(0),Y.slice(0,I)}var EO=($,J,q,I,Q)=>kZ($,FZ($,J,q),I,Q);gZ.hkdf=EO});var uZ=A((mZ)=>{Object.defineProperty(mZ,"__esModule",{value:!0});mZ.getSharedKey=mZ.deriveKey=void 0;var FO=P0(),kO=yZ(),gO=uJ(),xO=function($,J,q){return(0,kO.hkdf)(gO.sha256,$,J,q,32)};mZ.deriveKey=xO;var yO=function(){var $=[];for(var J=0;J<arguments.length;J++)$[J]=arguments[J];return mZ.deriveKey(FO.concatBytes.apply(void 0,$))};mZ.getSharedKey=yO});var eJ=A((hZ)=>{Object.defineProperty(hZ,"__esModule",{value:!0});hZ._compat=void 0;var dZ=P0(),cZ=o("node:crypto"),mO=16,_O=globalThis.Deno!==void 0,vO=function($,J,q,I){var Q=$==="aes-256-gcm"||$==="chacha20-poly1305",Y=Q?mO:0,Z=Q?{authTagLength:Y}:void 0,G=function(M){var X=(0,cZ.createCipheriv)($,J,q,Z);if(Q&&I!==void 0)X.setAAD(I);var V=X.update(M),N=X.final(),H=Q?X.getAuthTag():new Uint8Array(0);return(0,dZ.concatBytes)(V,N,H)},z=function(M){var X=M.subarray(0,M.length-Y),V=M.subarray(M.length-Y),N=(0,cZ.createDecipheriv)($,J,q,Z);if(Q){if(I!==void 0)N.setAAD(I);N.setAuthTag(V)}if(!Q&&_O)N.setAutoPadding(!1);var H=N.update(X),D=N.final();return(0,dZ.concatBytes)(H,D)};return{encrypt:G,decrypt:z}};hZ._compat=vO});var pZ=A((iZ)=>{Object.defineProperty(iZ,"__esModule",{value:!0});iZ.aes256cbc=iZ.aes256gcm=void 0;var nZ=eJ(),uO=function($,J,q){return(0,nZ._compat)("aes-256-gcm",$,J,q)};iZ.aes256gcm=uO;var dO=function($,J,q){return(0,nZ._compat)("aes-256-cbc",$,J)};iZ.aes256cbc=dO});var sZ=A((oZ)=>{Object.defineProperty(oZ,"__esModule",{value:!0});oZ._hchacha20=void 0;var hO=function($,J,q,I){var Q=$[0],Y=$[1],Z=$[2],G=$[3],z=J[0],M=J[1],X=J[2],V=J[3],N=J[4],H=J[5],D=J[6],W=J[7],j=q[0],w=q[1],B=q[2],C=q[3];for(var R=0;R<20;R+=2)Q=Q+z|0,j=t(j^Q,16),N=N+j|0,z=t(z^N,12),Q=Q+z|0,j=t(j^Q,8),N=N+j|0,z=t(z^N,7),Y=Y+M|0,w=t(w^Y,16),H=H+w|0,M=t(M^H,12),Y=Y+M|0,w=t(w^Y,8),H=H+w|0,M=t(M^H,7),Z=Z+X|0,B=t(B^Z,16),D=D+B|0,X=t(X^D,12),Z=Z+X|0,B=t(B^Z,8),D=D+B|0,X=t(X^D,7),G=G+V|0,C=t(C^G,16),W=W+C|0,V=t(V^W,12),G=G+V|0,C=t(C^G,8),W=W+C|0,V=t(V^W,7),Q=Q+M|0,C=t(C^Q,16),D=D+C|0,M=t(M^D,12),Q=Q+M|0,C=t(C^Q,8),D=D+C|0,M=t(M^D,7),Y=Y+X|0,j=t(j^Y,16),W=W+j|0,X=t(X^W,12),Y=Y+X|0,j=t(j^Y,8),W=W+j|0,X=t(X^W,7),Z=Z+V|0,w=t(w^Z,16),N=N+w|0,V=t(V^N,12),Z=Z+V|0,w=t(w^Z,8),N=N+w|0,V=t(V^N,7),G=G+z|0,B=t(B^G,16),H=H+B|0,z=t(z^H,12),G=G+z|0,B=t(B^G,8),H=H+B|0,z=t(z^H,7);var P=0;I[P++]=Q,I[P++]=Y,I[P++]=Z,I[P++]=G,I[P++]=j,I[P++]=w,I[P++]=B,I[P++]=C};oZ._hchacha20=hO;var t=function($,J){return $<<J|$>>>32-J}});var JG=A((eZ)=>{Object.defineProperty(eZ,"__esModule",{value:!0});eZ.chacha20=eZ.xchacha20=void 0;var $q=P0(),tZ=eJ(),lO=sZ(),nO=function($,J,q){if(J.length!==24)throw Error("xchacha20's nonce must be 24 bytes");var I=new Uint32Array([1634760805,857760878,2036477234,1797285236]),Q=new Uint32Array(8);(0,lO._hchacha20)(I,(0,$q.u32)($),(0,$q.u32)(J.subarray(0,16)),Q);var Y=new Uint8Array(12);return Y.set([0,0,0,0]),Y.set(J.subarray(16),4),(0,tZ._compat)("chacha20-poly1305",(0,$q.u8)(Q),Y,q)};eZ.xchacha20=nO;var iO=function($,J,q){if(J.length!==12)throw Error("chacha20's nonce must be 12 bytes");return(0,tZ._compat)("chacha20-poly1305",$,J,q)};eZ.chacha20=iO});var zG=A((YG)=>{Object.defineProperty(YG,"__esModule",{value:!0});YG.aesDecrypt=YG.aesEncrypt=YG.symDecrypt=YG.symEncrypt=void 0;var qq=P0(),pO=YJ(),qG=pZ(),oO=JG(),IG=E$(),Jq=e$(),aO=function($,J,q){return QG(tO,$,J,q)};YG.symEncrypt=aO;var sO=function($,J,q){return QG(eO,$,J,q)};YG.symDecrypt=sO;YG.aesEncrypt=YG.symEncrypt;YG.aesDecrypt=YG.symDecrypt;function QG($,J,q,I){var Q=(0,IG.symmetricAlgorithm)();if(Q==="aes-256-gcm")return $(qG.aes256gcm,J,q,(0,IG.symmetricNonceLength)(),Jq.AEAD_TAG_LENGTH,I);else if(Q==="xchacha20")return $(oO.xchacha20,J,q,Jq.XCHACHA20_NONCE_LENGTH,Jq.AEAD_TAG_LENGTH,I);else if(Q==="aes-256-cbc")return $(qG.aes256cbc,J,q,16,0);else throw Error("Not implemented")}function tO($,J,q,I,Q,Y){var Z=(0,pO.randomBytes)(I),G=$(J,Z,Y),z=G.encrypt(q);if(Q===0)return(0,qq.concatBytes)(Z,z);var M=z.length-Q,X=z.subarray(0,M),V=z.subarray(M);return(0,qq.concatBytes)(Z,V,X)}function eO($,J,q,I,Q,Y){var Z=q.subarray(0,I),G=$(J,Uint8Array.from(Z),Y),z=q.subarray(I);if(Q===0)return G.decrypt(z);var M=z.subarray(0,Q),X=z.subarray(Q);return G.decrypt((0,qq.concatBytes)(X,M))}});var R8=A((g0)=>{var JN=g0&&g0.__createBinding||(Object.create?function($,J,q,I){if(I===void 0)I=q;var Q=Object.getOwnPropertyDescriptor(J,q);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[q]}};Object.defineProperty($,I,Q)}:function($,J,q,I){if(I===void 0)I=q;$[I]=J[q]}),K8=g0&&g0.__exportStar||function($,J){for(var q in $)if(q!=="default"&&!Object.prototype.hasOwnProperty.call(J,q))JN(J,$,q)};Object.defineProperty(g0,"__esModule",{value:!0});K8(SZ(),g0);K8(uZ(),g0);K8(aJ(),g0);K8(zG(),g0)});var Iq=A((WG)=>{Object.defineProperty(WG,"__esModule",{value:!0});WG.PublicKey=void 0;var MG=P0(),A8=R8(),qN=function(){function $(J){var q=(0,A8.convertPublicKeyFormat)(J,!0),I=(0,A8.convertPublicKeyFormat)(J,!1);this.data=q,this.dataUncompressed=q.length!==I.length?I:null}return $.fromHex=function(J){return new $((0,A8.hexToPublicKey)(J))},Object.defineProperty($.prototype,"_uncompressed",{get:function(){return this.dataUncompressed!==null?this.dataUncompressed:this.data},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"uncompressed",{get:function(){return Buffer.from(this._uncompressed)},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"compressed",{get:function(){return Buffer.from(this.data)},enumerable:!1,configurable:!0}),$.prototype.toBytes=function(J){if(J===void 0)J=!0;return J?this.data:this._uncompressed},$.prototype.toHex=function(J){if(J===void 0)J=!0;return(0,MG.bytesToHex)(this.toBytes(J))},$.prototype.decapsulate=function(J,q){if(q===void 0)q=!1;var I=this.toBytes(q),Q=J.multiply(this,q);return(0,A8.getSharedKey)(I,Q)},$.prototype.equals=function(J){return(0,MG.equalBytes)(this.data,J.data)},$}();WG.PublicKey=qN});var BG=A((OG)=>{Object.defineProperty(OG,"__esModule",{value:!0});OG.PrivateKey=void 0;var VG=P0(),w$=R8(),IN=Iq(),QN=function(){function $(J){if(J===void 0)this.data=(0,w$.getValidSecret)();else if((0,w$.isValidPrivateKey)(J))this.data=J;else throw Error("Invalid private key");this.publicKey=new IN.PublicKey((0,w$.getPublicKey)(this.data))}return $.fromHex=function(J){return new $((0,w$.decodeHex)(J))},Object.defineProperty($.prototype,"secret",{get:function(){return Buffer.from(this.data)},enumerable:!1,configurable:!0}),$.prototype.toHex=function(){return(0,VG.bytesToHex)(this.data)},$.prototype.encapsulate=function(J,q){if(q===void 0)q=!1;var I=this.publicKey.toBytes(q),Q=this.multiply(J,q);return(0,w$.getSharedKey)(I,Q)},$.prototype.multiply=function(J,q){if(q===void 0)q=!1;return(0,w$.getSharedPoint)(this.data,J.toBytes(!0),q)},$.prototype.equals=function(J){return(0,VG.equalBytes)(this.data,J.data)},$}();OG.PrivateKey=QN});var Qq=A((f8)=>{Object.defineProperty(f8,"__esModule",{value:!0});f8.PublicKey=f8.PrivateKey=void 0;var YN=BG();Object.defineProperty(f8,"PrivateKey",{enumerable:!0,get:function(){return YN.PrivateKey}});var ZN=Iq();Object.defineProperty(f8,"PublicKey",{enumerable:!0,get:function(){return ZN.PublicKey}})});var E8=A((h$)=>{Object.defineProperty(h$,"__esModule",{value:!0});h$.utils=h$.PublicKey=h$.PrivateKey=h$.ECIES_CONFIG=void 0;h$.encrypt=zN;h$.decrypt=WN;var XN=P0(),S8=E$(),K$=Qq(),l0=R8();function zN($,J){return Buffer.from(MN($,J))}function MN($,J){var q=new K$.PrivateKey,I=$ instanceof Uint8Array?new K$.PublicKey($):K$.PublicKey.fromHex($),Q=q.encapsulate(I,(0,S8.isHkdfKeyCompressed)()),Y=q.publicKey.toBytes((0,S8.isEphemeralKeyCompressed)()),Z=(0,l0.symEncrypt)(Q,J);return(0,XN.concatBytes)(Y,Z)}function WN($,J){return Buffer.from(UN($,J))}function UN($,J){var q=$ instanceof Uint8Array?new K$.PrivateKey($):K$.PrivateKey.fromHex($),I=(0,S8.ephemeralKeySize)(),Q=new K$.PublicKey(J.subarray(0,I)),Y=J.subarray(I),Z=Q.decapsulate(q,(0,S8.isHkdfKeyCompressed)());return(0,l0.symDecrypt)(Z,Y)}var VN=E$();Object.defineProperty(h$,"ECIES_CONFIG",{enumerable:!0,get:function(){return VN.ECIES_CONFIG}});var CG=Qq();Object.defineProperty(h$,"PrivateKey",{enumerable:!0,get:function(){return CG.PrivateKey}});Object.defineProperty(h$,"PublicKey",{enumerable:!0,get:function(){return CG.PublicKey}});h$.utils={aesEncrypt:l0.aesEncrypt,aesDecrypt:l0.aesDecrypt,symEncrypt:l0.symEncrypt,symDecrypt:l0.symDecrypt,decodeHex:l0.decodeHex,getValidSecret:l0.getValidSecret,remove0x:l0.remove0x}});var Yq=A((RD,HG)=>{function BN($,J=7){if($&&$.length>0)return $.slice(0,J)+"â€¦";else return""}HG.exports=BN});var M$=A((AD,jG)=>{var Zq=Yq();class TG{constructor($={}){this.filepath=$.filepath,this.envFilepath=$.envFilepath,this.key=$.key,this.privateKey=$.privateKey,this.privateKeyName=$.privateKeyName,this.command=$.command,this.message=$.message}missingEnvFile(){let J=`[MISSING_ENV_FILE] missing ${this.envFilepath} file (${this.filepath})`,q="[MISSING_ENV_FILE] https://github.com/dotenvx/dotenvx/issues/484",I=Error(J);return I.code="MISSING_ENV_FILE",I.help="[MISSING_ENV_FILE] https://github.com/dotenvx/dotenvx/issues/484",I}missingKey(){let J=`[MISSING_KEY] missing ${this.key} key`,q=Error(J);return q.code="MISSING_KEY",q}missingPrivateKey(){let J=`[MISSING_PRIVATE_KEY] could not decrypt ${this.key} using private key '${this.privateKeyName}=${Zq(this.privateKey)}'`,q="[MISSING_PRIVATE_KEY] https://github.com/dotenvx/dotenvx/issues/464",I=Error(J);return I.code="MISSING_PRIVATE_KEY",I.help="[MISSING_PRIVATE_KEY] https://github.com/dotenvx/dotenvx/issues/464",I}invalidPrivateKey(){let J=`[INVALID_PRIVATE_KEY] could not decrypt ${this.key} using private key '${this.privateKeyName}=${Zq(this.privateKey)}'`,q="[INVALID_PRIVATE_KEY] https://github.com/dotenvx/dotenvx/issues/465",I=Error(J);return I.code="INVALID_PRIVATE_KEY",I.help="[INVALID_PRIVATE_KEY] https://github.com/dotenvx/dotenvx/issues/465",I}looksWrongPrivateKey(){let J=`[WRONG_PRIVATE_KEY] could not decrypt ${this.key} using private key '${this.privateKeyName}=${Zq(this.privateKey)}'`,q="[WRONG_PRIVATE_KEY] https://github.com/dotenvx/dotenvx/issues/466",I=Error(J);return I.code="WRONG_PRIVATE_KEY",I.help="[WRONG_PRIVATE_KEY] https://github.com/dotenvx/dotenvx/issues/466",I}malformedEncryptedData(){let J=`[MALFORMED_ENCRYPTED_DATA] could not decrypt ${this.key} because encrypted data appears malformed`,q="[MALFORMED_ENCRYPTED_DATA] https://github.com/dotenvx/dotenvx/issues/467",I=Error(J);return I.code="MALFORMED_ENCRYPTED_DATA",I.help="[MALFORMED_ENCRYPTED_DATA] https://github.com/dotenvx/dotenvx/issues/467",I}decryptionFailed(){let J=this.message,q=Error(J);return q.code="DECRYPTION_FAILED",q}commandSubstitutionFailed(){let J=`[COMMAND_SUBSTITUTION_FAILED] could not eval ${this.key} containing command '${this.command}': ${this.message}`,q="[COMMAND_SUBSTITUTION_FAILED] https://github.com/dotenvx/dotenvx/issues/532",I=Error(J);return I.code="COMMAND_SUBSTITUTION_FAILED",I.help="[COMMAND_SUBSTITUTION_FAILED] https://github.com/dotenvx/dotenvx/issues/532",I}}jG.exports=TG});var Gq=A((fD,LG)=>{var{decrypt:CN}=E8(),l$=M$();function DN($,J,q,I){let Q,Y;if(!J.startsWith("encrypted:"))return J;if(I=I||"",I.length<=0)Y=new l$({key:$,privateKeyName:q,privateKey:I}).missingPrivateKey();else{let Z=I.split(",");for(let G of Z){let z=Buffer.from(G,"hex"),M=J.substring(10),X=Buffer.from(M,"base64");try{Q=CN(z,X).toString(),Y=null;break}catch(V){if(V.message==="Invalid private key")Y=new l$({key:$,privateKeyName:q,privateKey:I}).invalidPrivateKey();else if(V.message==="Unsupported state or unable to authenticate data")Y=new l$({key:$,privateKeyName:q,privateKey:I}).looksWrongPrivateKey();else if(V.message==="Point of length 65 was invalid. Expected 33 compressed bytes or 65 uncompressed bytes")Y=new l$({key:$,privateKeyName:q,privateKey:I}).malformedEncryptedData();else Y=new l$({key:$,privateKeyName:q,privateKey:I,message:V.message}).decryptionFailed()}}}if(Y)throw Y;return Q}LG.exports=DN});var KG=A((SD,wG)=>{function HN($){return $.replace(/[\r\n]+$/,"")}wG.exports=HN});var AG=A((ED,RG)=>{var{execSync:TN}=o("child_process"),jN=KG(),LN=M$();function wN($,J,q,I){return(J.match(/\$\(([^)]+(?:\)[^(]*)*)\)/g)||[]).reduce((Y,Z)=>{let G=Z.slice(2,-1),z;try{z=TN(G,{env:{...q,...I}}).toString()}catch(M){throw new LN({key:$,command:G,message:M.message.trim()}).commandSubstitutionFailed()}return z=jN(z),Y.replace(Z,z)},J)}RG.exports=wN});var SG=A((PD,fG)=>{function KN($){return $.replace(/\\\$/g,"$")}fG.exports=KN});var zq=A((bD,EG)=>{var RN=Gq(),AN=AG(),fN=SG();class Xq{static LINE=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;constructor($,J=null,q=process.env,I=!1,Q=null){this.src=$,this.privateKey=J,this.privateKeyName=Q,this.processEnv=q,this.overload=I,this.parsed={},this.preExisted={},this.injected={},this.errors=[],this.runningParsed={},this.literals={}}run(){let $=this.getLines(),J;while((J=Xq.LINE.exec($))!==null){let q=J[1],I=J[2],Q=this.quote(I);if(this.parsed[q]=this.clean(I,Q),!this.overload&&this.inProcessEnv(q))this.parsed[q]=this.processEnv[q];try{this.parsed[q]=this.decrypt(q,this.parsed[q])}catch(Z){this.errors.push(Z)}let Y=!1;if(Q!=="'"&&(!this.inProcessEnv(q)||this.processEnv[q]===this.parsed[q])){let Z=this.parsed[q];try{this.parsed[q]=this.eval(q,Z)}catch(G){this.errors.push(G)}if(Z!==this.parsed[q])Y=!0}if(!Y&&Q!=="'"&&(!this.processEnv[q]||this.overload))this.parsed[q]=fN(this.expand(this.parsed[q]));if(Q==="'")this.literals[q]=this.parsed[q];if(this.runningParsed[q]=this.parsed[q],Object.prototype.hasOwnProperty.call(this.processEnv,q)&&!this.overload)this.preExisted[q]=this.processEnv[q];else this.injected[q]=this.parsed[q]}return{parsed:this.parsed,processEnv:this.processEnv,injected:this.injected,preExisted:this.preExisted,errors:this.errors}}trimmer($){return($||"").trim()}quote($){let q=this.trimmer($)[0],I="";switch(q){case"'":I="'";break;case'"':I='"';break;case"`":I="`";break;default:I=""}return I}clean($,J){let q=this.trimmer($);if(q=q.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),J==='"')q=q.replace(/\\n/g,`
`),q=q.replace(/\\r/g,"\r"),q=q.replace(/\\t/g,"\t");return q}decrypt($,J){return RN($,J,this.privateKeyName,this.privateKey)}eval($,J){return AN($,J,this.processEnv,this.runningParsed)}expand($){let J={...this.runningParsed,...this.processEnv};if(this.overload)J={...this.processEnv,...this.runningParsed};let q=/(?<!\\)\${([^{}]+)}|(?<!\\)\$([A-Za-z_][A-Za-z0-9_]*)/g,I=$,Q;while((Q=q.exec(I))!==null){let[Y,Z,G]=Q,z=Z||G,M=/(:\+|\+|:-|-)/,X=z.match(M),V=X?X[0]:null,N=z.split(V),H,D,W=N.shift();if([":+","+"].includes(V))H=J[W]?N.join(V):"",D=null;else H=N.join(V),D=J[W];if(D)I=I.replace(Y,D);else I=I.replace(Y,H);if(I===J[W])break;if(this.literals[W])break;q.lastIndex=0}return I}inProcessEnv($){return Object.prototype.hasOwnProperty.call(this.processEnv,$)}getLines(){return(this.src||"").toString().replace(/\r\n?/mg,`
`)}}EG.exports=Xq});var W$=A((FD,PG)=>{var SN=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function EN($,J=!1,q=!1){let I={},Q=$.toString();if(!q)Q=Q.replace(/\r\n?/mg,`
`);let Y;while((Y=SN.exec(Q))!=null){let Z=Y[1],G=Y[2]||"";G=G.trim();let z=G[0];if(G=G.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),z==='"'&&!J)G=G.replace(/\\n/g,`
`),G=G.replace(/\\r/g,"\r"),G=G.replace(/\\t/g,"\t");I[Z]=G}return I}PG.exports=EN});var FG=A((kD,bG)=>{function PN($){let J;try{J=new URL($)}catch(I){throw Error(`INVALID_DOTENV_KEY: ${I.message}`)}let q=J.searchParams.get("environment");if(!q)throw Error("INVALID_DOTENV_KEY: Missing environment part");return q}bG.exports=PN});var Mq=A((gD,kG)=>{var bN=o("fs");function FN($){let J=bN.readFileSync($);if(J.length>=2&&J[0]===255&&J[1]===254)return"utf16le";if(J.length>=3&&J[0]===239&&J[1]===187&&J[2]===191)return"utf8";return"utf8"}kG.exports=FN});var Wq=A((xD,gG)=>{var kN=o("path");function gN($){let J=kN.basename($),I=[...J.split(".").slice(2)];if(I.length===0)return J.replace(".env","development");if(I.length===1)return I[0];if(I.length===2)return I.join("_");return I.slice(0,2).join("_")}gG.exports=gN});var U$=A((yD,xG)=>{var xN=o("path"),yN=Wq();function mN($){let J=xN.basename($).toLowerCase();if(J===".env")return"DOTENV_PRIVATE_KEY";return`DOTENV_PRIVATE_KEY_${yN(J).toUpperCase()}`}xG.exports=mN});var R$=A((mD,yG)=>{var _N=o("path"),vN=Wq();function uN($){let J=_N.basename($).toLowerCase();if(J===".env")return"DOTENV_PUBLIC_KEY";return`DOTENV_PUBLIC_KEY_${vN(J).toUpperCase()}`}yG.exports=uN});var Uq=A((_D,_G)=>{var dN=o("path"),cN=o("child_process"),hN=U$(),lN=R$();class mG{constructor($){this.envFilepath=$}run(){let $={};try{let J=dN.resolve(process.cwd()),q=o.resolve("@dotenvx/dotenvx-pro",{paths:[J]}),{keypair:I}=o(q);$=I(this.envFilepath)}catch(J){try{let q=cN.execSync(`dotenvx-pro keypair -f ${this.envFilepath}`,{stdio:["pipe","pipe","ignore"]}).toString().trim();$=JSON.parse(q)}catch(q){let I=hN(this.envFilepath),Q=lN(this.envFilepath);$[I]=null,$[Q]=null}}return $}}_G.exports=mG});var dG=A((uD,uG)=>{var vG=m0(),nN=W$(),iN=R$();function rN($){if(process.env[$]&&process.env[$].length>0)return process.env[$]}function pN($,J){if(vG.existsSync(J)){let q=vG.readFileX(J),I=nN(q);if(I[$]&&I[$].length>0)return I[$]}}function oN($){let J=null,q=iN($);if(J=rN(q),J)return J;if(J=pN(q,$),J)return J;return null}uG.exports=oN});var iG=A((dD,nG)=>{var P8=m0(),Vq=o("path"),lG=W$(),aN=U$();function cG($){if(process.env[$]&&process.env[$].length>0)return process.env[$]}function hG($,J,q=null){let I=Vq.resolve(Vq.dirname(J),".env.keys");if(q)I=Vq.resolve(q);if(P8.existsSync(I)){let Q=P8.readFileX(I),Y=lG(Q);if(Y[$]&&Y[$].length>0)return Y[$]}}function sN($){if(!P8.existsSync($))return null;let J=P8.readFileX($),q=lG(J),I;for(let Q of Object.keys(q))if(Q==="DOTENV_PUBLIC_KEY"||Q.startsWith("DOTENV_PUBLIC_KEY"))I=Q;if(I)return I.replace("DOTENV_PUBLIC_KEY","DOTENV_PRIVATE_KEY");return null}function tN($,J=null){let q=null,I=aN($);if(q=cG(I),q)return q;if(q=hG(I,$,J),q)return q;if(I=sN($),I){if(q=cG(I),q)return q;if(q=hG(I,$,J),q)return q}return null}nG.exports=tN});var b8=A((cD,pG)=>{var eN=R$(),$4=dG(),J4=U$(),q4=iG();class rG{constructor($=".env",J=null){this.envFile=$,this.envKeysFilepath=J}run(){let $={},J=this._envFilepaths();for(let q of J){let I=eN(q),Q=$4(q);$[I]=Q;let Y=J4(q),Z=q4(q,this.envKeysFilepath);$[Y]=Z}return $}_envFilepaths(){if(!Array.isArray(this.envFile))return[this.envFile];return this.envFile}}pG.exports=rG});var Oq=A((hD,oG)=>{var I4=U$(),Q4=Uq(),Y4=b8();function Z4($,J=null){let q=I4($),I=new Q4($).run(),Q=new Y4($,J).run();return I[q]||Q[q]}oG.exports=Z4});var sG=A((lD,aG)=>{function G4($){return Object.keys($).filter((J)=>J.startsWith("DOTENV_PRIVATE_KEY"))}aG.exports=G4});var eG=A((nD,tG)=>{function X4($){if($==="DOTENV_PRIVATE_KEY")return".env";return`.env.${$.substring(19).split("_").join(".").toLowerCase()}`}tG.exports=X4});var Nq=A((iD,qX)=>{var z4=sG(),M4=eG(),$X=[{type:"envFile",value:".env"}],JX=[{type:"envVaultFile",value:".env.vault"}];function W4($){let J=[];for(let q of $){let I=M4(q);J.push({type:"envFile",value:I})}return J}function U4($=[],J,q=""){let I=z4(J);if(!$||$.length<=0){if(I.length>0)return W4(I);if(q.length>0)return JX;else return $X}else{let Q=!1;for(let Y of $){if(q.length>0&&Y.type==="envVaultFile")Q=!0;if(q.length<=0&&Y.type==="envFile")Q=!0}if(Q)return $;if(q.length>0)return[...JX,...$];else return[...$X,...$]}}qX.exports=U4});var Dq=A((rD,YX)=>{var Bq=m0(),IX=o("path"),V4=yI(),Cq=zq(),O4=M$(),N4=W$(),B4=FG(),C4=Mq(),D4=Oq(),H4=U$(),T4=Nq();class QX{constructor($=[],J=!1,q="",I=process.env,Q=null){this.envs=T4($,I,q),this.overload=J,this.DOTENV_KEY=q,this.processEnv=I,this.envKeysFilepath=Q,this.processedEnvs=[],this.readableFilepaths=new Set,this.readableStrings=new Set,this.uniqueInjectedKeys=new Set}run(){for(let $ of this.envs)if($.type==="envVaultFile")this._injectEnvVaultFile($.value);else if($.type==="envFile")this._injectEnvFile($.value);else if($.type==="env")this._injectEnv($.value);return{processedEnvs:this.processedEnvs,readableStrings:[...this.readableStrings],readableFilepaths:[...this.readableFilepaths],uniqueInjectedKeys:[...this.uniqueInjectedKeys]}}_injectEnv($){let J={};J.type="env",J.string=$;try{let{parsed:q,errors:I,injected:Q,preExisted:Y}=new Cq($,null,this.processEnv,this.overload).run();J.parsed=q,J.errors=I,J.injected=Q,J.preExisted=Y,this.inject(J.parsed),this.readableStrings.add($);for(let Z of Object.keys(Q))this.uniqueInjectedKeys.add(Z)}catch(q){J.errors=[q]}this.processedEnvs.push(J)}_injectEnvFile($){let J={};J.type="envFile",J.filepath=$;let q=IX.resolve($);try{let I=C4(q),Q=Bq.readFileX(q,{encoding:I});this.readableFilepaths.add($);let Y=D4($,this.envKeysFilepath),Z=H4($),{parsed:G,errors:z,injected:M,preExisted:X}=new Cq(Q,Y,this.processEnv,this.overload,Z).run();J.parsed=G,J.errors=z,J.injected=M,J.preExisted=X,this.inject(J.parsed);for(let V of Object.keys(M))this.uniqueInjectedKeys.add(V)}catch(I){if(I.code==="ENOENT"||I.code==="EISDIR")J.errors=[new O4({envFilepath:$,filepath:q}).missingEnvFile()];else J.errors=[I]}this.processedEnvs.push(J)}_injectEnvVaultFile($){let J={};J.type="envVaultFile",J.filepath=$;let q=IX.resolve($);if(this.readableFilepaths.add($),!Bq.existsSync(q)){let G=`you set DOTENV_KEY but your .env.vault file is missing: ${q}`,z=Error(G);throw z.code="MISSING_ENV_VAULT_FILE",z}if(this.DOTENV_KEY.length<1){let G=`your DOTENV_KEY appears to be blank: '${this.DOTENV_KEY}'`,z=Error(G);throw z.code="MISSING_DOTENV_KEY",z}let I,Q=this._dotenvKeys(),Y=this._parsedVault(q);for(let Z=0;Z<Q.length;Z++)try{let G=Q[Z].trim();I=this._decrypted(G,Y);break}catch(G){if(Z+1>=Q.length)throw G}try{let{parsed:Z,errors:G,injected:z,preExisted:M}=new Cq(I,null,this.processEnv,this.overload).run();J.parsed=Z,J.errors=G,J.injected=z,J.preExisted=M,this.inject(J.parsed);for(let X of Object.keys(z))this.uniqueInjectedKeys.add(X)}catch(Z){J.errors=[Z]}this.processedEnvs.push(J)}inject($){for(let J of Object.keys($))this.processEnv[J]=$[J]}_dotenvKeys(){return this.DOTENV_KEY.split(",")}_parsedVault($){let J=Bq.readFileX($);return N4(J)}_decrypted($,J){let I=`DOTENV_VAULT_${B4($).toUpperCase()}`,Q=J[I];if(!Q){let Y=Error(`NOT_FOUND_DOTENV_ENVIRONMENT: cannot locate environment ${I} in your .env.vault file`);throw Y.code="NOT_FOUND_DOTENV_ENVIRONMENT",Y}return V4(Q,$)}}YX.exports=QX});var GX=A((pD,ZX)=>{var{encrypt:j4}=E8();function L4($,J){let q=j4(J,Buffer.from($));return`encrypted:${Buffer.from(q,"hex").toString("base64")}`}ZX.exports=L4});var zX=A((oD,XX)=>{var w4=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function K4($){let J={},q=$.toString();q=q.replace(/\r\n?/mg,`
`);let I;while((I=w4.exec(q))!=null){let Q=I[1],Y=I[2]||"";Y=Y.trim();let Z=Y[0];if(Y=Y.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),Z===Y[0])J[Q]="";else J[Q]=Z}return J}XX.exports=K4});var WX=A((aD,MX)=>{function R4($){return $.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}MX.exports=R4});var VX=A((sD,UX)=>{function A4($){return $.replace(/\$/g,"$$$$")}UX.exports=A4});var Hq=A((tD,OX)=>{var f4=zX(),S4=W$(),E4=WX(),P4=VX();function b4($,J,q){let I,Q="",Y=S4($,!0,!0),Z=f4($);if(Object.prototype.hasOwnProperty.call(Y,J)){let G=Z[J];Q+=`${J}=${G}${q}${G}`;let z=Y[J],M=E4(z),X="";if(M===""){X="$";let H=$.match(new RegExp(`${J}\\s*=\\s*

`,"m"));if(G===""&&H){let D=H[0].match(/\n/g).length-1;for(let W=0;W<D;W++)Q+=`
`}}let V=new RegExp("^(\\s*)?(export\\s+)?"+J+"\\s*=\\s*[\"'`]?"+M+"[\"'`]?"+X,"gm"),N=P4(Q);I=$.replace(V,`$1$2${N}`)}else{if(Q+=`${J}="${q}"`,$.endsWith(`
`))Q=Q+`
`;else Q=`
`+Q;I=$+Q}return I}OX.exports=b4});var BX=A((eD,NX)=>{var F4=R$(),k4=Uq(),g4=b8();function x4($){let J=F4($),q=new k4($).run(),I=new g4($).run();return q[J]||I[J]}NX.exports=x4});var HX=A(($H,DX)=>{var{PrivateKey:CX}=E8();function y4($){let J;if($)J=new CX(Buffer.from($,"hex"));else J=new CX;let q=J.publicKey.toHex(),I=J.secret.toString("hex");return{publicKey:q,privateKey:I}}DX.exports=y4});var jX=A((JH,TX)=>{var m4=/^encrypted:.+/;function _4($){return m4.test($)}TX.exports=_4});var RX=A((qH,KX)=>{var F8=m0(),x0=o("path"),v4=M$(),u4=U$(),d4=R$(),c4=GX(),h4=Gq(),l4=Hq(),n4=W$(),i4=Mq(),r4=Nq(),p4=Oq(),o4=BX(),LX=HX(),n$=Yq(),a4=jX();class wX{constructor($,J,q=[],I=!0,Q=null){this.envs=r4(q,process.env),this.key=$,this.value=J,this.encrypt=I,this.envKeysFilepath=Q,this.processedEnvs=[],this.changedFilepaths=new Set,this.unchangedFilepaths=new Set,this.readableFilepaths=new Set}run(){for(let $ of this.envs)if($.type==="envFile")this._setEnvFile($.value);return{processedEnvs:this.processedEnvs,changedFilepaths:[...this.changedFilepaths],unchangedFilepaths:[...this.unchangedFilepaths]}}_setEnvFile($){let J={};J.key=this.key||null,J.value=this.value||null,J.type="envFile";let q=x0.basename($),I=x0.resolve($);J.filepath=I,J.envFilepath=$,J.changed=!1;try{let Q=this._detectEncoding(I),Y=F8.readFileX(I,{encoding:Q}),Z=n4(Y);J.originalValue=Z[J.key]||null;let G=!a4(J.originalValue);if(this.readableFilepaths.add($),this.encrypt){let X,V,N=d4($),H=u4($),D=p4($,this.envKeysFilepath),W=o4($),j=x0.join(x0.dirname(I),".env.keys");if(this.envKeysFilepath)j=x0.resolve(this.envKeysFilepath);let w=x0.relative(x0.dirname(I),j);if(D){let B=LX(D);if(X=B.publicKey,V=B.privateKey,J.originalValue)J.originalValue=h4(J.key,J.originalValue,H,V);if(W&&W!==X){let C=Error(`derived public key (${n$(X)}) does not match the existing public key (${n$(W)})`);throw C.code="INVALID_DOTENV_PRIVATE_KEY",C.help=`debug info: ${H}=${n$(D)} (derived ${N}=${n$(X)} vs existing ${N}=${n$(W)})`,C}if(!W){let C=this._preserveShebang(Y),R=C.firstLinePreserved;Y=C.envSrc;let P=this._prependPublicKey(N,X,q,w);Y=`${R}${P}
${Y}`}}else if(W)X=W;else{let B="";if(F8.existsSync(j))B=F8.readFileX(j);let C=this._preserveShebang(Y),R=C.firstLinePreserved;Y=C.envSrc;let P=LX();X=P.publicKey,V=P.privateKey;let E=this._prependPublicKey(N,X,q,w),k=["#/------------------!DOTENV_PRIVATE_KEYS!-------------------/","#/ private decryption keys. DO NOT commit to source control /","#/     [how it works](https://dotenvx.com/encryption)       /","#/----------------------------------------------------------/"].join(`
`),f=[`# ${q}`,`${H}=${V}`,""].join(`
`);Y=`${R}${E}
${Y}`,B=B.length>1?B:`${k}
`,B=`${B}
${f}`,F8.writeFileX(j,B),J.privateKeyAdded=!0,J.envKeysFilepath=this.envKeysFilepath||x0.join(x0.dirname($),x0.basename(j))}J.publicKey=X,J.privateKey=V,J.encryptedValue=c4(this.value,X),J.privateKeyName=H}let z=G&&this.encrypt,M=this.value!==J.originalValue;if(z||M)J.envSrc=l4(Y,this.key,J.encryptedValue||this.value),this.changedFilepaths.add($),J.changed=!0;else J.envSrc=Y,this.unchangedFilepaths.add($),J.changed=!1}catch(Q){if(Q.code==="ENOENT")J.error=new v4({envFilepath:$,filepath:I}).missingEnvFile();else J.error=Q}this.processedEnvs.push(J)}_detectEncoding($){return i4($)}_prependPublicKey($,J,q,I=".env.keys"){let Q=I===".env.keys"?"":` # -fk ${I}`;return["#/-------------------[DOTENV_PUBLIC_KEY]--------------------/","#/            public-key encryption for .env files          /","#/       [how it works](https://dotenvx.com/encryption)     /","#/----------------------------------------------------------/",`${$}="${J}"${Q}`,"",`# ${q}`].join(`
`)}_preserveShebang($){let[J,...q]=$.split(`
`),I="";if(J.startsWith("#!"))I=J+`
`,$=q.join(`
`);return{firstLinePreserved:I,envSrc:$}}}KX.exports=wX});var SX=A((IH,fX)=>{var s4=Dq(),t4=M$();class AX{constructor($,J=[],q=!1,I="",Q=!1,Y=null){this.key=$,this.envs=J,this.overload=q,this.DOTENV_KEY=I,this.all=Q,this.envKeysFilepath=Y}run(){let $={...process.env},{processedEnvs:J}=new s4(this.envs,this.overload,this.DOTENV_KEY,$,this.envKeysFilepath).run(),q=[];for(let I of J)for(let Q of I.errors)q.push(Q);if(this.key){let I={},Q=$[this.key];if(I[this.key]=Q,Q===void 0)q.push(new t4({key:this.key}).missingKey());return{parsed:I,errors:q}}else{if(this.all)return{parsed:$,errors:q};let I={};for(let Q of J)if(Q.parsed)for(let Y of Object.keys(Q.parsed))I[Y]=$[Y];return{parsed:I,errors:q}}}}fX.exports=AX});var PX=A((QH,EX)=>{var e4=m0(),$B=[".env.vault",".env.project",".env.keys",".env.me",".env.x",".env.example"];function JB($){try{return e4.readdirSync($).filter((I)=>I.startsWith(".env")&&!I.endsWith(".previous")&&!$B.includes(I))}catch(J){if(J.code==="ENOENT"){let q=Error(`missing directory (${$})`);throw q.code="MISSING_DIRECTORY",q}else throw J}}EX.exports=JB});var xX=A((YH,gX)=>{var k8=m0(),bX=o("path"),qB=M$(),IB=PX(),QB=Hq(),FX=W$();class kX{constructor($=".",J){this.directory=$,this.envFile=J||IB($),this.exampleFilename=".env.example",this.exampleFilepath=bX.resolve(this.directory,this.exampleFilename)}run(){if(this.envFile.length<1){let M=Error("no .env* files found");throw M.code="MISSING_ENV_FILES",M.help='? add one with [echo "HELLO=World" > .env] and then run [dotenvx genexample]',M}let $=new Set,J=new Set,q=this._envFilepaths(),I={},Q={},Y=`# ${this.exampleFilename} - generated with dotenvx
`;for(let Z of q){let G=bX.resolve(this.directory,Z);if(!k8.existsSync(G)){let X=new qB({envFilepath:Z,filepath:G}).missingEnvFile();throw X.help=`? add it with [echo "HELLO=World" > ${Z}] and then run [dotenvx genexample]`,X}let z=k8.readFileX(G),M=FX(z);for(let X in M)$.add(X),z=QB(z,X,"");Y+=`
${z}`}if(!k8.existsSync(this.exampleFilepath))for(let Z of[...$])J.add(Z),I[Z]="";else{Y=k8.readFileX(this.exampleFilepath);let Z=FX(Y);for(let G of[...$])if(G in Z)Q[G]=Z[G];else Y+=`${G}=''
`,J.add(G),I[G]=""}return{envExampleFile:Y,envFile:this.envFile,exampleFilepath:this.exampleFilepath,addedKeys:[...J],injected:I,preExisted:Q}}_envFilepaths(){if(!Array.isArray(this.envFile))return[this.envFile];return this.envFile}}gX.exports=kX});var mX=A((ZH,yX)=>{function YB($){let J=process.env.DOTENV_ENV||"development";if($==="nextjs"){let q=["development","test","production"].includes(J)&&J;return[q&&{type:"envFile",value:`.env.${q}.local`},q!=="test"&&{type:"envFile",value:".env.local"},q&&{type:"envFile",value:`.env.${q}`},{type:"envFile",value:".env"}].filter(Boolean)}else if($==="flow")return[{type:"envFile",value:`.env.${J}.local`},{type:"envFile",value:`.env.${J}`},{type:"envFile",value:".env.local"},{type:"envFile",value:".env"},{type:"envFile",value:".env.defaults"}];else throw Error(`INVALID_CONVENTION: '${$}'. permitted conventions: ['nextjs', 'flow']`)}yX.exports=YB});var vX=A((GH,_X)=>{var ZB=o("os"),GB=o("path");function XB($){if($[0]==="~")return GB.join(ZB.homedir(),$.slice(1));return $}_X.exports=XB});var cX=A((XH,dX)=>{var uX=vX();function zB($){let J=[];if($&&$.path)if(!Array.isArray($.path))J=[uX($.path)];else{J=[];for(let q of $.path)J.push(uX(q))}return J}dX.exports=zB});var nX=A((zH,lX)=>{var{logger:Tq}=m8();class hX{constructor($={}){this.DOTENV_KEY=$.DOTENV_KEY||process.env.DOTENV_KEY}dotenvKey(){if(this.DOTENV_KEY)Tq.warn("[DEPRECATION NOTICE] Setting DOTENV_KEY with .env.vault is deprecated."),Tq.warn("[DEPRECATION NOTICE] Run [dotenvx ext vault migrate] for instructions on converting your .env.vault file to encrypted .env files (using public key encryption algorithm secp256k1)"),Tq.warn("[DEPRECATION NOTICE] Read more at [https://github.com/dotenvx/dotenvx/blob/main/CHANGELOG.md#0380]")}}lX.exports=hX});var pX=A((MH,rX)=>{var iX=o("path"),MB=mX(),WB=cX(),UB=nX();function VB($,J=void 0){let q=WB($),I=[];if($.convention)I=MB($.convention).concat(I);new UB({DOTENV_KEY:J}).dotenvKey();for(let Q of q)if(J)I.push({type:"envVaultFile",value:iX.join(iX.dirname(Q),".env.vault")});else I.push({type:"envFile",value:Q});return I}rX.exports=VB});var Y5=A((WH,Q5)=>{function oX($){return Array.isArray($)?$:[$]}var wq="",aX=" ",jq="\\",OB=/^\s+$/,NB=/(?:[^\\]|^)\\$/,BB=/^\\!/,CB=/^\\#/,DB=/\r?\n/g,HB=/^\.*\/|^\.+$/,Lq="/",eX="node-ignore";if(typeof Symbol<"u")eX=Symbol.for("node-ignore");var sX=eX,TB=($,J,q)=>Object.defineProperty($,J,{value:q}),jB=/([0-z])-([0-z])/g,$5=()=>!1,LB=($)=>$.replace(jB,(J,q,I)=>q.charCodeAt(0)<=I.charCodeAt(0)?J:wq),wB=($)=>{let{length:J}=$;return $.slice(0,J-J%2)},KB=[[/^\uFEFF/,()=>wq],[/((?:\\\\)*?)(\\?\s+)$/,($,J,q)=>J+(q.indexOf("\\")===0?aX:wq)],[/(\\+?)\s/g,($,J)=>{let{length:q}=J;return J.slice(0,q-q%2)+aX}],[/[\\$.|*+(){^]/g,($)=>`\\${$}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return!/\/(?!$)/.test(this)?"(?:^|\\/)":"^"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,($,J,q)=>J+6<q.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,($,J,q)=>{let I=q.replace(/\\\*/g,"[^\\/]*");return J+I}],[/\\\\\\(?=[$.|*+(){^])/g,()=>jq],[/\\\\/g,()=>jq],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,($,J,q,I,Q)=>J===jq?`\\[${q}${wB(I)}${Q}`:Q==="]"?I.length%2===0?`[${LB(q)}${I}]`:"[]":"[]"],[/(?:[^*])$/,($)=>/\/$/.test($)?`${$}$`:`${$}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,($,J)=>{return`${J?`${J}[^/]+`:"[^/]*"}(?=$|\\/$)`}]],tX=Object.create(null),RB=($,J)=>{let q=tX[$];if(!q)q=KB.reduce((I,[Q,Y])=>I.replace(Q,Y.bind($)),$),tX[$]=q;return J?new RegExp(q,"i"):new RegExp(q)},Kq=($)=>typeof $==="string",AB=($)=>$&&Kq($)&&!OB.test($)&&!NB.test($)&&$.indexOf("#")!==0,fB=($)=>$.split(DB);class J5{constructor($,J,q,I){this.origin=$,this.pattern=J,this.negative=q,this.regex=I}}var SB=($,J)=>{let q=$,I=!1;if($.indexOf("!")===0)I=!0,$=$.substr(1);$=$.replace(BB,"!").replace(CB,"#");let Q=RB($,J);return new J5(q,$,I,Q)},EB=($,J)=>{throw new J($)},n0=($,J,q)=>{if(!Kq($))return q(`path must be a string, but got \`${J}\``,TypeError);if(!$)return q("path must not be empty",TypeError);if(n0.isNotRelative($))return q(`path should be a \`path.relative()\`d string, but got "${J}"`,RangeError);return!0},q5=($)=>HB.test($);n0.isNotRelative=q5;n0.convert=($)=>$;class I5{constructor({ignorecase:$=!0,ignoreCase:J=$,allowRelativePaths:q=!1}={}){TB(this,sX,!0),this._rules=[],this._ignoreCase=J,this._allowRelativePaths=q,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern($){if($&&$[sX]){this._rules=this._rules.concat($._rules),this._added=!0;return}if(AB($)){let J=SB($,this._ignoreCase);this._added=!0,this._rules.push(J)}}add($){if(this._added=!1,oX(Kq($)?fB($):$).forEach(this._addPattern,this),this._added)this._initCache();return this}addPattern($){return this.add($)}_testOne($,J){let q=!1,I=!1;return this._rules.forEach((Q)=>{let{negative:Y}=Q;if(I===Y&&q!==I||Y&&!q&&!I&&!J)return;if(Q.regex.test($))q=!Y,I=Y}),{ignored:q,unignored:I}}_test($,J,q,I){let Q=$&&n0.convert($);return n0(Q,$,this._allowRelativePaths?$5:EB),this._t(Q,J,q,I)}_t($,J,q,I){if($ in J)return J[$];if(!I)I=$.split(Lq);if(I.pop(),!I.length)return J[$]=this._testOne($,q);let Q=this._t(I.join(Lq)+Lq,J,q,I);return J[$]=Q.ignored?Q:this._testOne($,q)}ignores($){return this._test($,this._ignoreCache,!1).ignored}createFilter(){return($)=>!this.ignores($)}filter($){return oX($).filter(this.createFilter())}test($){return this._test($,this._testCache,!0)}}var g8=($)=>new I5($),PB=($)=>n0($&&n0.convert($),$,$5);g8.isPathValid=PB;g8.default=g8;Q5.exports=g8;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let $=(q)=>/^\\\\\?\\/.test(q)||/["<>|\u0000-\u001F]+/u.test(q)?q:q.replace(/\\/g,"/");n0.convert=$;let J=/^[a-z]:\//i;n0.isNotRelative=(q)=>J.test(q)||q5(q)}});var X5=A((UH,G5)=>{var Z5=m0(),bB=Y5();function FB(){if(!Z5.existsSync(".gitignore"))return!1;let $=Z5.readFileX(".gitignore");if(!bB($).add($).ignores(".env.keys"))return!1;return!0}G5.exports=FB});var W5=A((VH,M5)=>{var Rq=o("path"),{setLogLevel:z5,logger:Q0}=m8(),{getColor:kB,bold:gB}=y8(),xB=AI(),yB=Dq(),mB=RX(),_B=SX(),vB=b8(),uB=xX(),Aq=pX(),dB=zq(),cB=m0(),hB=X5(),lB=function($={}){let J=process.env;if($&&$.processEnv!=null)J=$.processEnv;let q=$.overload||$.override,I=$.ignore||[],Q=$.strict,Y=$.envKeysFile,Z=process.env.DOTENV_KEY;if($&&$.DOTENV_KEY)Z=$.DOTENV_KEY;if($)z5($);try{let G=Aq($,Z),{processedEnvs:z,readableFilepaths:M,uniqueInjectedKeys:X}=new yB(G,q,Z,J,Y).run(),V,N={};for(let D of z){if(D.type==="envVaultFile")Q0.verbose(`loading env from encrypted ${D.filepath} (${Rq.resolve(D.filepath)})`),Q0.debug(`decrypting encrypted env from ${D.filepath} (${Rq.resolve(D.filepath)})`);if(D.type==="envFile")Q0.verbose(`loading env from ${D.filepath} (${Rq.resolve(D.filepath)})`);for(let W of D.errors||[]){if(I.includes(W.code)){Q0.verbose(`ignored: ${W.message}`);continue}if(Q)throw W;if(V=W,W.code==="MISSING_ENV_FILE"){if(!$.convention){if(console.error(W.message),W.help)console.error(W.help)}}else if(console.error(W.message),W.help)console.error(W.help)}Object.assign(N,D.injected||{}),Object.assign(N,D.preExisted||{}),Q0.debug(D.parsed);for(let[W,j]of Object.entries(D.injected||{}))Q0.verbose(`${W} set`),Q0.debug(`${W} set to ${j}`);for(let[W,j]of Object.entries(D.preExisted||{}))Q0.verbose(`${W} pre-exists (protip: use --overload to override)`),Q0.debug(`${W} pre-exists as ${j} (protip: use --overload to override)`)}let H=`injecting env (${X.length})`;if(M.length>0)H+=` from ${M.join(", ")}`;if(Q0.successv(H),V)return{parsed:N,error:V};else return{parsed:N}}catch(G){if(Q)throw G;if(Q0.error(G.message),G.help)Q0.help(G.help);return{parsed:{},error:G}}},nB=function($,J={}){let q=process.env;if(J&&J.processEnv!=null)q=J.processEnv;let I=J.privateKey||null,Q=J.overload||J.override,{parsed:Y,errors:Z}=new dB($,I,q,Q).run();for(let G of Z)if(console.error(G.message),G.help)console.error(G.help);return Y},iB=function($,J,q={}){let I=!0;if(q.plain)I=!1;else if(q.encrypt===!1)I=!1;let Q=Aq(q),Y=q.envKeysFile,{processedEnvs:Z,changedFilepaths:G,unchangedFilepaths:z}=new mB($,J,Q,I,Y).run(),M="";if(I)M=" with encryption";for(let X of Z)if(Q0.verbose(`setting for ${X.envFilepath}`),X.error){if(X.error.code==="MISSING_ENV_FILE")Q0.warn(X.error.message),Q0.help(`? add one with [echo "HELLO=World" > ${X.envFilepath}] and re-run [dotenvx set]`);else if(Q0.warn(X.error.message),X.error.help)Q0.help(X.error.help)}else cB.writeFileX(X.filepath,X.envSrc),Q0.verbose(`${X.key} set${M} (${X.envFilepath})`),Q0.debug(`${X.key} set${M} to ${X.value} (${X.envFilepath})`);if(G.length>0)Q0.success(`âœ” set ${$}${M} (${G.join(",")})`);else if(z.length>0)Q0.info(`no changes (${z})`);for(let X of Z)if(X.privateKeyAdded){if(Q0.success(`âœ” key added to ${X.envKeysFilepath} (${X.privateKeyName})`),!hB())Q0.help("â®•  next run [dotenvx ext gitignore --pattern .env.keys] to gitignore .env.keys");Q0.help(`â®•  next run [${X.privateKeyName}='${X.privateKey}' dotenvx get ${$}] to test decryption locally`)}return{processedEnvs:Z,changedFilepaths:G,unchangedFilepaths:z}},rB=function($,J={}){let q=Aq(J),I=J.ignore||[],{parsed:Q,errors:Y}=new _B($,q,J.overload,process.env.DOTENV_KEY,J.all,J.envKeysFile).run();for(let Z of Y||[]){if(I.includes(Z.code))continue;if(J.strict)throw Z;if(console.error(Z.message),Z.help)console.error(Z.help)}if($){let Z=Q[$];if(Z===void 0)return;else return Z}else if(J.format==="eval"){let Z="";for(let[G,z]of Object.entries(Q))Z+=`${G}=${escape(z)}
`;return Z=Z.trim(),Z}else if(J.format==="shell"){let Z="";for(let[G,z]of Object.entries(Q))Z+=`${G}=${z} `;return Z=Z.trim(),Z}else return Q},pB=function($,J,q){return new xB($,J,q).run()},oB=function($,J){return new uB($,J).run()},aB=function($,J,q=null){let I=new vB($,q).run();if(J)return I[J];else return I};M5.exports={config:lB,parse:nB,set:iB,get:rB,ls:pB,keypair:aB,genexample:oB,setLogLevel:z5,logger:Q0,getColor:kB,bold:gB}});var V5=mq(W5(),1);import*as V$ from"node:fs";import*as fq from"node:path";import*as Sq from"node:process";var U5="0.1.1";function tB($){let{enabled:J=!0,verbose:q=!1,path:I=[".env"],envKeysFile:Q,overload:Y=!1,convention:Z,applyInBuild:G=!1,strict:z=!1,ignore:M,generateExample:X=!1,updateGitignore:V=!1,exposeToClient:N=[]}=$,H=console,D={},W=(...C)=>{if(q)(H??console).log(`[vite-plugin-dotenvx@${U5}]`,...C)},j=()=>{try{let C=fq.resolve(Sq.cwd(),".gitignore"),R="";if(V$.existsSync(C)){if(R=V$.readFileSync(C,"utf8"),R.includes(".env.keys")){W(".env.keys already in .gitignore");return}}V$.writeFileSync(C,`${R}
# dotenvx
.env.keys
`),W("Added .env.keys to .gitignore")}catch(C){console.error("[vite-plugin-dotenvx] Error updating .gitignore:",C)}},w=()=>{try{if(Object.keys(D).length>0){let C=fq.resolve(Sq.cwd(),".env.example"),R=Object.keys(D).map((P)=>`${P}=""`).join(`
`);V$.writeFileSync(C,R),W("Generated .env.example file")}}catch(C){console.error("[vite-plugin-dotenvx] Error generating .env.example:",C)}},B=()=>{try{let C={overload:Y,strict:z};if(I)C.path=Array.isArray(I)?I:[I];if(Q)C.envKeysFile=Q;if(Z)C.convention=Z;if(M)C.ignore=M;let R=V5.default.config(C);if(R.error){if(console.error("[vite-plugin-dotenvx] Error loading .env files:",R.error),z)throw R.error}else{if(W("Loaded environment variables from:"),C.path.forEach((P)=>{W(`  ${P}`)}),q&&R.parsed){let P=Object.keys(R.parsed).length;W(`Loaded ${P} environment variables:`),Object.keys(R.parsed).forEach((E)=>{W(`  ${E}: ${R.parsed[E]}`)})}D=R.parsed||{}}}catch(C){if(console.error("[vite-plugin-dotenvx] Error:",C),z)throw C}};return{name:"vite-plugin-dotenvx",enforce:"pre",apply:(C,{command:R})=>{return R==="serve"||R==="build"&&G},configResolved(C){if(!J)return;if(H={...console},B(),X)w();if(V)j()},config(C){if(!J){W("Plugin is disabled, skipping config hook");return}if(Object.keys(D).length===0)W("No environment variables loaded, loading from files"),B();if(Object.keys(D).length===0){W("No environment variables loaded, skipping config hook");return}if(N.length>0){C.define=C.define||{};let R={};for(let P of Object.keys(D))for(let E of N)if(P.match(new RegExp(E))){R[`import.meta.env.${P}`]=JSON.stringify(D[P]);break}Object.assign(C.define,R),W(`Exposed ${Object.keys(R).length} environment variables to the client`)}}}}var CH=tB;export{CH as default,tB as VitePluginDotenvx};
